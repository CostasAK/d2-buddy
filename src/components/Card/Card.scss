@use "../../sass/variables" as var;
@use "../../sass/mixins" as mixin;
@use "../../sass/functions" as fun;
@use "sass:math";

a.card {
  display: block;
}

.card {
  --card-content-opacity: 0.9;

  position: relative;
  border: 1px solid fun.primary-fg(var(--card-content-opacity));
  color: var.$primary-fg;
  transition-duration: var.$transition;
  transition-property: border-color;
  column-gap: var.$gap;
  padding: 1rem;

  .icon {
    font-size: 4.5rem;
    width: 100%;
    max-width: 4.5rem;
    height: auto;
    max-height: 4.5rem;
    object-fit: scale-down;
    opacity: var(--card-content-opacity);
    transition-duration: var.$transition;
    transition-property: opacity;
  }

  &.side-icon {
    display: grid;
    grid-template-columns: 4.5rem 1fr;

    > .icon {
      grid-row: 1 / 3;
      align-self: center;
    }

    > .title::after {
      content: "";
      display: block;
      margin-block: calc(0.95rem - 1px) 0.55rem;
      border-bottom: 1pt solid var.$primary-fg;
      opacity: var(--card-content-opacity);
      transition-duration: var.$transition;
      transition-property: opacity;
    }

    > .card-content {
      opacity: var(--card-content-opacity);
      transition-duration: var.$transition;
      transition-property: opacity;
    }
  }

  &.floating-icon {
    .icon {
      float: left;
      margin: 0 0.5rem -1px 0;
      max-width: 3rem;
      max-height: 3rem;
      opacity: 1;
    }
  }

  &::before {
    content: "";
    z-index: -1;
    position: absolute;
    inset: 0;
    background: fun.primary-bg(0.5);
    transition: background-color var.$transition;
  }

  &.clickable {
    user-select: none;
    cursor: pointer;

    > * {
      pointer-events: none;
    }

    &::after {
      content: "";
      position: absolute;
      max-width: none;
      inset: 0;
      border: fun.px-to-rem(2) solid var.$primary-fg;
      opacity: 0;
    }
  }

  &.highlight {
    border-color: fun.highlight-green-bright(0.9);
    background: linear-gradient(
      30deg,
      fun.highlight-green-dim(0.1) 0%,
      var.$highlight-green-dim 100%
    );

    &.red .card-inner {
      background: linear-gradient(
        30deg,
        fun.highlight-red(0.1) 0%,
        var.$highlight-red 100%
      );
    }
  }

  &:hover,
  &:active {
    &.clickable {
      --card-content-opacity: 1;

      border-color: var.$primary-fg;

      &::before {
        background-color: fun.primary-fg(0.2);
      }

      &::after {
        animation: border-fade math.div(var.$transition, 1.5) both
          math.div(var.$transition, 2);
      }
    }
  }
}

.modal-text {
  padding: var.$margins;
  width: max-content;
}

@keyframes border-fade {
  from {
    inset: fun.px-to-rem(-9);
    opacity: 0;
  }

  to {
    inset: fun.px-to-rem(-5);
    opacity: 0.9;
  }
}
