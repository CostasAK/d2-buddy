"use strict";(self.webpackChunkd2_buddy=self.webpackChunkd2_buddy||[]).push([[673],{9636:function(e,n,r){r.r(n),r.d(n,{default:function(){return Xe}});var t,i=r(1413),a=r(885),o=r(5861),s=r(7757),c=r.n(s),l=r(7184),d=6e4,u=36e5,p=24*u,m=7*p,h=30*p,f=365.25*p,v=r(3364),y=r(2791),g=r(9412),x=r(168),w=r(6031),j=(0,w.iv)(t||(t=(0,x.Z)(["\n  display: flex;\n  flex-flow: column;\n  justify-content: flex-start;\n  align-items: safe center;\n  text-align: center;\n  margin: auto;\n"]))),S=w.ZP.section.withConfig({displayName:"CycleCardModalStyle__CurrentItem",componentId:"sc-8dv19i-0"})([""," margin-top:",";"],j,(function(e){return e.theme.lengths.pad})),k=w.ZP.section.withConfig({displayName:"CycleCardModalStyle__UpcomingItems",componentId:"sc-8dv19i-1"})([""," gap:",";& > h3{margin:auto;margin-top:",";order:-1;}"],j,(function(e){return e.theme.lengths.gap}),(function(e){return e.theme.lengths.gap})),b=r(5987),_=r(6107);function N(e){return e.charAt(0).toUpperCase()+e.slice(1)}function P(e){if(Math.abs(e)<750)return"now";var n=function(e){var n=Math.abs(e);if(n<6e4)return"less than 1 minute";if(n<9e4)return"1 minute";if(n<=345e4)return"".concat(Math.round(n/d)," minutes");if(n<22*u)return"".concat(n%u/u<.875?Math.floor(n/u):Math.ceil(n/u)).concat(n%u/u<.125||n%u/u>=.875?"":n%u/u<.375?"\xbc":n%u/u<.625?"\xbd":"\xbe"," hour").concat(n<675e4?"":"s");if(n<1.5*p)return"1 day";if(n<26*p)return"".concat(Math.round(n/p)," days");if(n<46*p)return"1 month";if(n<11*h)return"".concat(Math.round(n/h)," months");if(n<18*h)return"1 year";return"".concat(Math.round(n/f)," years")}(e);return e<0?"".concat(n," ago"):"in ".concat(n)}function D(e){return e&&e<=Date.now()}function A(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now()+1e3;if(!e||!n)return n;var t=(n-=n%1e3)%e,i=(r+=1e3-r%1e3)%e||0;return i<t?r-i+t:r-i+t+e}var C=r(184),Z=(0,y.forwardRef)((function(e,n){var r=e.timestamp,t=e.hasTime,i=e.prefix,o=e.conditions,s=e.className,c=(0,y.useState)(Date.now()),l=(0,a.Z)(c,2),d=l[0],u=l[1],m=(0,y.useState)(P(r-d)),h=(0,a.Z)(m,2),f=h[0],v=h[1];(0,y.useEffect)((function(){var e=setTimeout((function(){u((function(){return Date.now()})),v((function(){return P(r-d)}))}),A(3e4,0)-Date.now());return function(){return clearTimeout(e)}}),[d,r]),o=Array.isArray(o)?o:[o];var g,x;return r&&o.every((function(e){return!0===e||("past"===e?D(r):"future"===e?!D(r):"past"===(null===e||void 0===e?void 0:e.when)?D(e.timestamp):"future"===(null===e||void 0===e?void 0:e.when)?!D(e.timestamp):void 0)}))?(g=Math.abs(r-d)<p?"at "+(0,_.m)(r,t):"on "+(0,_.p)(r,t),(0,C.jsx)("p",{ref:n,className:s,children:(x="".concat(i?"".concat(Array.isArray(i)?D(r)?i[1]:i[0]:i," "):"").concat(f?"".concat(f,", "):"").concat(g),x.split(". ").map(N).join(". "))})):null}));Z.defaultProps={hasTime:!0,conditions:[!0]};var M=w.ZP.p.withConfig({displayName:"TimerCardDescriptionStyle__StyledDescription",componentId:"sc-an8yzt-0"})(["margin-top:",";"],(function(e){return e.theme.lengths.gap})),T=function(e){return e===u?"Hourly":e===p?"Daily":e===m?"Weekly":e===h?"Monrthly":e===f?"Yearly":null},B=function(e){var n=e.start,r=e.end,t=e.period,i=e.description;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Z,{prefix:n&&r&&["Starts","Started"],timestamp:n}),(0,C.jsx)(Z,{prefix:n&&r&&["Ends","Ended"],timestamp:r}),T(t)&&(0,C.jsxs)("p",{children:["Period: ",T(t)]}),i&&(0,C.jsx)(M,{children:i})]})},O=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=15046488e5;return(e-r+n)/d};function R(e){return!!e&&new Date(e).getTime()}var U=["description","start","end","period","hasTime"],L=function(e,n,r){for(var t=A(r,R(e));r&&n&&t>=n;)t-=r;return t},V=(0,y.forwardRef)((function(e,n){var r=e.description,t=e.start,o=e.end,s=e.period,c=(e.hasTime,(0,b.Z)(e,U)),l=(0,y.useState)(A(s,R(o))),u=(0,a.Z)(l,2),m=u[0],h=u[1],v=(0,y.useState)(L(t,m,s)),x=(0,a.Z)(v,2),w=x[0],j=x[1];return(0,y.useEffect)((function(){var e=Math.max(w&&m?Math.min(w,m):w||m,A(d,0))-Date.now(),n=setTimeout((function(){h(A(s,R(m))),j(L(w,m,s))}),e);return function(){return clearTimeout(n)}}),[w,m,s]),D(m)||!m&&D(w+p)||!s&&(D(m)||!m&&D(w+p))?null:(0,C.jsxs)(g.Z,(0,i.Z)((0,i.Z)({ref:n,modalContent:(0,C.jsx)(B,{start:w,end:m,period:s,description:r}),style:{order:O(w,s?0:-10*f)},highlight:D(w)},c),{},{children:[(0,C.jsx)(Z,{prefix:w&&m&&"Starts",timestamp:w,conditions:"future"}),(0,C.jsx)(Z,{prefix:w&&m&&"Ends",timestamp:m,conditions:["future",{timestamp:w,when:"past"}]})]}))}));V.defaultProps={hasTime:!0};var I=V,E=function(e){var n=e.items,r=e.nextCycle,t=e.currentItem,i=e.period;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("p",{children:["Period: ",T(i)]}),(0,C.jsxs)(S,{children:[n[t],(0,C.jsx)(Z,{prefix:"Cycles",timestamp:r})]}),n.length>1&&(0,C.jsxs)(k,{children:[(0,C.jsx)("h3",{children:"Upcoming"}),n.map((function(e,a){var o=(a-t+n.length-1)%n.length;return(0,C.jsxs)("section",{style:{order:o},children:[e,(0,C.jsx)(Z,{timestamp:r+o*i})]},a)}))]})]})},Q=(0,y.forwardRef)((function(e,n){var r=e.title,t=e.items,i=e.start,o=e.period,s=e.icon,c=(0,y.useState)(A(o,R(i))),l=(0,a.Z)(c,2),d=l[0],u=l[1],p=(0,y.useState)(Math.floor((Date.now()-i)/o)%t.length),m=(0,a.Z)(p,2),h=m[0],v=m[1];return(0,y.useEffect)((function(){var e=setTimeout((function(){u(A(o,R(i))),v(Math.floor((Date.now()-i)/o)%t.length)}),d-Date.now());return function(){clearTimeout(e)}}),[i,o,d,t.length]),(0,C.jsxs)(g.Z,{ref:n,className:"cycle-card",title:r,style:{order:O(d,-5*f)},modalContent:(0,C.jsx)(E,{items:t,nextCycle:d,currentItem:h,period:o}),icon:s,children:[t[h],(0,C.jsx)(Z,{prefix:"Cycles",timestamp:d})]})}));Q.defaultProps={period:p};var H=Q,K=r(4996),W=r(9773),F=r(4036),z=r(8722);function q(e){var n=(null===e||void 0===e?void 0:e.screenshot)||(null===e||void 0===e?void 0:e.pgcrImage);return n?"https://bungie.net"+n:null}var G={None:0,Story:2,Strike:3,Raid:4,AllPvP:5,Patrol:6,AllPvE:7,Reserved9:9,Control:10,Reserved11:11,Clash:12,Reserved13:13,CrimsonDoubles:15,Nightfall:16,HeroicNightfall:17,AllStrikes:18,IronBanner:19,Reserved20:20,Reserved21:21,Reserved22:22,Reserved24:24,AllMayhem:25,Reserved26:26,Reserved27:27,Reserved28:28,Reserved29:29,Reserved30:30,Supremacy:31,PrivateMatchesAll:32,Survival:37,Countdown:38,TrialsOfTheNine:39,Social:40,TrialsCountdown:41,TrialsSurvival:42,IronBannerControl:43,IronBannerClash:44,IronBannerSupremacy:45,ScoredNightfall:46,ScoredHeroicNightfall:47,Rumble:48,AllDoubles:49,Doubles:50,PrivateMatchesClash:51,PrivateMatchesControl:52,PrivateMatchesSupremacy:53,PrivateMatchesCountdown:54,PrivateMatchesSurvival:55,PrivateMatchesMayhem:56,PrivateMatchesRumble:57,HeroicAdventure:58,Showdown:59,Lockdown:60,Scorched:61,ScorchedTeam:62,Gambit:63,AllPvECompetitive:64,Breakthrough:65,BlackArmoryRun:66,Salvage:67,IronBannerSalvage:68,PvPCompetitive:69,PvPQuickplay:70,ClashQuickplay:71,ClashCompetitive:72,ControlQuickplay:73,ControlCompetitive:74,GambitPrime:75,Reckoning:76,Menagerie:77,VexOffensive:78,NightmareHunt:79,Elimination:80,Momentum:81,Dungeon:82,Sundial:83,TrialsOfOsiris:84,Dares:85,Offensive:86,LostSector:87},X={None:0,Kinetic:1,Arc:2,Thermal:3,Void:4,Raid:5,Stasis:6},$=3,Y=function(e,n){return Object.keys(e).find((function(r){return e[r]===n}))};var J=function(e){var n;return null===(n=Y(X,null===e||void 0===e?void 0:e.defaultDamageType))||void 0===n?void 0:n.replace(/thermal/i,"Solar")};var ee=function(e){var n,r=null===e||void 0===e?void 0:e.itemTypeDisplayName;return"Grenade Launcher"===r&&$===(null===e||void 0===e||null===(n=e.equippingBlock)||void 0===n?void 0:n.ammoType)&&(r="Heavy "+r),r},ne={Legendary:"#4e3263",Exotic:"#cdad34"};var re=function(e){return ne[e]||"#04040e"},te=r(1933),ie=[{name:"DestinyTracker",url:"https://destinytracker.com/destiny-2/db/items/",icon:"https://cod.tracker.gg/public/icons/icon192.png"},{name:"Gunsmith",url:"https://d2gunsmith.com/w/",icon:"https://d2gunsmith.com/favicon.ico"},{name:"Light.gg",url:"https://www.light.gg/db/en/items/",icon:"https://www.light.gg/Content/Images/new-icon.png"}];function ae(e){var n=e.id;return(0,C.jsx)("ul",{className:"weapon-links",children:ie.map((function(e){return(0,C.jsx)("li",{children:(0,C.jsxs)(v.Z,{className:"site-link",href:e.url+n,children:[e.icon&&(0,C.jsx)(W.Z,{src:e.icon,className:"site-icon"}),e.name]})},e.name)}))})}function oe(e){var n,r,t=e.id,i=e.name,a=(0,te.useQuery)(["DestinyInventoryItemDefinition",t]),o=a.data,s=a.error;if(a.isLoading)return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{className:"destiny-weapon",children:[(0,C.jsx)(F.Z,{size:"inline"})," ",i&&(0,C.jsx)("span",{children:i})]})});if(s)return console.error(s),null;i||(i=null===o||void 0===o||null===(n=o.displayProperties)||void 0===n?void 0:n.name);var c=ee(o),l=J(o),d=null===o||void 0===o||null===(r=o.inventory)||void 0===r?void 0:r.tierTypeName,u=q(o);return(0,C.jsx)(z.Z,{triggerContent:(0,C.jsxs)("div",{className:"destiny-weapon a-link",children:[(0,C.jsx)(K.Z,{icon:["weapons",c],color:l})," ",(0,C.jsx)("span",{children:i})]}),tooltip:{contents:"".concat(d," ").concat(l," ").concat(c),backgroundColor:re(d)},children:(0,C.jsxs)("article",{className:"weapon-modal "+(null===d||void 0===d?void 0:d.toLowerCase()),children:[(0,C.jsx)("div",{className:"weapon-screenshot",style:{backgroundImage:"url(".concat(u,")")},children:(0,C.jsx)(ae,{id:t})}),(0,C.jsxs)("div",{className:"weapon-header",children:[(0,C.jsx)(W.Z,{src:o.displayProperties.icon,className:"weapon-icon"}),(0,C.jsxs)("div",{className:"weapon-header-text",children:[(0,C.jsx)("h3",{children:i}),(0,C.jsxs)("p",{children:[d," |"," ",(0,C.jsx)(K.Z,{icon:["elements",l],color:l})," ",l," | ",(0,C.jsx)(K.Z,{icon:["weapons",c]})," ",c]})]})]})]})})}var se=[(0,C.jsx)(oe,{id:"2782847179",name:"Blasphemer"}),(0,C.jsx)(oe,{id:"2164448701",name:"Apostate"}),(0,C.jsx)(oe,{id:"3067821200",name:"Heretic"})];function ce(){return(0,C.jsx)(H,{title:"Altars of Sorrow Weapon",items:se,start:16488324e5,period:p,icon:"https://www.bungie.net/common/destiny2_content/icons/58bf5b93ae8cfefc55852fe664179757.png"})}var le=r(691),de=r(1694),ue=r.n(de),pe=(0,y.forwardRef)((function(e,n){var r=e.id,t=e.dataArray,i=e.name,a=r?[].concat(r):[],o=(0,te.useQueries)(a.map((function(e){return{queryKey:["DestinyActivityDefinition",e]}})),{enabled:!!r});if(r){if(!o.every((function(e){return e.isSuccess})))return o.some((function(e){return e.isLoading}))?(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("article",{ref:n,className:"activity",children:(0,C.jsx)(F.Z,{size:"page",fadeIn:"none"})})}):(o.filter((function(e){return e.error})).map((function(e){return console.error(e.error)})),null);o=o.filter((function(e){return e.isSuccess})).map((function(e){return e.data}))}else o=t.map((function(e){return e.data}));return o.sort((function(e,n){return(null===e||void 0===e?void 0:e.activityLightLevel)-(null===n||void 0===n?void 0:n.activityLightLevel)})),(0,C.jsxs)("article",{ref:n,className:ue()("activity","success"),children:[(0,C.jsx)(be,{data:o[0],name:i}),o.map((function(e,n){return(0,C.jsxs)(y.Fragment,{children:[(0,C.jsx)(je,{data:e}),(0,C.jsx)(De,{data:e})]},n)}))]})}));pe.defaultProps={};var me=r(907);var he=r(181);function fe(e){return function(e){if(Array.isArray(e))return(0,me.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,he.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ve=r(8995),ye=[{class:"Overload",pattern:/Disruption|Overload/i},{class:"Unstoppable",pattern:/Stagger|Unstoppable/i},{class:"Barrier",pattern:/Shield-Piercing|Barrier/i}],ge=(0,y.forwardRef)((function(e,n){var r=e.champions,t=e.known_champions;if(!r||r.length<1)return null;var i=new Set;return r.map((function(e){return ye.map((function(n){var r;return n.pattern.test(null===e||void 0===e||null===(r=e.displayProperties)||void 0===r?void 0:r.description)&&i.add(n.class)}))})),(0,C.jsxs)("section",{ref:n,className:"activity-champions",children:[(0,C.jsx)("h5",{className:"heading",children:"Champions"}),(0,C.jsx)("div",{className:"champions",children:fe(i).map((function(e,n){return(0,C.jsx)(ve.Z,{contents:"".concat(e," Champions"),children:(0,C.jsxs)("div",{className:"champion "+e,children:[(0,C.jsx)(K.Z,{icon:["champions","modifiers",e],style:{filter:"brightness(".concat(t[e]&&"75%",")")}}),t[e]>0&&(0,C.jsx)("span",{className:"champion-amount",children:t[e]})]},n)},n)}))})]})}));ge.defaultProps={champions:[],known_champions:{}};var xe=(0,y.forwardRef)((function(e,n){var r,t=e.id,i=(0,te.useQuery)(["DestinyDestinationDefinition",t]),a=i.data,o=i.error;return i.isLoading?(0,C.jsxs)("p",{ref:n,className:"destination",children:[(0,C.jsx)(K.Z,{icon:["activities","Destination"]}),(0,C.jsx)(F.Z,{size:"inline"})]}):o?(console.error(o),null):(0,C.jsxs)("p",{ref:n,className:"destination",children:[(0,C.jsx)(K.Z,{icon:["activities","Destination"]}),null===a||void 0===a||null===(r=a.displayProperties)||void 0===r?void 0:r.name]})}));xe.defaultProps={};var we=["className","data"],je=(0,y.forwardRef)((function(e,n){var r,t=e.className,a=e.data,o=(0,b.Z)(e,we),s=null===a||void 0===a||null===(r=a.selectionScreenDisplayProperties)||void 0===r?void 0:r.name;return(0,C.jsx)("h2",(0,i.Z)((0,i.Z)({ref:n,className:ue()("activity-difficulty",null===s||void 0===s?void 0:s.toLowerCase(),t)},o),{},{children:s}))}));je.defaultProps={};var Se={LostSector:"Lost Sector"};var ke=function(e){var n=Y(G,null===e||void 0===e?void 0:e.directActivityModeType);return Se[n]||n},be=(0,y.forwardRef)((function(e,n){var r=e.data,t=e.name;t||(t=r.originalDisplayProperties.name);var i=ke(r);"Nightfall"===r.originalDisplayProperties.name&&(t=r.originalDisplayProperties.description,i="Nightfall");var a=q(r);return(0,C.jsxs)("section",{ref:n,className:"activity-header",style:{backgroundImage:"url(".concat(a,")")},children:[(0,C.jsx)("h5",{className:"activity-type",children:i}),(0,C.jsx)("h1",{className:"activity-name",children:t}),(0,C.jsx)(xe,{id:r.destinationHash})]})}));be.defaultProps={};var _e=(0,y.forwardRef)((function(e,n){var r,t,i,a,o=e.data,s=null===o||void 0===o||null===(r=o.displayProperties)||void 0===r?void 0:r.name,c=null===o||void 0===o||null===(t=o.displayProperties)||void 0===t?void 0:t.icon,l=null!==o&&void 0!==o&&null!==(i=o.displayProperties)&&void 0!==i&&i.description?(0,C.jsx)("p",{children:null===o||void 0===o||null===(a=o.displayProperties)||void 0===a?void 0:a.description.replace(/(?:[\s.,]*\n+[\s.,]*)+/g,"; ").replace(/(\[Disruption|Stagger\])/g,"|$1|").split("|")}):null;if(!c||!s)return null;var d=[{class:"arc",pattern:/arc/i},{class:"solar",pattern:/solar/i},{class:"void",pattern:/void/i},{class:"stasis",pattern:/stasis/i}];return(0,C.jsxs)("section",{ref:n,className:"activity-modifier",children:[(0,C.jsx)(W.Z,{className:ue()("icon",d.filter((function(e){return e.pattern.test(s)})).map((function(e){return e.class}))),src:c,title:s}),(0,C.jsxs)("div",{className:"description",children:[(0,C.jsx)("h6",{className:ue()("heading",d.filter((function(e){return e.pattern.test(s)})).map((function(e){return e.class}))),children:s}),l]})]})}));_e.defaultProps={};var Ne={0:{known_shields:{Void:0,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:0,Unstoppable:0}},480864726:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:3,Overload:0,Unstoppable:1}},480864721:{known_shields:{Void:0,Solar:0,Arc:1},known_champions:{Barrier:5,Overload:0,Unstoppable:2}},145221019:{known_shields:{Void:5,Solar:0,Arc:7},known_champions:{Barrier:0,Overload:1,Unstoppable:2}},145221020:{known_shields:{Void:5,Solar:0,Arc:4},known_champions:{Barrier:0,Overload:4,Unstoppable:2}},3094493720:{known_shields:{Void:0,Solar:2,Arc:4},known_champions:{Barrier:3,Overload:0,Unstoppable:1}},3094493727:{known_shields:{Void:0,Solar:2,Arc:2},known_champions:{Barrier:3,Overload:0,Unstoppable:4}},2936791996:{known_shields:{Void:4,Solar:0,Arc:0},known_champions:{Barrier:2,Overload:2,Unstoppable:0}},2936791995:{known_shields:{Void:3,Solar:0,Arc:0},known_champions:{Barrier:5,Overload:4,Unstoppable:0}},1898610132:{known_shields:{Void:9,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:2,Unstoppable:2}},1898610131:{known_shields:{Void:10,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:4,Unstoppable:3}},660710127:{known_shields:{Void:1,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:2,Unstoppable:3}},660710120:{known_shields:{Void:1,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:3,Unstoppable:4}},4206916275:{known_shields:{Void:17,Solar:2,Arc:0},known_champions:{Barrier:0,Overload:1,Unstoppable:3}},4206916276:{known_shields:{Void:29,Solar:2,Arc:1},known_champions:{Barrier:0,Overload:3,Unstoppable:5}},3911969233:{known_shields:{Void:0,Solar:0,Arc:4},known_champions:{Barrier:4,Overload:0,Unstoppable:3}},3911969238:{known_shields:{Void:0,Solar:0,Arc:1},known_champions:{Barrier:7,Overload:0,Unstoppable:3}},184186581:{known_shields:{Void:0,Solar:10,Arc:0},known_champions:{Barrier:3,Overload:2,Unstoppable:0}},184186578:{known_shields:{Void:0,Solar:10,Arc:0},known_champions:{Barrier:4,Overload:6,Unstoppable:0}},567131512:{known_shields:{Void:0,Solar:8,Arc:3},known_champions:{Barrier:3,Overload:2,Unstoppable:0}},567131519:{known_shields:{Void:0,Solar:8,Arc:3},known_champions:{Barrier:4,Overload:6,Unstoppable:0}},3678847129:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:0,Overload:3,Unstoppable:2}},3678847134:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:0,Overload:3,Unstoppable:4}}};var Pe=function(e){return Ne[e]||{known_shields:void 0,known_champions:void 0}},De=(0,y.forwardRef)((function(e,n){var r=e.data,t=(0,te.useQueries)(r.modifiers.map((function(e){return{queryKey:["DestinyActivityModifierDefinition",e.activityModifierHash]}})));if(!t.every((function(e){return e.isSuccess})))return t.some((function(e){return e.isLoading}))?(0,C.jsx)("section",{ref:n,className:"activity-modifiers",children:(0,C.jsx)(F.Z,{size:"section"})}):(t.filter((function(e){return e.error})).map((function(e){return console.error(e.error)})),null);var i=Pe(null===r||void 0===r?void 0:r.hash),a=i.known_shields,o=i.known_champions,s=t.filter((function(e){return e.isSuccess&&e.data})).map((function(e){return e.data})),c=s.filter((function(e){return/shielded foes/i.test(e.displayProperties.name)})),l=s.filter((function(e){return/champion foes/i.test(e.displayProperties.name)})),d=s.filter((function(e){return!/(shielded|champion) foes|champions: mob| modifiers$/i.test(e.displayProperties.name)}));return(0,C.jsxs)("section",{ref:n,className:"activity-modifiers",children:[c.length>0&&(0,C.jsx)(Ce,{shields:c,known_shields:a}),l.length>0&&(0,C.jsx)(ge,{champions:l,known_champions:o}),d.length>0&&(0,C.jsxs)("section",{className:"other-modifiers",children:[(0,C.jsx)("h5",{className:"heading",children:"Modifiers"}),(0,C.jsx)("div",{className:"modifiers",children:d.map((function(e,n){return(0,C.jsx)(_e,{data:e},n)}))})]})]})}));De.defaultProps={};var Ae=[{name:"Arc",pattern:/arc/i},{name:"Solar",pattern:/solar/i},{name:"Void",pattern:/void/i},{name:"Stasis",pattern:/stasis/i}],Ce=(0,y.forwardRef)((function(e,n){var r=e.shields,t=e.known_shields;if(!r||r.length<1)return null;var i=new Set;return r.map((function(e){return Ae.map((function(n){var r;return n.pattern.test(null===e||void 0===e||null===(r=e.displayProperties)||void 0===r?void 0:r.description)&&i.add(n.name)}))})),(0,C.jsxs)("section",{ref:n,className:"activity-shields",children:[(0,C.jsx)("h5",{className:"heading",children:"Shields"}),(0,C.jsx)("div",{className:"shields",children:fe(i).map((function(e,n){return(0,C.jsx)(ve.Z,{contents:"".concat(e," Shields"),children:(0,C.jsxs)("div",{className:"shield",children:[(0,C.jsx)(K.Z,{icon:["elements",e],color:e}),t[e]>0&&(0,C.jsx)("span",{className:"shield-amount",children:t[e]})]},n)},n)}))})]})}));Ce.defaultProps={shields:[],known_shields:{}};var Ze=pe;function Me(){var e,n,r=(0,te.useQuery)("Milestones"),t=(null===r||void 0===r||null===(e=r.data)||void 0===e||null===(n=e[1942283261])||void 0===n?void 0:n.activities)||[],i=(0,te.useQueries)(t.map((function(e){return{queryKey:["DestinyActivityDefinition",e.activityHash]}})),{enabled:!!t});return r.isSuccess&&i.every((function(e){return e.isSuccess}))?(0,C.jsx)(H,{title:"Nightfall",start:16534116e5,period:m,items:[(0,C.jsx)(z.Z,{triggerContent:i[0].data.displayProperties.description,children:(0,C.jsx)(Ze,{dataArray:i})})],icon:"https://www.bungie.net/common/destiny2_content/icons/48dda413d9f412ca2b10fd56a35a2665.png",children:i[0].data.displayProperties.description}):null}var Te=[{name:"Shattered Throne",id:2032534090},{name:"Pit of Heresy"},{name:"Prophecy"},{name:"Grasp of Avarice"}].map((function(e){return e.name}));function Be(){return(0,C.jsx)(H,{title:"Featured Dungeon",items:Te,start:16534116e5,period:m,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_f20ebb76bee675ca429e470cec58cc7b.png"})}var Oe="DestinyActivityDefinition";function Re(e){var n,r=e.name,t=(0,te.useQuery)(["Search",Oe,r]),i=t.data,a=t.error,o=t.isLoading,s=(null===i||void 0===i||null===(n=i.results)||void 0===n?void 0:n.results)||[],c=(0,te.useQueries)(s.map((function(e){return{queryKey:[Oe,e.hash]}})),{enabled:!!s});if(o||c.some((function(e){return e.isLoading})))return(0,C.jsx)("article",{className:"lost-sector",children:(0,C.jsx)(F.Z,{size:"page",fadeIn:"none"})});if(a||c.some((function(e){return e.error})))return a&&console.error(a),c.map((function(e){return e.error&&console.error(e.error)})),(0,C.jsx)("article",{className:"lost-sector",children:(0,C.jsx)("h2",{className:"error",children:"Can't find Lost Sector info..."})});var l=c.filter((function(e){return"Lost Sector"===ke(e.data)&&e.data.displayProperties.name.startsWith(r+": ")&&e.data.index===c.reduce((function(n,r){return r.data.displayProperties.name===e.data.displayProperties.name?Math.max(n,r.data.index):n}),0)}));return 0===l.length?(0,C.jsx)("article",{className:"lost-sector",children:(0,C.jsx)("h2",{className:"error",children:"Can't find Lost Sector info..."})}):(0,C.jsx)(Ze,{dataArray:l})}function Ue(e,n){return n?Ue(n,e%n):e}function Le(e,n){return e*n/Ue(e,n)}function Ve(e){var n=e.location;return(0,C.jsx)(z.Z,{triggerContent:(0,C.jsxs)("span",{className:"a-link",children:[n.name," - ",n.location]}),background:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_7d11acd7d5a3daebc0a0c906452932d6.png",children:(0,C.jsx)(Re,{name:n.name})})}function Ie(){var e=(0,y.useMemo)((function(){var e=[{name:"K1 Crew Quarters",location:"Moon"},{name:"K1 Logistics",location:"Moon"},{name:"K1 Revelation",location:"Moon"},{name:"K1 Communion",location:"Moon"},{name:"The Conflux",location:"Nessus"},{name:"Metamorphosis",location:"Throne World"},{name:"Sepulcher",location:"Throne World"},{name:"Extraction",location:"Throne World"},{name:"Excavation Site XII",location:"EDZ"},{name:"Skydock IV",location:"EDZ"},{name:"The Quarry",location:"EDZ"}],n=["Chest","Helmet","Legs","Arms"],r=[];do{r.push((0,C.jsxs)("div",{children:[(0,C.jsx)(Ve,{location:e[r.length%e.length]})," (",n[r.length%n.length],")"]}))}while(r.length<Le(n.length,e.length));return r}),[]);return(0,C.jsx)(H,{title:"Legend & Master Lost Sector",items:e,start:16534116e5,period:p,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_7d11acd7d5a3daebc0a0c906452932d6.png"})}var Ee=["EDZ","Cosmodrome","Moon"].map((function(e){return(0,C.jsx)("div",{children:e})}));function Qe(){return(0,C.jsx)(H,{title:"PsiOps Battleground: Legend",items:Ee,start:16521156e5,period:p,icon:"https://www.bungie.net/common/destiny2_content/icons/b5ca23093632aa939e8209a2ee558106.png"})}function He(){var e,n,r=(0,te.useQuery)("Settings"),t=null===r||void 0===r||null===(e=r.data)||void 0===e||null===(n=e.destiny2CoreSettings)||void 0===n?void 0:n.currentSeasonHash,i=(0,te.useQuery)(["DestinySeasonDefinition",t],{enabled:!!t}),a=i.isLoading,o=i.error,s=i.data;return r.isLoading||a?null:r.error||o?(console.error(r.error),null):(0,C.jsx)(I,{title:"Season ".concat(s.seasonNumber,": ").concat(s.displayProperties.name),description:s.displayProperties.description,start:s.startDate,end:s.endDate,icon:"".concat("https://bungie.net").concat(s.displayProperties.icon)})}var Ke=[(0,C.jsx)(oe,{id:"2721157927",name:"Tarnation"}),(0,C.jsx)(oe,{id:"1399109800",name:"Fel Taradiddle"}),(0,C.jsx)(oe,{id:"3865728990",name:"Father's Sins"}),(0,C.jsx)(oe,{id:"927567426",name:"Come to Pass"})];function We(){return(0,C.jsx)(H,{title:"Wellspring Weapon",items:Ke,start:1648746e6,period:p,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyMilestoneDefinition_feb5aecca544ab023ecf3b74ac8f509b.png"})}var Fe=function(){return[{title:"Daily Reset",start:(0,l.PR)().end,period:p,icon:"https://cdn.jsdelivr.net/gh/game-icons/icons@c10320edc7ae3f28a29d172e0dd3f029411825d7/delapouite/clockwise-rotation.svg"},{title:"Weekly Reset",start:(0,l.nQ)().end,period:m,icon:"https://cdn.jsdelivr.net/gh/game-icons/icons@c10320edc7ae3f28a29d172e0dd3f029411825d7/delapouite/clockwise-rotation.svg",link:"https://kyber3000.com/reset"},{title:"Weekend Activities",start:(0,l.yb)()?(0,l.yb)().start:(0,l.l2)().start,end:(0,l.yb)()?(0,l.yb)().end:(0,l.l2)().end,period:m,icon:"https://cdn.jsdelivr.net/gh/game-icons/icons@c10320edc7ae3f28a29d172e0dd3f029411825d7/delapouite/clockwise-rotation.svg",description:(0,C.jsxs)("ul",{children:[(0,C.jsx)("li",{children:(0,C.jsx)(v.Z,{href:"https://kyber3000.com/Xur",children:"Xur"})}),(0,C.jsx)("li",{children:(0,C.jsx)(v.Z,{href:"https://kyber3000.com/Trials",children:"Trials of Osiris"})})]})}]};function ze(){return(ze=(0,o.Z)(c().mark((function e(n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return e.next=4,e.sent.json();case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qe=function(e){return ze.apply(this,arguments)}("https://raw.githubusercontent.com/CostasAK/d2-timers/events/events.json"),Ge=[{name:"Destiny Server and Update Status",link:"https://help.bungie.net/hc/en-us/articles/360049199271-Destiny-Server-and-Update-Status"},{name:"Bungie Maintenance Notifications",link:"https://twitter.com/BungieHelp"},{name:"Patch Notes",link:"https://www.bungie.net/en/Explore/Category?category=Updates"}];function Xe(){var e=y.useState([]),n=(0,a.Z)(e,2),r=n[0],t=n[1];qe.then((function(e){return t(e)}));var o=y.useState(Fe()),s=(0,a.Z)(o,2),c=s[0],l=s[1],d=y.useState(Date.now()),p=(0,a.Z)(d,2),m=p[0],h=p[1];return y.useEffect((function(){var e=setTimeout((function(){l(Fe()),h((function(){return Date.now()}))}),u-m%u);return function(){return clearTimeout(e)}}),[m]),(0,C.jsxs)("div",{className:"timers-wrapper",children:[(0,C.jsx)("h1",{children:"Timers"}),(0,C.jsxs)("div",{className:"timers",children:[(0,C.jsx)(Me,{}),(0,C.jsx)(We,{}),(0,C.jsx)(Ie,{}),(0,C.jsx)(Qe,{}),(0,C.jsx)(Be,{}),(0,C.jsx)(ce,{}),(0,C.jsx)(He,{}),r.map((function(e,n){return(0,C.jsx)(I,(0,i.Z)({},e),n)})),c.map((function(e,n){return(0,C.jsx)(I,(0,i.Z)({},e),n)}))]}),(0,C.jsx)("div",{className:"links",children:Ge.map((function(e){return(0,C.jsx)(le.Z,{href:e.link,children:e.name},e.name)}))})]})}}}]);
//# sourceMappingURL=673.0a75910d.chunk.js.map