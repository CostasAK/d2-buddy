(self.webpackChunkd2_buddy=self.webpackChunkd2_buddy||[]).push([[554],{3053:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return en}});var r=t(1413),i=t(885),a=t(5861),s=t(7757),o=t.n(s);function c(e){e.setUTCMinutes(0),e.setUTCSeconds(0),e.setUTCMilliseconds(0)}var l=17;function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,n=new Date(e);c(n),n.getUTCHours()<l&&n.setUTCDate(n.getUTCDate()-1),n.setUTCHours(l);var t=new Date(n);return t.setUTCDate(t.getUTCDate()+1),{start:n,end:t}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=new Date(e).getTime(),a=h(e,n,t,r),s=a.start,o=a.end;if(s.getTime()<i&&i<o.getTime())return{start:s,end:o}}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=new Date(e);for(c(i),i.getUTCHours()<t&&i.setUTCDate(i.getUTCDate()-1),i.setUTCHours(t);i.getUTCDay()!==n;)i.setUTCDate(i.getUTCDate()-1);var a=new Date(i);return a.setUTCDate(a.getUTCDate()+r),{start:i,end:a}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=new Date(e);for(c(i),i.getUTCHours()>=t&&i.setUTCDate(i.getUTCDate()+1),i.setUTCHours(t);i.getUTCDay()!==n;)i.setUTCDate(i.getUTCDate()+1);var a=new Date(i);return a.setUTCDate(a.getUTCDate()+r),{start:i,end:a}}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return h(e,2,l,7)}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return f(e,5,l,4)}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return d(e,5,l,4)}var g=t(4942),y=[0,15047172e5,15124932e5,15257988e5,15360804e5,1543338e6,15518052e5,15596676e5,15699492e5,15759972e5,15838596e5,1591722e6,16050276e5,161289e7,16207524e5],w={redWar:1,curseOfOsiris:2,warmind:3,resurgence:3,forsaken:4,outlaw:4,blackArmory:5,forge:5,jokersWild:6,drifter:6,penumbra:7,opulence:7,shadowkeep:8,undying:8,dawn:9,worthy:10,arrivals:11,beyondLight:12,hunt:12,chosen:13};Object.entries(w).reduce((function(e,n){var t=(0,i.Z)(n,2),r=t[0],a=t[1];return Object.assign(e,(0,g.Z)({},r,function(e){var n=y[e];if(n){var t=y[e+1];return{start:new Date(n),end:t?new Date(t):void 0,seasonNumber:e}}}(a)))}),{});var x=6e4,j=36e5,D=24*j,S=7*D,k=30*D,b=365.25*D,_=t(7892),M=t.n(_);function C(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!n)return $(e,!1);var t=new Intl.DateTimeFormat(void 0,{hour:"numeric"}).formatToParts(new Date(e));return void 0!==t.dayPeriod?M()(e).format("h:mm A"):M()(e).format("H:mm")}function $(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return M()(e).format("ddd, D MMM YYYY")+(n?" "+C(e):"")}var T=t(2791),N=t(1625);function A(e){if(Math.abs(e)<750)return"now";var n=function(e){var n=Math.abs(e);if(n<6e4)return"less than 1 minute";if(n<9e4)return"1 minute";if(n<=345e4)return"".concat(Math.round(n/x)," minutes");if(n<22*j)return"".concat(n%j/j<.875?Math.floor(n/j):Math.ceil(n/j)).concat(n%j/j<.125||n%j/j>=.875?"":n%j/j<.375?"\xbc":n%j/j<.625?"\xbd":"\xbe"," hour").concat(n<675e4?"":"s");if(n<1.5*D)return"1 day";if(n<26*D)return"".concat(Math.round(n/D)," days");if(n<46*D)return"1 month";if(n<11*k)return"".concat(Math.round(n/k)," months");if(n<18*k)return"1 year";return"".concat(Math.round(n/b)," years")}(e);return e<0?"".concat(n," ago"):"in ".concat(n)}function U(e){return e&&e<=Date.now()}function O(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now()+1e3;if(!e||!n)return n;var r=(n-=n%1e3)%e,i=(t+=1e3-t%1e3)%e||0;return i<r?t-i+r:t-i+r+e}function P(e){return!!e&&new Date(e).getTime()}var Z=t(184);function B(e){var n=e.name,t=e.items,r=e.start,a=e.period,s=e.icon,o=(0,T.useState)(Date.now()),c=(0,i.Z)(o,2),l=c[0],u=c[1],d=(0,T.useState)(O(a,P(r))),h=(0,i.Z)(d,2),f=h[0],m=h[1];function p(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!n&&U(e-D)?C(e):$(e)}(0,T.useEffect)((function(){var e=setTimeout((function(){u((function(){return Date.now()})),m((function(){return O(a,P(r))}))}),1e3);return function(){clearTimeout(e)}}),[r,a,f,l]);var v=(f-5*b)/x,g=Math.floor((l-r)/a)%t.length,y=(0,Z.jsxs)(Z.Fragment,{children:[t[g],"Cycles "+function(e){var n=A(e-l);return U(e-D)?n+", at "+p(e):n+", on "+p(e)}(f)]}),w=(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("section",{children:y}),(0,Z.jsxs)("section",{className:"upcoming-items",children:[(0,Z.jsx)("h3",{children:"Upcoming"}),t.map((function(e,n){var r=(n-g+t.length-1)%t.length;return(0,Z.jsxs)("section",{style:{order:r},children:[e,p(f+r*a,!0)]},n)}))]})]});return(0,Z.jsx)(N.Z,{className:"cycle-card",title:n,style:{order:v},modalContent:w,icon:s,children:y})}B.defaultProps={period:D};var L=B,H=t(4996),R=t(8301),V=t(4036),I=t(8722);function W(e){var n=(null===e||void 0===e?void 0:e.screenshot)||(null===e||void 0===e?void 0:e.pgcrImage);return n?"https://bungie.net"+n:null}var Y={None:0,Story:2,Strike:3,Raid:4,AllPvP:5,Patrol:6,AllPvE:7,Reserved9:9,Control:10,Reserved11:11,Clash:12,Reserved13:13,CrimsonDoubles:15,Nightfall:16,HeroicNightfall:17,AllStrikes:18,IronBanner:19,Reserved20:20,Reserved21:21,Reserved22:22,Reserved24:24,AllMayhem:25,Reserved26:26,Reserved27:27,Reserved28:28,Reserved29:29,Reserved30:30,Supremacy:31,PrivateMatchesAll:32,Survival:37,Countdown:38,TrialsOfTheNine:39,Social:40,TrialsCountdown:41,TrialsSurvival:42,IronBannerControl:43,IronBannerClash:44,IronBannerSupremacy:45,ScoredNightfall:46,ScoredHeroicNightfall:47,Rumble:48,AllDoubles:49,Doubles:50,PrivateMatchesClash:51,PrivateMatchesControl:52,PrivateMatchesSupremacy:53,PrivateMatchesCountdown:54,PrivateMatchesSurvival:55,PrivateMatchesMayhem:56,PrivateMatchesRumble:57,HeroicAdventure:58,Showdown:59,Lockdown:60,Scorched:61,ScorchedTeam:62,Gambit:63,AllPvECompetitive:64,Breakthrough:65,BlackArmoryRun:66,Salvage:67,IronBannerSalvage:68,PvPCompetitive:69,PvPQuickplay:70,ClashQuickplay:71,ClashCompetitive:72,ControlQuickplay:73,ControlCompetitive:74,GambitPrime:75,Reckoning:76,Menagerie:77,VexOffensive:78,NightmareHunt:79,Elimination:80,Momentum:81,Dungeon:82,Sundial:83,TrialsOfOsiris:84,Dares:85,Offensive:86,LostSector:87},E={None:0,Kinetic:1,Arc:2,Thermal:3,Void:4,Raid:5,Stasis:6},Q=3,F=function(e,n){return Object.keys(e).find((function(t){return e[t]===n}))};var z=function(e){var n;return null===(n=F(E,null===e||void 0===e?void 0:e.defaultDamageType))||void 0===n?void 0:n.replace(/thermal/i,"Solar")};var K=function(e){var n,t=null===e||void 0===e?void 0:e.itemTypeDisplayName;return"Grenade Launcher"===t&&Q===(null===e||void 0===e||null===(n=e.equippingBlock)||void 0===n?void 0:n.ammoType)&&(t="Heavy "+t),t},q={Legendary:"#4e3263",Exotic:"#cdad34"};var G=function(e){return q[e]||"#04040e"},J=t(1933),X=[{name:"DestinyTracker",url:"https://destinytracker.com/destiny-2/db/items/",icon:"https://cod.tracker.gg/public/icons/icon192.png"},{name:"Gunsmith",url:"https://d2gunsmith.com/w/",icon:"https://d2gunsmith.com/favicon.ico"},{name:"Light.gg",url:"https://www.light.gg/db/en/items/",icon:"https://www.light.gg/Content/Images/new-icon.png"}];function ee(e){var n=e.id;return(0,Z.jsx)("ul",{className:"weapon-links",children:X.map((function(e){return(0,Z.jsx)("li",{children:(0,Z.jsxs)("a",{className:"site-link",href:e.url+n,target:"_blank",rel:"noreferrer",children:[e.icon&&(0,Z.jsx)(R.Z,{src:e.icon,className:"site-icon"}),e.name]})},e.name)}))})}function ne(e){var n,t,r=e.id,i=e.name,a=(0,J.useQuery)(["DestinyInventoryItemDefinition",r]),s=a.data,o=a.error;if(a.isLoading)return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)("div",{className:"destiny-weapon",children:[(0,Z.jsx)(V.Z,{size:"inline"})," ",i&&(0,Z.jsx)("span",{children:i})]})});if(o)return console.error(o),null;i||(i=null===s||void 0===s||null===(n=s.displayProperties)||void 0===n?void 0:n.name);var c=K(s),l=z(s),u=null===s||void 0===s||null===(t=s.inventory)||void 0===t?void 0:t.tierTypeName,d=W(s);return(0,Z.jsx)(I.Z,{triggerContent:(0,Z.jsxs)("div",{className:"destiny-weapon a-link",children:[(0,Z.jsx)(H.Z,{icon:["weapons",c],color:l})," ",(0,Z.jsx)("span",{children:i})]}),tooltip:{contents:"".concat(u," ").concat(l," ").concat(c),backgroundColor:G(u)},children:(0,Z.jsxs)("article",{className:"weapon-modal "+(null===u||void 0===u?void 0:u.toLowerCase()),children:[(0,Z.jsx)("div",{className:"weapon-screenshot",style:{backgroundImage:"url(".concat(d,")")},children:(0,Z.jsx)(ee,{id:r})}),(0,Z.jsxs)("div",{className:"weapon-header",children:[(0,Z.jsx)(R.Z,{src:s.displayProperties.icon,className:"weapon-icon"}),(0,Z.jsxs)("div",{className:"weapon-header-text",children:[(0,Z.jsx)("h3",{children:i}),(0,Z.jsxs)("p",{children:[u," |"," ",(0,Z.jsx)(H.Z,{icon:["elements",l],color:l})," ",l," | ",(0,Z.jsx)(H.Z,{icon:["weapons",c]})," ",c]})]})]})]})})}var te=[(0,Z.jsx)(ne,{id:"2782847179",name:"Blasphemer"}),(0,Z.jsx)(ne,{id:"2164448701",name:"Apostate"}),(0,Z.jsx)(ne,{id:"3067821200",name:"Heretic"})];function re(){return(0,Z.jsx)(L,{name:"Altars of Sorrow Weapon",items:te,start:16488324e5,period:D,icon:"https://www.bungie.net/common/destiny2_content/icons/58bf5b93ae8cfefc55852fe664179757.png"})}var ie=t(691),ae=t(1694),se=t.n(ae),oe=(0,T.forwardRef)((function(e,n){var t=e.id,r=e.dataArray,i=e.name,a=t?[].concat(t):[],s=(0,J.useQueries)(a.map((function(e){return{queryKey:["DestinyActivityDefinition",e]}})),{enabled:!!t});if(t){if(!s.every((function(e){return e.isSuccess})))return s.some((function(e){return e.isLoading}))?(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)("article",{ref:n,className:"activity",children:(0,Z.jsx)(V.Z,{size:"page",fadeIn:"none"})})}):(s.filter((function(e){return e.error})).map((function(e){return console.error(e.error)})),null);s=s.filter((function(e){return e.isSuccess})).map((function(e){return e.data}))}else s=r.map((function(e){return e.data}));return s.sort((function(e,n){return(null===e||void 0===e?void 0:e.activityLightLevel)-(null===n||void 0===n?void 0:n.activityLightLevel)})),(0,Z.jsxs)("article",{ref:n,className:se()("activity","success"),children:[(0,Z.jsx)(xe,{data:s[0],name:i}),s.map((function(e,n){return(0,Z.jsxs)(T.Fragment,{children:[(0,Z.jsx)(ge,{data:e}),(0,Z.jsx)(ke,{data:e})]},n)}))]})}));oe.defaultProps={};var ce=t(907);var le=t(181);function ue(e){return function(e){if(Array.isArray(e))return(0,ce.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,le.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var de=t(935),he=[{class:"Overload",pattern:/Disruption|Overload/i},{class:"Unstoppable",pattern:/Stagger|Unstoppable/i},{class:"Barrier",pattern:/Shield-Piercing|Barrier/i}],fe=(0,T.forwardRef)((function(e,n){var t=e.champions,r=e.known_champions;if(!t||t.length<1)return null;var i=new Set;return t.map((function(e){return he.map((function(n){var t;return n.pattern.test(null===e||void 0===e||null===(t=e.displayProperties)||void 0===t?void 0:t.description)&&i.add(n.class)}))})),(0,Z.jsxs)("section",{ref:n,className:"activity-champions",children:[(0,Z.jsx)("h5",{className:"heading",children:"Champions"}),(0,Z.jsx)("div",{className:"champions",children:ue(i).map((function(e,n){return(0,Z.jsx)(de.Z,{contents:"".concat(e," Champions"),children:(0,Z.jsxs)("div",{className:"champion "+e,children:[(0,Z.jsx)(H.Z,{icon:["champions","modifiers",e],style:{filter:"brightness(".concat(r[e]&&"75%",")")}}),r[e]>0&&(0,Z.jsx)("span",{className:"champion-amount",children:r[e]})]},n)},n)}))})]})}));fe.defaultProps={champions:[],known_champions:{}};var me=(0,T.forwardRef)((function(e,n){var t,r=e.id,i=(0,J.useQuery)(["DestinyDestinationDefinition",r]),a=i.data,s=i.error;return i.isLoading?(0,Z.jsxs)("p",{ref:n,className:"destination",children:[(0,Z.jsx)(H.Z,{icon:["activities","Destination"]}),(0,Z.jsx)(V.Z,{size:"inline"})]}):s?(console.error(s),null):(0,Z.jsxs)("p",{ref:n,className:"destination",children:[(0,Z.jsx)(H.Z,{icon:["activities","Destination"]}),null===a||void 0===a||null===(t=a.displayProperties)||void 0===t?void 0:t.name]})}));me.defaultProps={};var pe=t(5987),ve=["className","data"],ge=(0,T.forwardRef)((function(e,n){var t,i=e.className,a=e.data,s=(0,pe.Z)(e,ve),o=null===a||void 0===a||null===(t=a.selectionScreenDisplayProperties)||void 0===t?void 0:t.name;return(0,Z.jsx)("h2",(0,r.Z)((0,r.Z)({ref:n,className:se()("activity-difficulty",null===o||void 0===o?void 0:o.toLowerCase(),i)},s),{},{children:o}))}));ge.defaultProps={};var ye={LostSector:"Lost Sector"};var we=function(e){var n=F(Y,null===e||void 0===e?void 0:e.directActivityModeType);return ye[n]||n},xe=(0,T.forwardRef)((function(e,n){var t=e.data,r=e.name;r||(r=t.displayProperties.name);var i=we(t);"Nightfall"===t.originalDisplayProperties.name&&(r=t.originalDisplayProperties.description,i="Nightfall");var a=W(t);return(0,Z.jsxs)("section",{ref:n,className:"activity-header",style:{backgroundImage:"url(".concat(a,")")},children:[(0,Z.jsx)("h5",{className:"activity-type",children:i}),(0,Z.jsx)("h1",{className:"activity-name",children:r}),(0,Z.jsx)(me,{id:t.destinationHash})]})}));xe.defaultProps={};var je=(0,T.forwardRef)((function(e,n){var t,r,i,a,s=e.data,o=null===s||void 0===s||null===(t=s.displayProperties)||void 0===t?void 0:t.name,c=null===s||void 0===s||null===(r=s.displayProperties)||void 0===r?void 0:r.icon,l=null!==s&&void 0!==s&&null!==(i=s.displayProperties)&&void 0!==i&&i.description?(0,Z.jsx)("p",{children:null===s||void 0===s||null===(a=s.displayProperties)||void 0===a?void 0:a.description.replace(/(?:[\s.,]*\n+[\s.,]*)+/g,"; ").replace(/(\[Disruption|Stagger\])/g,"|$1|").split("|")}):null;if(!c||!o)return null;var u=[{class:"arc",pattern:/arc/i},{class:"solar",pattern:/solar/i},{class:"void",pattern:/void/i},{class:"stasis",pattern:/stasis/i}];return(0,Z.jsxs)("section",{ref:n,className:"activity-modifier",children:[(0,Z.jsx)(de.Z,{contents:o,children:(0,Z.jsx)(R.Z,{className:se()("icon",u.filter((function(e){return e.pattern.test(o)})).map((function(e){return e.class}))),src:c})}),(0,Z.jsxs)("div",{className:"description",children:[(0,Z.jsx)("h6",{className:se()("heading",u.filter((function(e){return e.pattern.test(o)})).map((function(e){return e.class}))),children:o}),l]})]})}));je.defaultProps={};var De={0:{known_shields:{Void:0,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:0,Unstoppable:0}},480864726:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:3,Overload:0,Unstoppable:1}},480864721:{known_shields:{Void:0,Solar:0,Arc:1},known_champions:{Barrier:5,Overload:0,Unstoppable:2}},145221019:{known_shields:{Void:5,Solar:0,Arc:7},known_champions:{Barrier:0,Overload:1,Unstoppable:2}},145221020:{known_shields:{Void:5,Solar:0,Arc:4},known_champions:{Barrier:0,Overload:4,Unstoppable:2}},3094493720:{known_shields:{Void:0,Solar:2,Arc:4},known_champions:{Barrier:3,Overload:0,Unstoppable:1}},3094493727:{known_shields:{Void:0,Solar:2,Arc:2},known_champions:{Barrier:3,Overload:0,Unstoppable:4}},2936791996:{known_shields:{Void:4,Solar:0,Arc:0},known_champions:{Barrier:2,Overload:2,Unstoppable:0}},2936791995:{known_shields:{Void:3,Solar:0,Arc:0},known_champions:{Barrier:5,Overload:4,Unstoppable:0}},1898610132:{known_shields:{Void:9,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:2,Unstoppable:2}},1898610131:{known_shields:{Void:10,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:4,Unstoppable:3}},660710127:{known_shields:{Void:1,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:2,Unstoppable:3}},660710120:{known_shields:{Void:1,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:3,Unstoppable:4}},4206916275:{known_shields:{Void:17,Solar:2,Arc:0},known_champions:{Barrier:0,Overload:1,Unstoppable:3}},4206916276:{known_shields:{Void:29,Solar:2,Arc:1},known_champions:{Barrier:0,Overload:3,Unstoppable:5}},3911969233:{known_shields:{Void:0,Solar:0,Arc:4},known_champions:{Barrier:4,Overload:0,Unstoppable:3}},3911969238:{known_shields:{Void:0,Solar:0,Arc:1},known_champions:{Barrier:7,Overload:0,Unstoppable:3}},184186581:{known_shields:{Void:0,Solar:10,Arc:0},known_champions:{Barrier:3,Overload:2,Unstoppable:0}},184186578:{known_shields:{Void:0,Solar:10,Arc:0},known_champions:{Barrier:4,Overload:6,Unstoppable:0}},567131512:{known_shields:{Void:0,Solar:8,Arc:3},known_champions:{Barrier:3,Overload:2,Unstoppable:0}},567131519:{known_shields:{Void:0,Solar:8,Arc:3},known_champions:{Barrier:4,Overload:6,Unstoppable:0}},3678847129:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:0,Overload:3,Unstoppable:2}},3678847134:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:0,Overload:3,Unstoppable:4}}};var Se=function(e){return De[e]||{known_shields:void 0,known_champions:void 0}},ke=(0,T.forwardRef)((function(e,n){var t=e.data,r=(0,J.useQueries)(t.modifiers.map((function(e){return{queryKey:["DestinyActivityModifierDefinition",e.activityModifierHash]}})));if(!r.every((function(e){return e.isSuccess})))return r.some((function(e){return e.isLoading}))?(0,Z.jsx)("section",{ref:n,className:"activity-modifiers",children:(0,Z.jsx)(V.Z,{size:"section"})}):(r.filter((function(e){return e.error})).map((function(e){return console.error(e.error)})),null);var i=Se(null===t||void 0===t?void 0:t.hash),a=i.known_shields,s=i.known_champions,o=r.filter((function(e){return e.isSuccess})).map((function(e){return e.data})),c=o.filter((function(e){return/shielded foes/i.test(e.displayProperties.name)})),l=o.filter((function(e){return/champion foes/i.test(e.displayProperties.name)})),u=o.filter((function(e){return!/(shielded|champion) foes|champions: mob| modifiers$/i.test(e.displayProperties.name)}));return(0,Z.jsxs)("section",{ref:n,className:"activity-modifiers",children:[c.length>0&&(0,Z.jsx)(_e,{shields:c,known_shields:a}),l.length>0&&(0,Z.jsx)(fe,{champions:l,known_champions:s}),u.length>0&&(0,Z.jsxs)("section",{className:"other-modifiers",children:[(0,Z.jsx)("h5",{className:"heading",children:"Modifiers"}),(0,Z.jsx)("div",{className:"modifiers",children:u.map((function(e,n){return(0,Z.jsx)(je,{data:e},n)}))})]})]})}));ke.defaultProps={};var be=[{name:"Arc",pattern:/arc/i},{name:"Solar",pattern:/solar/i},{name:"Void",pattern:/void/i},{name:"Stasis",pattern:/stasis/i}],_e=(0,T.forwardRef)((function(e,n){var t=e.shields,r=e.known_shields;if(!t||t.length<1)return null;var i=new Set;return t.map((function(e){return be.map((function(n){var t;return n.pattern.test(null===e||void 0===e||null===(t=e.displayProperties)||void 0===t?void 0:t.description)&&i.add(n.name)}))})),(0,Z.jsxs)("section",{ref:n,className:"activity-shields",children:[(0,Z.jsx)("h5",{className:"heading",children:"Shields"}),(0,Z.jsx)("div",{className:"shields",children:ue(i).map((function(e,n){return(0,Z.jsx)(de.Z,{contents:"".concat(e," Shields"),children:(0,Z.jsxs)("div",{className:"shield",children:[(0,Z.jsx)(H.Z,{icon:["elements",e],color:e}),r[e]>0&&(0,Z.jsx)("span",{className:"shield-amount",children:r[e]})]},n)},n)}))})]})}));_e.defaultProps={shields:[],known_shields:{}};var Me=oe;function Ce(){var e,n,t=(0,J.useQuery)("Milestones"),r=(null===t||void 0===t||null===(e=t.data)||void 0===e||null===(n=e[1942283261])||void 0===n?void 0:n.activities)||[],i=(0,J.useQueries)(r.map((function(e){return{queryKey:["DestinyActivityDefinition",e.activityHash]}})),{enabled:!!r});return t.isSuccess&&i.every((function(e){return e.isSuccess}))?(0,Z.jsx)(N.Z,{title:"Nightfall",icon:"https://www.bungie.net/common/destiny2_content/icons/48dda413d9f412ca2b10fd56a35a2665.png",customModal:!0,modalContent:(0,Z.jsx)(Me,{dataArray:i}),children:i[0].data.displayProperties.description}):null}var $e="DestinyActivityDefinition";function Te(e){var n,t=e.name,r=(0,J.useQuery)(["Search",$e,t]),i=r.data,a=r.error,s=r.isLoading,o=(null===i||void 0===i||null===(n=i.results)||void 0===n?void 0:n.results)||[],c=(0,J.useQueries)(o.map((function(e){return{queryKey:[$e,e.hash]}})),{enabled:!!o});if(s||c.some((function(e){return e.isLoading})))return(0,Z.jsx)("article",{className:"lost-sector",children:(0,Z.jsx)(V.Z,{size:"page",fadeIn:"none"})});if(a||c.some((function(e){return e.error})))return a&&console.error(a),c.map((function(e){return e.error&&console.error(e.error)})),(0,Z.jsx)("article",{className:"lost-sector",children:(0,Z.jsx)("h2",{className:"error",children:"Can't find Lost Sector info..."})});var l=c.filter((function(e){return"Lost Sector"===we(e.data)}));return(0,Z.jsx)(Me,{dataArray:l})}function Ne(e,n){return n?Ne(n,e%n):e}function Ae(e,n){return e*n/Ne(e,n)}function Ue(e){var n=e.location;return(0,Z.jsx)(I.Z,{triggerContent:(0,Z.jsxs)("span",{className:"a-link",children:[n.name," - ",n.location]}),background:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_7d11acd7d5a3daebc0a0c906452932d6.png",children:(0,Z.jsx)(Te,{name:n.name})})}function Oe(){var e=(0,T.useMemo)((function(){var e=[{name:"K1 Crew Quarters",location:"Moon"},{name:"K1 Logistics",location:"Moon"},{name:"K1 Revelation",location:"Moon"},{name:"Metamorphosis",location:"Throne World"},{name:"Sepulcher",location:"Throne World"},{name:"Extraction",location:"Throne World"},{name:"Veles Labyrinth",location:"Cosmodrome"},{name:"Exodus Garden A2",location:"Cosmodrome"},{name:"Aphelion's Rest",location:"Dreaming City"},{name:"Bay of Drowned Wishes",location:"Dreaming City"},{name:"Chamber of Starlight",location:"Dreaming City"}],n=["Chest","Helmet","Legs","Arms"],t=[];do{t.push((0,Z.jsxs)("div",{children:[(0,Z.jsx)(Ue,{location:e[t.length%e.length]})," (",n[t.length%n.length],")"]}))}while(t.length<Ae(n.length,e.length));return t}),[]);return(0,Z.jsx)(L,{name:"Legend & Master Lost Sector",items:e,start:16534116e5,period:D,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_7d11acd7d5a3daebc0a0c906452932d6.png"})}var Pe=["EDZ","Cosmodrome","Moon"].map((function(e){return(0,Z.jsx)("div",{children:e})}));function Ze(){return(0,Z.jsx)(L,{name:"PsiOps Battleground: Legend",items:Pe,start:16521156e5,period:D,icon:"https://www.bungie.net/common/destiny2_content/icons/b5ca23093632aa939e8209a2ee558106.png"})}function Be(e){return e.charAt(0).toUpperCase()+e.slice(1)}var Le=function(e){var n=e.timestamp,t=e.hasTime,r=e.prefix,a=e.conditions,s=(0,T.useState)(Date.now()),o=(0,i.Z)(s,2),c=o[0],l=o[1],u=(0,T.useState)(A(n-c)),d=(0,i.Z)(u,2),h=d[0],f=d[1];(0,T.useEffect)((function(){var e=setTimeout((function(){l((function(){return Date.now()})),f((function(){return A(n-c)}))}),O(3e4,0)-Date.now());return function(){return clearTimeout(e)}}),[c,n]),a=Array.isArray(a)?a:[a];var m,p;return n&&a.every((function(e){return!0===e||("past"===e?U(n):"future"===e?!U(n):"past"===(null===e||void 0===e?void 0:e.when)?U(e.timestamp):"future"===(null===e||void 0===e?void 0:e.when)?!U(e.timestamp):void 0)}))?(m=Math.abs(n-c)<D?"at "+C(n,t):"on "+$(n,t),(0,Z.jsx)("p",{children:(p="".concat(r?"".concat(Array.isArray(r)?U(n)?r[1]:r[0]:r," "):"").concat(h?"".concat(h,", "):"").concat(m),p.split(". ").map(Be).join(". "))})):null};Le.defaultProps={hasTime:!0,conditions:[!0]};var He=t(6031).ZP.p.withConfig({displayName:"TimerCardDescriptionStyle__StyledDescription",componentId:"sc-an8yzt-0"})(["margin-top:",";"],(function(e){return e.theme.lengths.gap})),Re=function(e){return e===j?"Hourly":e===D?"Daily":e===S?"Weekly":e===k?"Monrthly":e===b?"Yearly":null},Ve=function(e){var n=e.start,t=e.end,r=e.period,i=e.description;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(Le,{prefix:n&&t&&["Starts","Started"],timestamp:n}),(0,Z.jsx)(Le,{prefix:n&&t&&["Ends","Ended"],timestamp:t}),Re(r)&&(0,Z.jsxs)("p",{children:["Period: ",Re(r)]}),i&&(0,Z.jsx)(He,{children:i})]})},Ie=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=0;return(e-t+n)/x},We=["description","start","end","period","hasTime"],Ye=function(e,n,t){for(var r=O(t,P(e));t&&n&&r>=n;)r-=t;return r},Ee=(0,T.forwardRef)((function(e,n){var t=e.description,a=e.start,s=e.end,o=e.period,c=(e.hasTime,(0,pe.Z)(e,We)),l=(0,T.useState)(O(o,P(s))),u=(0,i.Z)(l,2),d=u[0],h=u[1],f=(0,T.useState)(Ye(a,d,o)),m=(0,i.Z)(f,2),p=m[0],v=m[1];return(0,T.useEffect)((function(){var e=setTimeout((function(){h(O(o,P(d))),v(Ye(p,d,o))}),Math.min(p,d)-Date.now);return function(){return clearTimeout(e)}}),[p,d,o]),U(d)||!d&&U(p+D)||!o&&(U(d)||!d&&U(p+D))?null:(0,Z.jsxs)(N.Z,(0,r.Z)((0,r.Z)({ref:n,modalContent:(0,Z.jsx)(Ve,{start:p,end:d,period:o,description:t}),style:{order:Ie(p,o?0:-10*b)},highlight:U(p)},c),{},{children:[(0,Z.jsx)(Le,{prefix:p&&d&&"Starts",timestamp:p,conditions:"future"}),(0,Z.jsx)(Le,{prefix:p&&d&&"Ends",timestamp:d,conditions:["future",{timestamp:p,when:"past"}]})]}))}));Ee.defaultProps={hasTime:!0};var Qe=Ee;function Fe(){var e,n,t=(0,J.useQuery)("Settings"),r=null===t||void 0===t||null===(e=t.data)||void 0===e||null===(n=e.destiny2CoreSettings)||void 0===n?void 0:n.currentSeasonHash,i=(0,J.useQuery)(["DestinySeasonDefinition",r],{enabled:!!r}),a=i.isLoading,s=i.error,o=i.data;return t.isLoading||a?null:t.error||s?(console.error(t.error),null):(0,Z.jsx)(Qe,{title:"Season ".concat(o.seasonNumber,": ").concat(o.displayProperties.name),description:o.displayProperties.description,start:o.startDate,end:o.endDate,icon:"".concat("https://bungie.net").concat(o.displayProperties.icon)})}var ze=[(0,Z.jsx)(ne,{id:"2721157927",name:"Tarnation"}),(0,Z.jsx)(ne,{id:"1399109800",name:"Fel Taradiddle"}),(0,Z.jsx)(ne,{id:"3865728990",name:"Father's Sins"}),(0,Z.jsx)(ne,{id:"927567426",name:"Come to Pass"})];function Ke(){return(0,Z.jsx)(L,{name:"Wellspring Weapon",items:ze,start:1648746e6,period:D,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyMilestoneDefinition_feb5aecca544ab023ecf3b74ac8f509b.png"})}var qe=function(){return[{title:"Daily Reset",start:u().end,period:D,icon:"https://cdn.jsdelivr.net/gh/game-icons/icons@c10320edc7ae3f28a29d172e0dd3f029411825d7/delapouite/clockwise-rotation.svg"},{title:"Weekly Reset",start:m().end,period:S,icon:"https://cdn.jsdelivr.net/gh/game-icons/icons@c10320edc7ae3f28a29d172e0dd3f029411825d7/delapouite/clockwise-rotation.svg",link:"https://kyber3000.com/reset"},{title:"Weekend Activities",start:v()?v().start:p().start,end:v()?v().end:p().end,period:S,icon:"https://cdn.jsdelivr.net/gh/game-icons/icons@c10320edc7ae3f28a29d172e0dd3f029411825d7/delapouite/clockwise-rotation.svg",description:(0,Z.jsxs)("ul",{children:[(0,Z.jsx)("li",{children:(0,Z.jsx)("a",{href:"https://kyber3000.com/Xur",target:"_blank",rel:"noreferrer",children:"Xur"})}),(0,Z.jsx)("li",{children:(0,Z.jsx)("a",{href:"https://kyber3000.com/Trials",target:"_blank",rel:"noreferrer",children:"Trials of Osiris"})})]})}]};function Ge(){return(Ge=(0,a.Z)(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return e.next=4,e.sent.json();case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Je=function(e){return Ge.apply(this,arguments)}("https://raw.githubusercontent.com/CostasAK/d2-timers/events/events.json"),Xe=[{name:"Destiny Server and Update Status",link:"https://help.bungie.net/hc/en-us/articles/360049199271-Destiny-Server-and-Update-Status"},{name:"Bungie Maintenance Notifications",link:"https://twitter.com/BungieHelp"},{name:"Patch Notes",link:"https://www.bungie.net/en/Explore/Category?category=Updates"}];function en(){var e=T.useState([]),n=(0,i.Z)(e,2),t=n[0],a=n[1];Je.then((function(e){return a(e)}));var s=T.useState(qe()),o=(0,i.Z)(s,2),c=o[0],l=o[1],u=T.useState(Date.now()),d=(0,i.Z)(u,2),h=d[0],f=d[1];return T.useEffect((function(){var e=setTimeout((function(){l(qe()),f((function(){return Date.now()}))}),j-h%j);return function(){return clearTimeout(e)}}),[h]),(0,Z.jsxs)("div",{className:"timers-wrapper",children:[(0,Z.jsxs)("div",{className:"timers",children:[(0,Z.jsx)(Ce,{}),(0,Z.jsx)(Ke,{}),(0,Z.jsx)(Oe,{}),(0,Z.jsx)(Ze,{}),(0,Z.jsx)(re,{}),(0,Z.jsx)(Fe,{}),t.map((function(e,n){return(0,Z.jsx)(Qe,(0,r.Z)({},e),n)})),c.map((function(e,n){return(0,Z.jsx)(Qe,(0,r.Z)({},e),n)}))]}),(0,Z.jsx)("div",{className:"links",children:Xe.map((function(e){return(0,Z.jsx)(ie.Z,{href:e.link,children:e.name},e.name)}))})]})}},7892:function(e){e.exports=function(){"use strict";var e=1e3,n=6e4,t=36e5,r="millisecond",i="second",a="minute",s="hour",o="day",c="week",l="month",u="quarter",d="year",h="date",f="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g=function(e,n,t){var r=String(e);return!r||r.length>=n?e:""+Array(n+1-r.length).join(t)+e},y={s:g,z:function(e){var n=-e.utcOffset(),t=Math.abs(n),r=Math.floor(t/60),i=t%60;return(n<=0?"+":"-")+g(r,2,"0")+":"+g(i,2,"0")},m:function e(n,t){if(n.date()<t.date())return-e(t,n);var r=12*(t.year()-n.year())+(t.month()-n.month()),i=n.clone().add(r,l),a=t-i<0,s=n.clone().add(r+(a?-1:1),l);return+(-(r+(t-i)/(a?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:d,w:c,d:o,D:h,h:s,m:a,s:i,ms:r,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},w="en",x={};x[w]=v;var j=function(e){return e instanceof b},D=function e(n,t,r){var i;if(!n)return w;if("string"==typeof n){var a=n.toLowerCase();x[a]&&(i=a),t&&(x[a]=t,i=a);var s=n.split("-");if(!i&&s.length>1)return e(s[0])}else{var o=n.name;x[o]=n,i=o}return!r&&i&&(w=i),i||!r&&w},S=function(e,n){if(j(e))return e.clone();var t="object"==typeof n?n:{};return t.date=e,t.args=arguments,new b(t)},k=y;k.l=D,k.i=j,k.w=function(e,n){return S(e,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var b=function(){function v(e){this.$L=D(e.locale,null,!0),this.parse(e)}var g=v.prototype;return g.parse=function(e){this.$d=function(e){var n=e.date,t=e.utc;if(null===n)return new Date(NaN);if(k.u(n))return new Date;if(n instanceof Date)return new Date(n);if("string"==typeof n&&!/Z$/i.test(n)){var r=n.match(m);if(r){var i=r[2]-1||0,a=(r[7]||"0").substring(0,3);return t?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(n)}(e),this.$x=e.x||{},this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return k},g.isValid=function(){return!(this.$d.toString()===f)},g.isSame=function(e,n){var t=S(e);return this.startOf(n)<=t&&t<=this.endOf(n)},g.isAfter=function(e,n){return S(e)<this.startOf(n)},g.isBefore=function(e,n){return this.endOf(n)<S(e)},g.$g=function(e,n,t){return k.u(e)?this[n]:this.set(t,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,n){var t=this,r=!!k.u(n)||n,u=k.p(e),f=function(e,n){var i=k.w(t.$u?Date.UTC(t.$y,n,e):new Date(t.$y,n,e),t);return r?i:i.endOf(o)},m=function(e,n){return k.w(t.toDate()[e].apply(t.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(n)),t)},p=this.$W,v=this.$M,g=this.$D,y="set"+(this.$u?"UTC":"");switch(u){case d:return r?f(1,0):f(31,11);case l:return r?f(1,v):f(0,v+1);case c:var w=this.$locale().weekStart||0,x=(p<w?p+7:p)-w;return f(r?g-x:g+(6-x),v);case o:case h:return m(y+"Hours",0);case s:return m(y+"Minutes",1);case a:return m(y+"Seconds",2);case i:return m(y+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,n){var t,c=k.p(e),u="set"+(this.$u?"UTC":""),f=(t={},t[o]=u+"Date",t[h]=u+"Date",t[l]=u+"Month",t[d]=u+"FullYear",t[s]=u+"Hours",t[a]=u+"Minutes",t[i]=u+"Seconds",t[r]=u+"Milliseconds",t)[c],m=c===o?this.$D+(n-this.$W):n;if(c===l||c===d){var p=this.clone().set(h,1);p.$d[f](m),p.init(),this.$d=p.set(h,Math.min(this.$D,p.daysInMonth())).$d}else f&&this.$d[f](m);return this.init(),this},g.set=function(e,n){return this.clone().$set(e,n)},g.get=function(e){return this[k.p(e)]()},g.add=function(r,u){var h,f=this;r=Number(r);var m=k.p(u),p=function(e){var n=S(f);return k.w(n.date(n.date()+Math.round(e*r)),f)};if(m===l)return this.set(l,this.$M+r);if(m===d)return this.set(d,this.$y+r);if(m===o)return p(1);if(m===c)return p(7);var v=(h={},h[a]=n,h[s]=t,h[i]=e,h)[m]||1,g=this.$d.getTime()+r*v;return k.w(g,this)},g.subtract=function(e,n){return this.add(-1*e,n)},g.format=function(e){var n=this,t=this.$locale();if(!this.isValid())return t.invalidDate||f;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=k.z(this),a=this.$H,s=this.$m,o=this.$M,c=t.weekdays,l=t.months,u=function(e,t,i,a){return e&&(e[t]||e(n,r))||i[t].substr(0,a)},d=function(e){return k.s(a%12||12,e,"0")},h=t.meridiem||function(e,n,t){var r=e<12?"AM":"PM";return t?r.toLowerCase():r},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:k.s(o+1,2,"0"),MMM:u(t.monthsShort,o,l,3),MMMM:u(l,o),D:this.$D,DD:k.s(this.$D,2,"0"),d:String(this.$W),dd:u(t.weekdaysMin,this.$W,c,2),ddd:u(t.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(a),HH:k.s(a,2,"0"),h:d(1),hh:d(2),a:h(a,s,!0),A:h(a,s,!1),m:String(s),mm:k.s(s,2,"0"),s:String(this.$s),ss:k.s(this.$s,2,"0"),SSS:k.s(this.$ms,3,"0"),Z:i};return r.replace(p,(function(e,n){return n||m[e]||i.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(r,h,f){var m,p=k.p(h),v=S(r),g=(v.utcOffset()-this.utcOffset())*n,y=this-v,w=k.m(this,v);return w=(m={},m[d]=w/12,m[l]=w,m[u]=w/3,m[c]=(y-g)/6048e5,m[o]=(y-g)/864e5,m[s]=y/t,m[a]=y/n,m[i]=y/e,m)[p]||y,f?w:k.a(w)},g.daysInMonth=function(){return this.endOf(l).$D},g.$locale=function(){return x[this.$L]},g.locale=function(e,n){if(!e)return this.$L;var t=this.clone(),r=D(e,n,!0);return r&&(t.$L=r),t},g.clone=function(){return k.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},v}(),_=b.prototype;return S.prototype=_,[["$ms",r],["$s",i],["$m",a],["$H",s],["$W",o],["$M",l],["$y",d],["$D",h]].forEach((function(e){_[e[1]]=function(n){return this.$g(n,e[0],e[1])}})),S.extend=function(e,n){return e.$i||(e(n,b,S),e.$i=!0),S},S.locale=D,S.isDayjs=j,S.unix=function(e){return S(1e3*e)},S.en=x[w],S.Ls=x,S.p={},S}()}}]);
//# sourceMappingURL=554.05bbd2e5.chunk.js.map