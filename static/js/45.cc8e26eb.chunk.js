"use strict";(self.webpackChunkd2_buddy=self.webpackChunkd2_buddy||[]).push([[45],{2866:function(e,n,r){r.d(n,{Z:function(){return x}});var t=r(2791),i=r(8301),o=r(1694),a=r.n(o),s=r(184),c=function(e){var n=e.children,r=e.title,o=e.titleRule,c=e.icon,l=(0,t.useMemo)((function(){return c?(0,t.isValidElement)(c)?(0,t.cloneElement)(c,{className:a()("icon",c.props.className)}):(0,s.jsx)(i.Z,{className:"icon",src:c}):null}),[c]);return(0,s.jsxs)(s.Fragment,{children:[l&&l,r&&(0,s.jsx)("h4",{className:a()("title",{"title-rule":o}),children:r}),n&&(0,s.jsx)("section",{className:"card-content",children:n})]})};c.defaultProps={titleRule:!1};var l=r(1413),d=r(5987),u=r(8722),m=["children","className","modalContent","customModal","title","icon"],p=(0,t.forwardRef)((function(e,n){var r=e.children,t=e.className,i=e.modalContent,o=e.customModal,a=e.title,c=e.icon,p=(0,d.Z)(e,m);return i?(0,s.jsx)(u.Z,{triggerContent:r,className:t,background:c,children:o?i:(0,s.jsxs)("article",(0,l.Z)((0,l.Z)({ref:n,className:"modal-text"},p),{},{children:[a&&(0,s.jsx)("h1",{className:"title",children:a}),(0,s.jsx)("section",{className:"modal-content",children:i})]}))}):r}));p.defaultProps={customModal:!1};var h=["children","className","hasModal","link"],f=(0,t.forwardRef)((function(e,n){var r=e.children,t=e.className,i=e.hasModal,o=e.link,c=(0,d.Z)(e,h),u=a()("card",{clickable:i||o},t);return i?(0,s.jsx)("article",(0,l.Z)((0,l.Z)({ref:n,className:u},c),{},{children:r})):o?o.startsWith("steam://")?(0,s.jsx)("a",(0,l.Z)((0,l.Z)({ref:n,className:u,href:o},c),{},{children:r})):(0,s.jsx)("a",(0,l.Z)((0,l.Z)({ref:n,className:u,href:o,target:"_blank",rel:"noreferrer"},c),{},{children:r})):(0,s.jsx)("article",(0,l.Z)((0,l.Z)({ref:n,className:u},c),{},{children:r}))})),v=r(2007),y=r.n(v),g=(0,t.forwardRef)((function(e,n){var r=e.title,t=e.titleRule,i=e.cardContent,o=e.modalContent,l=e.customModal,d=e.link,u=e.icon,m=e.className,h=e.floatIcon,v=e.order;return(0,s.jsx)(p,{className:m,modalContent:o,title:r,icon:u,customModal:l,children:(0,s.jsx)(f,{className:a()(m,{"floating-icon":h,"side-icon":!h&&u}),hasModal:!!o,link:d,style:{order:v},children:(0,s.jsx)(c,{icon:u,title:r,titleRule:void 0===t?!h:t,children:i})})})}));g.propTypes={title:y().string,titleRule:y().bool,cardContent:y().oneOfType([y().string,y().element]),modalContent:y().oneOfType([y().string,y().object]),link:y().string,icon:y().oneOfType([y().string,y().element]),className:y().string,floatIcon:y().bool,customModal:y().bool},g.defaultProps={floatIcon:!1,customModal:!1};var x=g},4996:function(e,n,r){r.d(n,{Z:function(){return c}});var t=r(8301),i=r(935),o=r(184),a={weapons:{"Combat Bow":{symbol:"\ue099",name:"Bow"},"Auto Rifle":{symbol:"\ue100",name:"Auto Rifle"},"Pulse Rifle":{symbol:"\ue101",name:"Pulse Rifle"},"Scout Rifle":{symbol:"\ue102",name:"Scout Rifle"},"Hand Cannon":{symbol:"\ue103",name:"Hand Cannon"},"Submachine Gun":{symbol:"\ue107",name:"Submachine Gun"},Sidearm:{symbol:"\ue109",name:"Sidearm"},Shotgun:{symbol:"\ue104",name:"Shotgun"},"Sniper Rifle":{symbol:"\ue105",name:"Sniper Rifle"},"Fusion Rifle":{symbol:"\ue106",name:"Fusion Rifle"},"Grenade Launcher":{symbol:"\ue155",name:"Grenade Launcher"},Glaive:{symbol:"\ue156",name:"Glaive"},"Rocket Launcher":{symbol:"\ue108",name:"Rocket Launcher"},"Heavy Grenade Launcher":{symbol:"\ue113",name:"Heavy Grenade Launcher"},"Linear Fusion Rifle":{symbol:"\ue152",name:"Linear Fusion Rifle"},Sword:{symbol:"\ue153",name:"Sword"},"Machine Gun":{symbol:"\ue154",name:"Machine Gun"},"Trace Rifle":{symbol:"\ue138",name:"Trace Rifle"}},elements:{Kinetic:{symbol:"",name:"Kinetic"},Void:{symbol:"\ue144",name:"Void"},Solar:{symbol:"\ue140",name:"Solar"},Arc:{symbol:"\ue143",name:"Arc"},Stasis:{symbol:"\ue139",name:"Stasis"}},activities:{LostSector:{symbol:"\ue145",name:"Lost Sector"},Destination:{symbol:(0,o.jsx)(t.Z,{src:"https://www.bungie.net/common/destiny2_content/icons/c60303e278aa5fc566a04e98c3d8024c.png",style:{aspectRatio:"1 / 1",maxWidth:"96px",maxHeight:"96px",height:"1.5em",lineHeight:"1"}}),name:"Destination"}},champions:{modifiers:{Overload:{symbol:(0,o.jsx)(t.Z,{src:"https://bungie.net/common/destiny2_content/icons/c4d9c4f1ec3167e272286bb155dc15f4.png",style:{aspectRatio:"1 / 1",maxWidth:"60px",maxHeight:"60px",height:"1.5em",lineHeight:"1"}}),name:"Overload Champions"},Unstoppable:{symbol:(0,o.jsx)(t.Z,{src:"https://bungie.net/common/destiny2_content/icons/0e40371c49f0beac97e5fd9dc2ea9348.png",style:{aspectRatio:"1 / 1",maxWidth:"60px",maxHeight:"60px",height:"1.5em",lineHeight:"1"}}),name:"Unstoppable Champions"},Barrier:{symbol:(0,o.jsx)(t.Z,{src:"https://bungie.net/common/destiny2_content/icons/2ac9bcf4a961c3b3e31da7b76a5a87f9.png",style:{aspectRatio:"1 / 1",maxWidth:"60px",maxHeight:"60px",height:"1.5em",lineHeight:"1"}}),name:"Barrier Champions"}}},controllers:{playstation:{Cross:{symbol:"\ue025",name:"Cross"}}}},s=[].concat(["Kinetic","Arc","Solar","Void","Stasis"]);var c=function(e){var n=e.icon,r=e.color,t=e.style,c=e.className,l=e.onClick,d=e.tooltip;try{var u=n.reduce((function(e,n){return e[n]}),a);return(0,o.jsx)(i.Z,{contents:d,children:(0,o.jsx)("span",{className:"destiny-icon "+n.join(" ")+" "+(s.includes(r)?null===r||void 0===r?void 0:r.toLowerCase():"")+" "+(c||""),style:t,onClick:l,children:u.symbol})})}catch(m){return console.warn("Unknown Destiny icon: ".concat(n,". ").concat(m)),null}}},8301:function(e,n,r){r.d(n,{Z:function(){return d}});var t=r(1413),i=r(5987),o=r(1694),a=r.n(o),s=r(2791),c=r(184),l=["className","src","alt"],d=(0,s.forwardRef)((function(e,n){var r=e.className,o=e.src,s=e.alt,d=(0,i.Z)(e,l);return(0,c.jsx)("img",(0,t.Z)({ref:n,className:a()(r),src:/^\/[\w\d]/.test(o)?"".concat("https://bungie.net").concat(o):o,alt:s||""},d))}));d.defaultProps={}},8722:function(e,n,r){r.d(n,{Z:function(){return p}});var t=r(1413),i=r(885),o=r(2791),a=r(4996),s=r(9136),c=r(7948),l=r.n(c),d=r(9078),u=r(935),m=r(184);function p(e){var n=e.triggerContent,r=e.className,c=e.tooltip,p=e.background,h=e.children,f=(0,o.useState)(!1),v=(0,i.Z)(f,2),y=v[0],g=v[1],x=(0,o.useState)(0),j=(0,i.Z)(x,2),b=j[0],w=j[1],k=(0,o.useMemo)((function(){return(0,o.isValidElement)(n)?(0,o.cloneElement)(n,{onClick:function(){return g(!0)}}):n}),[n]),N=(0,o.useCallback)((function(e,n){return(0,m.jsxs)(l(),{isOpen:e,onRequestClose:function(){return g(!1)},className:"modal "+(r||""),overlayClassName:"modal-overlay",closeTimeoutMS:250,appElement:document.getElementById("root"),style:n?{content:{width:n+2}}:{},children:[(0,m.jsx)(a.Z,{icon:["controllers","playstation","Cross"],className:"close",onClick:function(){return g(!1)},tooltip:"Close Pop-up"}),(0,m.jsx)("div",{className:"background",style:{backgroundImage:"url(".concat(p,")")}}),(0,m.jsx)(d.Z,{className:"modal-scroll",children:(0,m.jsx)(s.Z,{bounds:!0,onResize:function(e){w(e.bounds.width)},children:function(e){var n=e.measureRef;return(0,m.jsx)("div",{ref:n,className:"modal-inner",children:h})}})})]})}),[p,h,r]);return(0,m.jsxs)(m.Fragment,{children:[c?(0,m.jsx)(u.Z,(0,t.Z)((0,t.Z)({},c),{},{children:k})):k,N(y,b)]})}},935:function(e,n,r){r.d(n,{Z:function(){return l}});var t=r(1413),i=r(885),o=r(2791),a=r(5733),s=r(184);function c(e){var n=e.trigger,r=e.backgroundColor,c=e.children,l=(0,o.useState)(null),d=(0,i.Z)(l,2),u=d[0],m=d[1],p=(0,o.useState)(null),h=(0,i.Z)(p,2),f=h[0],v=h[1],y=(0,a.D)(n,u,{modifiers:[{name:"arrow",options:{element:f}},{name:"offset",options:{offset:[0,8]}}]}),g=y.styles,x=y.attributes;return(0,s.jsxs)("div",(0,t.Z)((0,t.Z)({className:"popper",ref:m,style:(0,t.Z)((0,t.Z)({},g.popper),{},{backgroundColor:r})},x.popper),{},{children:[c,(0,s.jsx)("div",{className:"popper-arrow",ref:v,style:g.arrow})]}))}function l(e){var n=e.contents,r=e.backgroundColor,t=e.children,a=(0,o.useState)(null),l=(0,i.Z)(a,2),d=l[0],u=l[1],m=(0,o.useState)(!1),p=(0,i.Z)(m,2),h=p[0],f=p[1],v=(0,o.useMemo)((function(){return n?(0,o.isValidElement)(t)?(0,o.cloneElement)(t,{ref:u,onMouseOver:function(){return f(!0)},onMouseOut:function(){return f(!1)},className:t.props.className+" popper-content"}):(0,s.jsx)("div",{ref:u,className:"popper-content",children:t}):t}),[t,n]);return(0,s.jsxs)(s.Fragment,{children:[v,h&&(0,s.jsx)(c,{trigger:d,backgroundColor:r,children:n})]})}},3045:function(e,n,r){r.r(n),r.d(n,{default:function(){return Te}});var t=r(2982),i=r(885),o=r(5861),a=r(7757),s=r.n(a),c=r(7184),l=r(7892),d=r.n(l);function u(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!n)return m(e,!1);var r=new Intl.DateTimeFormat(void 0,{hour:"numeric"}).formatToParts(new Date(e));return void 0!==r.dayPeriod?d()(e).format("h:mm A"):d()(e).format("H:mm")}function m(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return d()(e).format("ddd, D MMM YYYY")+(n?" "+u(e):"")}var p=r(2791),h=r(2866),f=6e4,v=36e5,y=24*v,g=30*y,x=365*y;function j(e){if(Math.abs(e)<750)return"now";var n=function(e){var n=Math.abs(e);if(n<6e4)return"less than 1 minute";if(n<9e4)return"1 minute";if(n<=345e4)return"".concat(Math.round(n/f)," minutes");if(n<22*v)return"".concat(n%v/v<.875?Math.floor(n/v):Math.ceil(n/v)).concat(n%v/v<.125||n%v/v>=.875?"":n%v/v<.375?"\xbc":n%v/v<.625?"\xbd":"\xbe"," hour").concat(n<675e4?"":"s");if(n<1.5*y)return"1 day";if(n<26*y)return"".concat(Math.round(n/y)," days");if(n<46*y)return"1 month";if(n<11*g)return"".concat(Math.round(n/g)," months");if(n<18*g)return"1 year";return"".concat(Math.round(n/x)," years")}(e);return e<0?"".concat(n," ago"):"in ".concat(n)}function b(e){return e&&e<=Date.now()}function w(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now()+1e3;if(!e||!n)return n;var t=(n-=n%1e3)%e,i=(r+=1e3-r%1e3)%e||0;return i<t?r-i+t:r-i+t+e}function k(e){return!!e&&new Date(e).getTime()}var N=r(184),S=864e5;function Z(e){var n=e.name,r=e.items,t=e.start,o=e.period,a=e.icon,s=(0,p.useState)(Date.now()),c=(0,i.Z)(s,2),l=c[0],d=c[1],f=(0,p.useState)(w(o,k(t))),v=(0,i.Z)(f,2),y=v[0],g=v[1];function x(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!n&&b(e-S)?u(e):m(e)}(0,p.useEffect)((function(){var e=setTimeout((function(){d((function(){return Date.now()})),g((function(){return w(o,k(t))}))}),1e3);return function(){clearTimeout(e)}}),[t,o,y,l]);var Z=(y-157788e6)/6e4,_=Math.floor((l-t)/o)%r.length,C=(0,N.jsxs)(N.Fragment,{children:[r[_],"Cycles "+function(e){var n=j(e-l);return b(e-S)?n+", at "+x(e):n+", on "+x(e)}(y)]}),D=(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("section",{children:C}),(0,N.jsxs)("section",{className:"upcoming-items",children:[(0,N.jsx)("h3",{children:"Upcoming"}),r.map((function(e,n){var t=(n-_+r.length-1)%r.length;return(0,N.jsxs)("section",{style:{order:t},children:[e,x(y+t*o,!0)]},n)}))]})]});return(0,N.jsx)(h.Z,{className:"cycle-card",title:n,order:Z,cardContent:C,modalContent:D,icon:a})}Z.defaultProps={period:S};var _=r(4996),C=r(8301),D=r(4036),A=r(8722);function M(e){var n=(null===e||void 0===e?void 0:e.screenshot)||(null===e||void 0===e?void 0:e.pgcrImage);return n?"https://bungie.net"+n:null}var P=r(6107),L=function(e,n){return Object.keys(e).find((function(r){return e[r]===n}))};var R=function(e){var n;return null===(n=L(P.BN,null===e||void 0===e?void 0:e.defaultDamageType))||void 0===n?void 0:n.replace(/thermal/i,"Solar")};var B=function(e){var n,r=null===e||void 0===e?void 0:e.itemTypeDisplayName;return"Grenade Launcher"===r&&P.JS.Heavy===(null===e||void 0===e||null===(n=e.equippingBlock)||void 0===n?void 0:n.ammoType)&&(r="Heavy "+r),r},O={Legendary:"#4e3263",Exotic:"#cdad34"};var T=function(e){return O[e]||"#04040e"},U=r(1933),V=[{name:"DestinyTracker",url:"https://destinytracker.com/destiny-2/db/items/",icon:"https://cod.tracker.gg/public/icons/icon192.png"},{name:"Gunsmith",url:"https://d2gunsmith.com/w/",icon:"https://d2gunsmith.com/favicon.ico"},{name:"Light.gg",url:"https://www.light.gg/db/en/items/",icon:"https://www.light.gg/Content/Images/new-icon.png"}];function H(e){var n=e.id;return(0,N.jsx)("ul",{className:"weapon-links",children:V.map((function(e){return(0,N.jsx)("li",{children:(0,N.jsxs)("a",{className:"site-link",href:e.url+n,target:"_blank",rel:"noreferrer",children:[e.icon&&(0,N.jsx)(C.Z,{src:e.icon,className:"site-icon"}),e.name]})},e.name)}))})}function F(e){var n,r,t=e.id,i=e.name,o=(0,U.useQuery)(["DestinyInventoryItemDefinition",t]),a=o.data,s=o.error;if(o.isLoading)return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:"destiny-weapon",children:[(0,N.jsx)(D.Z,{size:"inline"})," ",i&&(0,N.jsx)("span",{children:i})]})});if(s)return console.error(s),null;i||(i=null===a||void 0===a||null===(n=a.displayProperties)||void 0===n?void 0:n.name);var c=B(a),l=R(a),d=null===a||void 0===a||null===(r=a.inventory)||void 0===r?void 0:r.tierTypeName,u=M(a);return(0,N.jsx)(A.Z,{triggerContent:(0,N.jsxs)("div",{className:"destiny-weapon a-link",children:[(0,N.jsx)(_.Z,{icon:["weapons",c],color:l})," ",(0,N.jsx)("span",{children:i})]}),tooltip:{contents:"".concat(d," ").concat(l," ").concat(c),backgroundColor:T(d)},children:(0,N.jsxs)("article",{className:"weapon-modal "+(null===d||void 0===d?void 0:d.toLowerCase()),children:[(0,N.jsx)("div",{className:"weapon-screenshot",style:{backgroundImage:"url(".concat(u,")")},children:(0,N.jsx)(H,{id:t})}),(0,N.jsxs)("div",{className:"weapon-header",children:[(0,N.jsx)(C.Z,{src:a.displayProperties.icon,className:"weapon-icon"}),(0,N.jsxs)("div",{className:"weapon-header-text",children:[(0,N.jsx)("h3",{children:i}),(0,N.jsxs)("p",{children:[d," |"," ",(0,N.jsx)(_.Z,{icon:["elements",l],color:l})," ",l," | ",(0,N.jsx)(_.Z,{icon:["weapons",c]})," ",c]})]})]})]})})}var E=[(0,N.jsx)(F,{id:"2782847179",name:"Blasphemer"}),(0,N.jsx)(F,{id:"2164448701",name:"Apostate"}),(0,N.jsx)(F,{id:"3067821200",name:"Heretic"})];function I(){return(0,N.jsx)(Z,{name:"Altars of Sorrow Weapon",items:E,start:16488324e5,period:864e5,icon:"https://www.bungie.net/common/destiny2_content/icons/58bf5b93ae8cfefc55852fe664179757.png"})}var W=r(8914),G=r(1694),Q=r.n(G);function K(e){var n=e.id,r=e.dataArray,t=e.name,i=n?[].concat(n):[],o=(0,U.useQueries)(i.map((function(e){return{queryKey:["DestinyActivityDefinition",e]}})),{enabled:!!n});if(n){if(!o.every((function(e){return e.isSuccess})))return o.some((function(e){return e.isLoading}))?(0,N.jsx)(N.Fragment,{children:(0,N.jsx)("article",{className:"activity",children:(0,N.jsx)(D.Z,{size:"page",fadeIn:"none"})})}):(o.filter((function(e){return e.error})).map((function(e){return console.error(e.error)})),null);o=o.filter((function(e){return e.isSuccess})).map((function(e){return e.data}))}else o=r.map((function(e){return e.data}));return o.sort((function(e,n){return(null===e||void 0===e?void 0:e.activityLightLevel)-(null===n||void 0===n?void 0:n.activityLightLevel)})),(0,N.jsxs)("article",{className:Q()("activity","success"),children:[(0,N.jsx)(ie,{data:o[0],name:t}),o.map((function(e,n){return(0,N.jsxs)(p.Fragment,{children:[(0,N.jsx)(ne,{data:e}),(0,N.jsx)(ce,{data:e})]},n)}))]})}K.defaultProps={};var q=r(935),z=[{class:"Overload",pattern:/Disruption|Overload/i},{class:"Unstoppable",pattern:/Stagger|Unstoppable/i},{class:"Barrier",pattern:/Shield-Piercing|Barrier/i}];function Y(e){var n=e.champions,r=e.known_champions;if(!n||n.length<1)return null;var i=new Set;return n.map((function(e){return z.map((function(n){var r;return n.pattern.test(null===e||void 0===e||null===(r=e.displayProperties)||void 0===r?void 0:r.description)&&i.add(n.class)}))})),(0,N.jsxs)("section",{className:"activity-champions",children:[(0,N.jsx)("h5",{className:"heading",children:"Champions"}),(0,N.jsx)("div",{className:"champions",children:(0,t.Z)(i).map((function(e,n){return(0,N.jsx)(q.Z,{contents:"".concat(e," Champions"),children:(0,N.jsxs)("div",{className:"champion "+e,children:[(0,N.jsx)(_.Z,{icon:["champions","modifiers",e],style:{filter:"brightness(".concat(r[e]&&"75%",")")}}),r[e]>0&&(0,N.jsx)("span",{className:"champion-amount",children:r[e]})]},n)},n)}))})]})}function X(e){var n,r=e.id,t=(0,U.useQuery)(["DestinyDestinationDefinition",r]),i=t.data,o=t.error;return t.isLoading?(0,N.jsxs)("div",{className:"destination",children:[(0,N.jsx)(_.Z,{icon:["activities","Destination"]}),(0,N.jsx)(D.Z,{size:"inline"})]}):o?(console.error(o),null):(0,N.jsxs)("p",{className:"destination",children:[(0,N.jsx)(_.Z,{icon:["activities","Destination"]}),null===i||void 0===i||null===(n=i.displayProperties)||void 0===n?void 0:n.name]})}Y.defaultProps={champions:[],known_champions:{}};var $=r(1413),J=r(5987),ee=["className","data"],ne=(0,p.forwardRef)((function(e,n){var r,t=e.className,i=e.data,o=(0,J.Z)(e,ee),a=null===i||void 0===i||null===(r=i.selectionScreenDisplayProperties)||void 0===r?void 0:r.name;return(0,N.jsx)("h2",(0,$.Z)((0,$.Z)({ref:n,className:Q()("activity-difficulty",null===a||void 0===a?void 0:a.toLowerCase(),t)},o),{},{children:a}))}));ne.defaultProps={};var re={LostSector:"Lost Sector"};var te=function(e){var n=L(P.EI,null===e||void 0===e?void 0:e.directActivityModeType);return re[n]||n};function ie(e){var n=e.data,r=e.name;r||(r=n.displayProperties.name);var t=te(n);"Nightfall"===n.originalDisplayProperties.name&&(r=n.originalDisplayProperties.description,t="Nightfall");var i=M(n);return(0,N.jsxs)("section",{className:"activity-header",style:{backgroundImage:"url(".concat(i,")")},children:[(0,N.jsx)("h5",{className:"activity-type",children:t}),(0,N.jsx)("h1",{className:"activity-name",children:r}),(0,N.jsx)(X,{id:n.destinationHash})]})}function oe(e){var n,r,t,i,o=e.data,a=null===o||void 0===o||null===(n=o.displayProperties)||void 0===n?void 0:n.name,s=null===o||void 0===o||null===(r=o.displayProperties)||void 0===r?void 0:r.icon,c=null!==o&&void 0!==o&&null!==(t=o.displayProperties)&&void 0!==t&&t.description?(0,N.jsx)("p",{children:null===o||void 0===o||null===(i=o.displayProperties)||void 0===i?void 0:i.description.replace(/(?:[\s.,]*\n+[\s.,]*)+/g,"; ").replace(/(\[Disruption|Stagger\])/g,"|$1|").split("|")}):null;if(!s||!a)return null;var l=[{class:"arc",pattern:/arc/i},{class:"solar",pattern:/solar/i},{class:"void",pattern:/void/i},{class:"stasis",pattern:/stasis/i}];return(0,N.jsxs)("section",{className:"activity-modifier",children:[(0,N.jsx)(q.Z,{contents:a,children:(0,N.jsx)(C.Z,{className:Q()("icon",l.filter((function(e){return e.pattern.test(a)})).map((function(e){return e.class}))),src:s})}),(0,N.jsxs)("div",{className:"description",children:[(0,N.jsx)("h6",{className:Q()("heading",l.filter((function(e){return e.pattern.test(a)})).map((function(e){return e.class}))),children:a}),c]})]})}ie.defaultProps={},oe.defaultProps={};var ae={0:{known_shields:{Void:0,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:0,Unstoppable:0}},480864726:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:3,Overload:0,Unstoppable:1}},480864721:{known_shields:{Void:0,Solar:0,Arc:1},known_champions:{Barrier:5,Overload:0,Unstoppable:2}},145221019:{known_shields:{Void:5,Solar:0,Arc:7},known_champions:{Barrier:0,Overload:1,Unstoppable:2}},145221020:{known_shields:{Void:5,Solar:0,Arc:4},known_champions:{Barrier:0,Overload:4,Unstoppable:2}},3094493720:{known_shields:{Void:0,Solar:2,Arc:4},known_champions:{Barrier:3,Overload:0,Unstoppable:1}},3094493727:{known_shields:{Void:0,Solar:2,Arc:2},known_champions:{Barrier:3,Overload:0,Unstoppable:4}},2936791996:{known_shields:{Void:4,Solar:0,Arc:0},known_champions:{Barrier:2,Overload:2,Unstoppable:0}},2936791995:{known_shields:{Void:3,Solar:0,Arc:0},known_champions:{Barrier:5,Overload:4,Unstoppable:0}},1898610132:{known_shields:{Void:9,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:2,Unstoppable:2}},1898610131:{known_shields:{Void:10,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:4,Unstoppable:3}},660710127:{known_shields:{Void:1,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:2,Unstoppable:3}},660710120:{known_shields:{Void:1,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:3,Unstoppable:4}},4206916275:{known_shields:{Void:17,Solar:2,Arc:0},known_champions:{Barrier:0,Overload:1,Unstoppable:3}},4206916276:{known_shields:{Void:29,Solar:2,Arc:1},known_champions:{Barrier:0,Overload:3,Unstoppable:5}},3911969233:{known_shields:{Void:0,Solar:0,Arc:4},known_champions:{Barrier:4,Overload:0,Unstoppable:3}},3911969238:{known_shields:{Void:0,Solar:0,Arc:1},known_champions:{Barrier:7,Overload:0,Unstoppable:3}},184186581:{known_shields:{Void:0,Solar:10,Arc:0},known_champions:{Barrier:3,Overload:2,Unstoppable:0}},184186578:{known_shields:{Void:0,Solar:10,Arc:0},known_champions:{Barrier:4,Overload:6,Unstoppable:0}},567131512:{known_shields:{Void:0,Solar:8,Arc:3},known_champions:{Barrier:3,Overload:2,Unstoppable:0}},567131519:{known_shields:{Void:0,Solar:8,Arc:3},known_champions:{Barrier:4,Overload:6,Unstoppable:0}},3678847129:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:0,Overload:3,Unstoppable:2}},3678847134:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:0,Overload:3,Unstoppable:4}}};var se=function(e){return ae[e]||{known_shields:void 0,known_champions:void 0}};function ce(e){var n=e.data,r=(0,U.useQueries)(n.modifiers.map((function(e){return{queryKey:["DestinyActivityModifierDefinition",e.activityModifierHash]}})));if(!r.every((function(e){return e.isSuccess})))return r.some((function(e){return e.isLoading}))?(0,N.jsx)("section",{className:"activity-modifiers",children:(0,N.jsx)(D.Z,{size:"section"})}):(r.filter((function(e){return e.error})).map((function(e){return console.error(e.error)})),null);var t=se(null===n||void 0===n?void 0:n.hash),i=t.known_shields,o=t.known_champions,a=r.filter((function(e){return e.isSuccess})).map((function(e){return e.data})),s=a.filter((function(e){return/shielded foes/i.test(e.displayProperties.name)})),c=a.filter((function(e){return/champion foes/i.test(e.displayProperties.name)})),l=a.filter((function(e){return!/(shielded|champion) foes|champions: mob| modifiers$/i.test(e.displayProperties.name)}));return(0,N.jsxs)("section",{className:"activity-modifiers",children:[s.length>0&&(0,N.jsx)(de,{shields:s,known_shields:i}),c.length>0&&(0,N.jsx)(Y,{champions:c,known_champions:o}),l.length>0&&(0,N.jsxs)("section",{className:"other-modifiers",children:[(0,N.jsx)("h5",{className:"heading",children:"Modifiers"}),(0,N.jsx)("div",{className:"modifiers",children:l.map((function(e,n){return(0,N.jsx)(oe,{data:e},n)}))})]})]})}ce.defaultProps={};var le=[{name:"Arc",pattern:/arc/i},{name:"Solar",pattern:/solar/i},{name:"Void",pattern:/void/i},{name:"Stasis",pattern:/stasis/i}];function de(e){var n=e.shields,r=e.known_shields;if(!n||n.length<1)return null;var i=new Set;return n.map((function(e){return le.map((function(n){var r;return n.pattern.test(null===e||void 0===e||null===(r=e.displayProperties)||void 0===r?void 0:r.description)&&i.add(n.name)}))})),(0,N.jsxs)("section",{className:"activity-shields",children:[(0,N.jsx)("h5",{className:"heading",children:"Shields"}),(0,N.jsx)("div",{className:"shields",children:(0,t.Z)(i).map((function(e,n){return(0,N.jsx)(q.Z,{contents:"".concat(e," Shields"),children:(0,N.jsxs)("div",{className:"shield",children:[(0,N.jsx)(_.Z,{icon:["elements",e],color:e}),r[e]>0&&(0,N.jsx)("span",{className:"shield-amount",children:r[e]})]},n)},n)}))})]})}de.defaultProps={shields:[],known_shields:{}};var ue=K;function me(){var e,n,r=(0,U.useQuery)("Milestones"),t=(null===r||void 0===r||null===(e=r.data)||void 0===e||null===(n=e[1942283261])||void 0===n?void 0:n.activities)||[],i=(0,U.useQueries)(t.map((function(e){return{queryKey:["DestinyActivityDefinition",e.activityHash]}})),{enabled:!!t});return r.isSuccess&&i.every((function(e){return e.isSuccess}))?(0,N.jsx)(h.Z,{title:"Nightfall",cardContent:i[0].data.displayProperties.description,icon:"https://www.bungie.net/common/destiny2_content/icons/48dda413d9f412ca2b10fd56a35a2665.png",customModal:!0,modalContent:(0,N.jsx)(ue,{dataArray:i})}):null}var pe=r(8014),he="DestinyActivityDefinition";function fe(e){var n,r=e.name,t=(0,U.useQuery)(["Search",he,r]),i=t.data,o=t.error,a=t.isLoading,s=(null===i||void 0===i||null===(n=i.results)||void 0===n?void 0:n.results)||[],c=(0,U.useQueries)(s.map((function(e){return{queryKey:[he,e.hash]}})),{enabled:!!s});if(a||c.some((function(e){return e.isLoading})))return(0,N.jsx)("article",{className:"lost-sector",children:(0,N.jsx)(D.Z,{size:"page",fadeIn:"none"})});if(o||c.some((function(e){return e.error})))return o&&console.error(o),c.map((function(e){return e.error&&console.error(e.error)})),(0,N.jsx)("article",{className:"lost-sector",children:(0,N.jsx)("h2",{className:"error",children:"Can't find Lost Sector info..."})});var l=c.filter((function(e){return"Lost Sector"===te(e.data)}));return(0,N.jsx)(ue,{dataArray:l})}function ve(e,n){return n?ve(n,e%n):e}function ye(e,n){return e*n/ve(e,n)}function ge(e){var n=e.location;return(0,N.jsx)(A.Z,{triggerContent:(0,N.jsxs)("span",{className:"a-link",children:[n.name," - ",n.location]}),background:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_7d11acd7d5a3daebc0a0c906452932d6.png",children:(0,N.jsx)(fe,{name:n.name})})}function xe(){var e=(0,p.useMemo)((function(){var e=[{name:"K1 Crew Quarters",location:"Moon"},{name:"K1 Logistics",location:"Moon"},{name:"Metamorphosis",location:"Throne World"},{name:"Sepulcher",location:"Throne World"},{name:"Extraction",location:"Throne World"},{name:"Veles Labyrinth",location:"Cosmodrome"},{name:"Exodus Garden A2",location:"Cosmodrome"},{name:"Aphelion's Rest",location:"Dreaming City"},{name:"Bay of Drowned Wishes",location:"Dreaming City"},{name:"Chamber of Starlight",location:"Dreaming City"},{name:"K1 Revelation",location:"Moon"}],n=["Arms","Chest","Helmet","Legs"],r=[];do{r.push((0,N.jsxs)("div",{children:[(0,N.jsx)(ge,{location:e[r.length%e.length]})," (",n[r.length%n.length],")"]}))}while(r.length<ye(n.length,e.length));return r}),[]);return(0,N.jsx)(Z,{name:"Legend & Master Lost Sector",items:e,start:16489188e5,period:864e5,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_7d11acd7d5a3daebc0a0c906452932d6.png"})}var je=["EDZ","Cosmodrome","Moon"].map((function(e){return(0,N.jsx)("div",{children:e})}));function be(){return(0,N.jsx)(Z,{name:"PsiOps Battleground: Legend",items:je,start:16521156e5,period:864e5,icon:"https://www.bungie.net/common/destiny2_content/icons/b5ca23093632aa939e8209a2ee558106.png"})}function we(e){return e.charAt(0).toUpperCase()+e.slice(1)}var ke=r(3540),Ne=6e4,Se=864e5;function Ze(e){var n=(0,p.useState)(w(e.period,k(e.end))),r=(0,i.Z)(n,2),t=r[0],o=r[1],a=(0,p.useState)((function(){for(var n=w(e.period,k(e.start));e.period&&t&&n>t;)n-=e.period;return n})),s=(0,i.Z)(a,2),c=s[0],l=s[1],d=(0,p.useState)(Date.now()),f=(0,i.Z)(d,2),v=f[0],y=f[1];(0,p.useEffect)((function(){var n=setTimeout((function(){o(w(e.period,k(t))),y((function(){return Date.now()})),l((function(){for(var n=w(e.period,k(c));e.period&&t&&n>=t;)n-=e.period;return n}))}),1e3);return function(){return clearTimeout(n)}}),[v,c,t,e.period]);var g=!!e.period,x=!1;b(c)&&(x=!0);var S=!1;if((b(t)||!t&&b(c+Se)||!g&&(b(t)||!t&&b(c+Se)))&&(S=!0),S)return null;var Z=c;x&&t&&(Z=t);var _,C=j(Z-v);_=x&&!t?"On "+m(Z,e.hasTime):b(Z-Se)?"at "+u(Z,e.hasTime):"on "+m(Z,e.hasTime);var D=Z/Ne;g||(D-=5259600);var A,M="string"===typeof e.description||e.description instanceof String?(0,ke.ZP)(e.description):e.description;return(0,N.jsx)(h.Z,{className:"timer-card "+(x?"highlight":""),icon:e.icon,title:e.name,cardContent:(A=(g||!x||t?C+", ":"")+_,A.split(". ").map(we).join(". ")),modalContent:M||void 0,order:D,link:e.link})}Ze.defaultProps={end:!1,period:!1,hasTime:!0,description:!1};function _e(){var e,n,r=(0,U.useQuery)("Settings"),t=null===r||void 0===r||null===(e=r.data)||void 0===e||null===(n=e.destiny2CoreSettings)||void 0===n?void 0:n.currentSeasonHash,i=(0,U.useQuery)(["DestinySeasonDefinition",t],{enabled:!!t}),o=i.isLoading,a=i.error,s=i.data;return r.isLoading||o?null:r.error||a?(console.error(r.error),null):(0,N.jsx)(Ze,{name:"Season ".concat(s.seasonNumber,": ").concat(s.displayProperties.name),description:s.displayProperties.description,start:s.startDate,end:s.endDate,icon:"".concat("https://bungie.net").concat(s.displayProperties.icon)})}var Ce=[(0,N.jsx)(F,{id:"2721157927",name:"Tarnation"}),(0,N.jsx)(F,{id:"1399109800",name:"Fel Taradiddle"}),(0,N.jsx)(F,{id:"3865728990",name:"Father's Sins"}),(0,N.jsx)(F,{id:"927567426",name:"Come to Pass"})];function De(){return(0,N.jsx)(Z,{name:"Wellspring Weapon",items:Ce,start:1648746e6,period:864e5,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyMilestoneDefinition_feb5aecca544ab023ecf3b74ac8f509b.png"})}var Ae=36e5,Me=864e5,Pe=6048e5,Le=function(){return[{name:"Daily Reset",start:(0,c.PR)().end,period:Me,icon:(0,N.jsx)(pe.jFC,{})},{name:"Weekly Reset",start:(0,c.nQ)().end,period:Pe,icon:(0,N.jsx)(pe.jFC,{}),link:"https://kyber3000.com/reset"},{name:"Weekend Activities",start:(0,c.yb)()?(0,c.yb)().start:(0,c.l2)().start,end:(0,c.yb)()?(0,c.yb)().end:(0,c.l2)().end,period:Pe,icon:(0,N.jsx)(pe.jFC,{}),description:(0,N.jsxs)("ul",{children:[(0,N.jsx)("li",{children:(0,N.jsx)("a",{href:"https://kyber3000.com/Xur",target:"_blank",rel:"noreferrer",children:"Xur"})}),(0,N.jsx)("li",{children:(0,N.jsx)("a",{href:"https://kyber3000.com/Trials",target:"_blank",rel:"noreferrer",children:"Trials of Osiris"})})]})},{name:"Season ".concat((0,c.ye)().seasonNumber),start:(0,c.ye)().start,end:(0,c.ye)().end}]};function Re(){return(Re=(0,o.Z)(s().mark((function e(n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return e.next=4,e.sent.json();case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Be=function(e){return Re.apply(this,arguments)}("https://raw.githubusercontent.com/CostasAK/d2-timers/events/events.json"),Oe=[{name:"Destiny Server and Update Status",link:"https://help.bungie.net/hc/en-us/articles/360049199271-Destiny-Server-and-Update-Status"},{name:"Bungie Maintenance Notifications",link:"https://twitter.com/BungieHelp"},{name:"Patch Notes",link:"https://www.bungie.net/en/Explore/Category?category=Updates"}];function Te(){var e=p.useState([]),n=(0,i.Z)(e,2),r=n[0],o=n[1];Be.then((function(e){return o(e)}));var a=p.useState(Le()),s=(0,i.Z)(a,2),c=s[0],l=s[1],d=p.useState(Date.now()),u=(0,i.Z)(d,2),m=u[0],h=u[1];p.useEffect((function(){var e=setTimeout((function(){l(Le()),h((function(){return Date.now()}))}),Ae-m%Ae);return function(){return clearTimeout(e)}}),[m]);var f=[].concat((0,t.Z)(r),(0,t.Z)(c));return(0,N.jsxs)("div",{className:"timers-wrapper",children:[(0,N.jsxs)("div",{className:"timers",children:[(0,N.jsx)(me,{}),(0,N.jsx)(De,{}),(0,N.jsx)(xe,{}),(0,N.jsx)(be,{}),(0,N.jsx)(I,{}),(0,N.jsx)(_e,{}),f.map((function(e){return(0,N.jsx)(Ze,{name:e.name,description:e.description,start:e.start,end:e.end,period:e.period,hasTime:e.hasTime,icon:e.icon,link:e.link},e.name)}))]}),(0,N.jsx)("div",{className:"links",children:Oe.map((function(e){return(0,N.jsx)(W.Z,{href:e.link,children:e.name},e.name)}))})]})}}}]);
//# sourceMappingURL=45.cc8e26eb.chunk.js.map