(self.webpackChunkd2_buddy=self.webpackChunkd2_buddy||[]).push([[421],{3871:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Ge}});var r,i=t(1413),s=t(885),a=t(5861),o=t(7757),c=t.n(o),l=t(7184),d=6e4,u=36e5,h=24*u,f=7*h,p=30*h,m=365.25*h,v=t(3364),y=t(2791),g=t(3961),w=t(168),x=t(6031),j=(0,x.iv)(r||(r=(0,w.Z)(["\n  display: flex;\n  flex-flow: column;\n  justify-content: flex-start;\n  align-items: safe center;\n  text-align: center;\n  margin: auto;\n"]))),S=x.ZP.section.withConfig({displayName:"CycleCardModalStyle__CurrentItem",componentId:"sc-8dv19i-0"})([""," margin-top:",";"],j,(function(e){return e.theme.lengths.pad})),k=x.ZP.section.withConfig({displayName:"CycleCardModalStyle__UpcomingItems",componentId:"sc-8dv19i-1"})([""," gap:",";& > h3{margin:auto;margin-top:",";order:-1;}"],j,(function(e){return e.theme.lengths.gap}),(function(e){return e.theme.lengths.gap})),b=t(5987),D=t(7892),_=t.n(D);function M(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!n)return $(e,!1);var t=new Intl.DateTimeFormat(void 0,{hour:"numeric"}).formatToParts(new Date(e));return void 0!==t.dayPeriod?_()(e).format("h:mm A"):_()(e).format("H:mm")}function $(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return _()(e).format("ddd, D MMM YYYY")+(n?" "+M(e):"")}function N(e){return e.charAt(0).toUpperCase()+e.slice(1)}function P(e){if(Math.abs(e)<750)return"now";var n=function(e){var n=Math.abs(e);if(n<6e4)return"less than 1 minute";if(n<9e4)return"1 minute";if(n<=345e4)return"".concat(Math.round(n/d)," minutes");if(n<22*u)return"".concat(n%u/u<.875?Math.floor(n/u):Math.ceil(n/u)).concat(n%u/u<.125||n%u/u>=.875?"":n%u/u<.375?"\xbc":n%u/u<.625?"\xbd":"\xbe"," hour").concat(n<675e4?"":"s");if(n<1.5*h)return"1 day";if(n<26*h)return"".concat(Math.round(n/h)," days");if(n<46*h)return"1 month";if(n<11*p)return"".concat(Math.round(n/p)," months");if(n<18*p)return"1 year";return"".concat(Math.round(n/m)," years")}(e);return e<0?"".concat(n," ago"):"in ".concat(n)}function A(e){return e&&e<=Date.now()}function C(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now()+1e3;if(!e||!n)return n;var r=(n-=n%1e3)%e,i=(t+=1e3-t%1e3)%e||0;return i<r?t-i+r:t-i+r+e}var Z=t(184),O=(0,y.forwardRef)((function(e,n){var t=e.timestamp,r=e.hasTime,i=e.prefix,a=e.conditions,o=e.className,c=(0,y.useState)(Date.now()),l=(0,s.Z)(c,2),d=l[0],u=l[1],f=(0,y.useState)(P(t-d)),p=(0,s.Z)(f,2),m=p[0],v=p[1];(0,y.useEffect)((function(){var e=setTimeout((function(){u((function(){return Date.now()})),v((function(){return P(t-d)}))}),C(3e4,0)-Date.now());return function(){return clearTimeout(e)}}),[d,t]),a=Array.isArray(a)?a:[a];var g,w;return t&&a.every((function(e){return!0===e||("past"===e?A(t):"future"===e?!A(t):"past"===(null===e||void 0===e?void 0:e.when)?A(e.timestamp):"future"===(null===e||void 0===e?void 0:e.when)?!A(e.timestamp):void 0)}))?(g=Math.abs(t-d)<h?"at "+M(t,r):"on "+$(t,r),(0,Z.jsx)("p",{ref:n,className:o,children:(w="".concat(i?"".concat(Array.isArray(i)?A(t)?i[1]:i[0]:i," "):"").concat(m?"".concat(m,", "):"").concat(g),w.split(". ").map(N).join(". "))})):null}));O.defaultProps={hasTime:!0,conditions:[!0]};var T=x.ZP.p.withConfig({displayName:"TimerCardDescriptionStyle__StyledDescription",componentId:"sc-an8yzt-0"})(["margin-top:",";"],(function(e){return e.theme.lengths.gap})),B=function(e){return e===u?"Hourly":e===h?"Daily":e===f?"Weekly":e===p?"Monrthly":e===m?"Yearly":null},L=function(e){var n=e.start,t=e.end,r=e.period,i=e.description;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(O,{prefix:n&&t&&["Starts","Started"],timestamp:n}),(0,Z.jsx)(O,{prefix:n&&t&&["Ends","Ended"],timestamp:t}),B(r)&&(0,Z.jsxs)("p",{children:["Period: ",B(r)]}),i&&(0,Z.jsx)(T,{children:i})]})},U=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=15046488e5;return(e-t+n)/d};function R(e){return!!e&&new Date(e).getTime()}var I=["description","start","end","period","hasTime"],V=function(e,n,t){for(var r=C(t,R(e));t&&n&&r>=n;)r-=t;return r},H=(0,y.forwardRef)((function(e,n){var t=e.description,r=e.start,a=e.end,o=e.period,c=(e.hasTime,(0,b.Z)(e,I)),l=(0,y.useState)(C(o,R(a))),d=(0,s.Z)(l,2),u=d[0],f=d[1],p=(0,y.useState)(V(r,u,o)),v=(0,s.Z)(p,2),w=v[0],x=v[1];return(0,y.useEffect)((function(){var e=setTimeout((function(){f(C(o,R(u))),x(V(w,u,o))}),Math.min(w,u)-Date.now);return function(){return clearTimeout(e)}}),[w,u,o]),A(u)||!u&&A(w+h)||!o&&(A(u)||!u&&A(w+h))?null:(0,Z.jsxs)(g.Z,(0,i.Z)((0,i.Z)({ref:n,modalContent:(0,Z.jsx)(L,{start:w,end:u,period:o,description:t}),style:{order:U(w,o?0:-10*m)},highlight:A(w)},c),{},{children:[(0,Z.jsx)(O,{prefix:w&&u&&"Starts",timestamp:w,conditions:"future"}),(0,Z.jsx)(O,{prefix:w&&u&&"Ends",timestamp:u,conditions:["future",{timestamp:w,when:"past"}]})]}))}));H.defaultProps={hasTime:!0};var E=H,W=function(e){var n=e.items,t=e.nextCycle,r=e.currentItem,i=e.period;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)("p",{children:["Period: ",B(i)]}),(0,Z.jsxs)(S,{children:[n[r],(0,Z.jsx)(O,{prefix:"Cycles",timestamp:t})]}),n.length>1&&(0,Z.jsxs)(k,{children:[(0,Z.jsx)("h3",{children:"Upcoming"}),n.map((function(e,s){var a=(s-r+n.length-1)%n.length;return(0,Z.jsxs)("section",{style:{order:a},children:[e,(0,Z.jsx)(O,{timestamp:t+a*i})]},s)}))]})]})},Y=(0,y.forwardRef)((function(e,n){var t=e.title,r=e.items,i=e.start,a=e.period,o=e.icon,c=(0,y.useState)(C(a,R(i))),l=(0,s.Z)(c,2),d=l[0],u=l[1],h=(0,y.useState)(Math.floor((Date.now()-i)/a)%r.length),f=(0,s.Z)(h,2),p=f[0],v=f[1];return(0,y.useEffect)((function(){var e=setTimeout((function(){u(C(a,R(i))),v(Math.floor((Date.now()-i)/a)%r.length)}),d-Date.now());return function(){clearTimeout(e)}}),[i,a,d,r.length]),(0,Z.jsxs)(g.Z,{ref:n,className:"cycle-card",title:t,style:{order:U(d,-5*m)},modalContent:(0,Z.jsx)(W,{items:r,nextCycle:d,currentItem:p,period:a}),icon:o,children:[r[p],(0,Z.jsx)(O,{prefix:"Cycles",timestamp:d})]})}));Y.defaultProps={period:h};var Q=Y,F=t(4996),K=t(9773),z=t(4036),q=t(8722);function G(e){var n=(null===e||void 0===e?void 0:e.screenshot)||(null===e||void 0===e?void 0:e.pgcrImage);return n?"https://bungie.net"+n:null}var J={None:0,Story:2,Strike:3,Raid:4,AllPvP:5,Patrol:6,AllPvE:7,Reserved9:9,Control:10,Reserved11:11,Clash:12,Reserved13:13,CrimsonDoubles:15,Nightfall:16,HeroicNightfall:17,AllStrikes:18,IronBanner:19,Reserved20:20,Reserved21:21,Reserved22:22,Reserved24:24,AllMayhem:25,Reserved26:26,Reserved27:27,Reserved28:28,Reserved29:29,Reserved30:30,Supremacy:31,PrivateMatchesAll:32,Survival:37,Countdown:38,TrialsOfTheNine:39,Social:40,TrialsCountdown:41,TrialsSurvival:42,IronBannerControl:43,IronBannerClash:44,IronBannerSupremacy:45,ScoredNightfall:46,ScoredHeroicNightfall:47,Rumble:48,AllDoubles:49,Doubles:50,PrivateMatchesClash:51,PrivateMatchesControl:52,PrivateMatchesSupremacy:53,PrivateMatchesCountdown:54,PrivateMatchesSurvival:55,PrivateMatchesMayhem:56,PrivateMatchesRumble:57,HeroicAdventure:58,Showdown:59,Lockdown:60,Scorched:61,ScorchedTeam:62,Gambit:63,AllPvECompetitive:64,Breakthrough:65,BlackArmoryRun:66,Salvage:67,IronBannerSalvage:68,PvPCompetitive:69,PvPQuickplay:70,ClashQuickplay:71,ClashCompetitive:72,ControlQuickplay:73,ControlCompetitive:74,GambitPrime:75,Reckoning:76,Menagerie:77,VexOffensive:78,NightmareHunt:79,Elimination:80,Momentum:81,Dungeon:82,Sundial:83,TrialsOfOsiris:84,Dares:85,Offensive:86,LostSector:87},X={None:0,Kinetic:1,Arc:2,Thermal:3,Void:4,Raid:5,Stasis:6},ee=3,ne=function(e,n){return Object.keys(e).find((function(t){return e[t]===n}))};var te=function(e){var n;return null===(n=ne(X,null===e||void 0===e?void 0:e.defaultDamageType))||void 0===n?void 0:n.replace(/thermal/i,"Solar")};var re=function(e){var n,t=null===e||void 0===e?void 0:e.itemTypeDisplayName;return"Grenade Launcher"===t&&ee===(null===e||void 0===e||null===(n=e.equippingBlock)||void 0===n?void 0:n.ammoType)&&(t="Heavy "+t),t},ie={Legendary:"#4e3263",Exotic:"#cdad34"};var se=function(e){return ie[e]||"#04040e"},ae=t(1933),oe=[{name:"DestinyTracker",url:"https://destinytracker.com/destiny-2/db/items/",icon:"https://cod.tracker.gg/public/icons/icon192.png"},{name:"Gunsmith",url:"https://d2gunsmith.com/w/",icon:"https://d2gunsmith.com/favicon.ico"},{name:"Light.gg",url:"https://www.light.gg/db/en/items/",icon:"https://www.light.gg/Content/Images/new-icon.png"}];function ce(e){var n=e.id;return(0,Z.jsx)("ul",{className:"weapon-links",children:oe.map((function(e){return(0,Z.jsx)("li",{children:(0,Z.jsxs)(v.Z,{className:"site-link",href:e.url+n,children:[e.icon&&(0,Z.jsx)(K.Z,{src:e.icon,className:"site-icon"}),e.name]})},e.name)}))})}function le(e){var n,t,r=e.id,i=e.name,s=(0,ae.useQuery)(["DestinyInventoryItemDefinition",r]),a=s.data,o=s.error;if(s.isLoading)return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)("div",{className:"destiny-weapon",children:[(0,Z.jsx)(z.Z,{size:"inline"})," ",i&&(0,Z.jsx)("span",{children:i})]})});if(o)return console.error(o),null;i||(i=null===a||void 0===a||null===(n=a.displayProperties)||void 0===n?void 0:n.name);var c=re(a),l=te(a),d=null===a||void 0===a||null===(t=a.inventory)||void 0===t?void 0:t.tierTypeName,u=G(a);return(0,Z.jsx)(q.Z,{triggerContent:(0,Z.jsxs)("div",{className:"destiny-weapon a-link",children:[(0,Z.jsx)(F.Z,{icon:["weapons",c],color:l})," ",(0,Z.jsx)("span",{children:i})]}),tooltip:{contents:"".concat(d," ").concat(l," ").concat(c),backgroundColor:se(d)},children:(0,Z.jsxs)("article",{className:"weapon-modal "+(null===d||void 0===d?void 0:d.toLowerCase()),children:[(0,Z.jsx)("div",{className:"weapon-screenshot",style:{backgroundImage:"url(".concat(u,")")},children:(0,Z.jsx)(ce,{id:r})}),(0,Z.jsxs)("div",{className:"weapon-header",children:[(0,Z.jsx)(K.Z,{src:a.displayProperties.icon,className:"weapon-icon"}),(0,Z.jsxs)("div",{className:"weapon-header-text",children:[(0,Z.jsx)("h3",{children:i}),(0,Z.jsxs)("p",{children:[d," |"," ",(0,Z.jsx)(F.Z,{icon:["elements",l],color:l})," ",l," | ",(0,Z.jsx)(F.Z,{icon:["weapons",c]})," ",c]})]})]})]})})}var de=[(0,Z.jsx)(le,{id:"2782847179",name:"Blasphemer"}),(0,Z.jsx)(le,{id:"2164448701",name:"Apostate"}),(0,Z.jsx)(le,{id:"3067821200",name:"Heretic"})];function ue(){return(0,Z.jsx)(Q,{title:"Altars of Sorrow Weapon",items:de,start:16488324e5,period:h,icon:"https://www.bungie.net/common/destiny2_content/icons/58bf5b93ae8cfefc55852fe664179757.png"})}var he=t(691),fe=t(1694),pe=t.n(fe),me=(0,y.forwardRef)((function(e,n){var t=e.id,r=e.dataArray,i=e.name,s=t?[].concat(t):[],a=(0,ae.useQueries)(s.map((function(e){return{queryKey:["DestinyActivityDefinition",e]}})),{enabled:!!t});if(t){if(!a.every((function(e){return e.isSuccess})))return a.some((function(e){return e.isLoading}))?(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)("article",{ref:n,className:"activity",children:(0,Z.jsx)(z.Z,{size:"page",fadeIn:"none"})})}):(a.filter((function(e){return e.error})).map((function(e){return console.error(e.error)})),null);a=a.filter((function(e){return e.isSuccess})).map((function(e){return e.data}))}else a=r.map((function(e){return e.data}));return a.sort((function(e,n){return(null===e||void 0===e?void 0:e.activityLightLevel)-(null===n||void 0===n?void 0:n.activityLightLevel)})),(0,Z.jsxs)("article",{ref:n,className:pe()("activity","success"),children:[(0,Z.jsx)(Me,{data:a[0],name:i}),a.map((function(e,n){return(0,Z.jsxs)(y.Fragment,{children:[(0,Z.jsx)(be,{data:e}),(0,Z.jsx)(Ae,{data:e})]},n)}))]})}));me.defaultProps={};var ve=t(907);var ye=t(181);function ge(e){return function(e){if(Array.isArray(e))return(0,ve.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,ye.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var we=t(935),xe=[{class:"Overload",pattern:/Disruption|Overload/i},{class:"Unstoppable",pattern:/Stagger|Unstoppable/i},{class:"Barrier",pattern:/Shield-Piercing|Barrier/i}],je=(0,y.forwardRef)((function(e,n){var t=e.champions,r=e.known_champions;if(!t||t.length<1)return null;var i=new Set;return t.map((function(e){return xe.map((function(n){var t;return n.pattern.test(null===e||void 0===e||null===(t=e.displayProperties)||void 0===t?void 0:t.description)&&i.add(n.class)}))})),(0,Z.jsxs)("section",{ref:n,className:"activity-champions",children:[(0,Z.jsx)("h5",{className:"heading",children:"Champions"}),(0,Z.jsx)("div",{className:"champions",children:ge(i).map((function(e,n){return(0,Z.jsx)(we.Z,{contents:"".concat(e," Champions"),children:(0,Z.jsxs)("div",{className:"champion "+e,children:[(0,Z.jsx)(F.Z,{icon:["champions","modifiers",e],style:{filter:"brightness(".concat(r[e]&&"75%",")")}}),r[e]>0&&(0,Z.jsx)("span",{className:"champion-amount",children:r[e]})]},n)},n)}))})]})}));je.defaultProps={champions:[],known_champions:{}};var Se=(0,y.forwardRef)((function(e,n){var t,r=e.id,i=(0,ae.useQuery)(["DestinyDestinationDefinition",r]),s=i.data,a=i.error;return i.isLoading?(0,Z.jsxs)("p",{ref:n,className:"destination",children:[(0,Z.jsx)(F.Z,{icon:["activities","Destination"]}),(0,Z.jsx)(z.Z,{size:"inline"})]}):a?(console.error(a),null):(0,Z.jsxs)("p",{ref:n,className:"destination",children:[(0,Z.jsx)(F.Z,{icon:["activities","Destination"]}),null===s||void 0===s||null===(t=s.displayProperties)||void 0===t?void 0:t.name]})}));Se.defaultProps={};var ke=["className","data"],be=(0,y.forwardRef)((function(e,n){var t,r=e.className,s=e.data,a=(0,b.Z)(e,ke),o=null===s||void 0===s||null===(t=s.selectionScreenDisplayProperties)||void 0===t?void 0:t.name;return(0,Z.jsx)("h2",(0,i.Z)((0,i.Z)({ref:n,className:pe()("activity-difficulty",null===o||void 0===o?void 0:o.toLowerCase(),r)},a),{},{children:o}))}));be.defaultProps={};var De={LostSector:"Lost Sector"};var _e=function(e){var n=ne(J,null===e||void 0===e?void 0:e.directActivityModeType);return De[n]||n},Me=(0,y.forwardRef)((function(e,n){var t=e.data,r=e.name;r||(r=t.originalDisplayProperties.name);var i=_e(t);"Nightfall"===t.originalDisplayProperties.name&&(r=t.originalDisplayProperties.description,i="Nightfall");var s=G(t);return(0,Z.jsxs)("section",{ref:n,className:"activity-header",style:{backgroundImage:"url(".concat(s,")")},children:[(0,Z.jsx)("h5",{className:"activity-type",children:i}),(0,Z.jsx)("h1",{className:"activity-name",children:r}),(0,Z.jsx)(Se,{id:t.destinationHash})]})}));Me.defaultProps={};var $e=(0,y.forwardRef)((function(e,n){var t,r,i,s,a=e.data,o=null===a||void 0===a||null===(t=a.displayProperties)||void 0===t?void 0:t.name,c=null===a||void 0===a||null===(r=a.displayProperties)||void 0===r?void 0:r.icon,l=null!==a&&void 0!==a&&null!==(i=a.displayProperties)&&void 0!==i&&i.description?(0,Z.jsx)("p",{children:null===a||void 0===a||null===(s=a.displayProperties)||void 0===s?void 0:s.description.replace(/(?:[\s.,]*\n+[\s.,]*)+/g,"; ").replace(/(\[Disruption|Stagger\])/g,"|$1|").split("|")}):null;if(!c||!o)return null;var d=[{class:"arc",pattern:/arc/i},{class:"solar",pattern:/solar/i},{class:"void",pattern:/void/i},{class:"stasis",pattern:/stasis/i}];return(0,Z.jsxs)("section",{ref:n,className:"activity-modifier",children:[(0,Z.jsx)(we.Z,{contents:o,children:(0,Z.jsx)(K.Z,{className:pe()("icon",d.filter((function(e){return e.pattern.test(o)})).map((function(e){return e.class}))),src:c})}),(0,Z.jsxs)("div",{className:"description",children:[(0,Z.jsx)("h6",{className:pe()("heading",d.filter((function(e){return e.pattern.test(o)})).map((function(e){return e.class}))),children:o}),l]})]})}));$e.defaultProps={};var Ne={0:{known_shields:{Void:0,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:0,Unstoppable:0}},480864726:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:3,Overload:0,Unstoppable:1}},480864721:{known_shields:{Void:0,Solar:0,Arc:1},known_champions:{Barrier:5,Overload:0,Unstoppable:2}},145221019:{known_shields:{Void:5,Solar:0,Arc:7},known_champions:{Barrier:0,Overload:1,Unstoppable:2}},145221020:{known_shields:{Void:5,Solar:0,Arc:4},known_champions:{Barrier:0,Overload:4,Unstoppable:2}},3094493720:{known_shields:{Void:0,Solar:2,Arc:4},known_champions:{Barrier:3,Overload:0,Unstoppable:1}},3094493727:{known_shields:{Void:0,Solar:2,Arc:2},known_champions:{Barrier:3,Overload:0,Unstoppable:4}},2936791996:{known_shields:{Void:4,Solar:0,Arc:0},known_champions:{Barrier:2,Overload:2,Unstoppable:0}},2936791995:{known_shields:{Void:3,Solar:0,Arc:0},known_champions:{Barrier:5,Overload:4,Unstoppable:0}},1898610132:{known_shields:{Void:9,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:2,Unstoppable:2}},1898610131:{known_shields:{Void:10,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:4,Unstoppable:3}},660710127:{known_shields:{Void:1,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:2,Unstoppable:3}},660710120:{known_shields:{Void:1,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:3,Unstoppable:4}},4206916275:{known_shields:{Void:17,Solar:2,Arc:0},known_champions:{Barrier:0,Overload:1,Unstoppable:3}},4206916276:{known_shields:{Void:29,Solar:2,Arc:1},known_champions:{Barrier:0,Overload:3,Unstoppable:5}},3911969233:{known_shields:{Void:0,Solar:0,Arc:4},known_champions:{Barrier:4,Overload:0,Unstoppable:3}},3911969238:{known_shields:{Void:0,Solar:0,Arc:1},known_champions:{Barrier:7,Overload:0,Unstoppable:3}},184186581:{known_shields:{Void:0,Solar:10,Arc:0},known_champions:{Barrier:3,Overload:2,Unstoppable:0}},184186578:{known_shields:{Void:0,Solar:10,Arc:0},known_champions:{Barrier:4,Overload:6,Unstoppable:0}},567131512:{known_shields:{Void:0,Solar:8,Arc:3},known_champions:{Barrier:3,Overload:2,Unstoppable:0}},567131519:{known_shields:{Void:0,Solar:8,Arc:3},known_champions:{Barrier:4,Overload:6,Unstoppable:0}},3678847129:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:0,Overload:3,Unstoppable:2}},3678847134:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:0,Overload:3,Unstoppable:4}}};var Pe=function(e){return Ne[e]||{known_shields:void 0,known_champions:void 0}},Ae=(0,y.forwardRef)((function(e,n){var t=e.data,r=(0,ae.useQueries)(t.modifiers.map((function(e){return{queryKey:["DestinyActivityModifierDefinition",e.activityModifierHash]}})));if(!r.every((function(e){return e.isSuccess})))return r.some((function(e){return e.isLoading}))?(0,Z.jsx)("section",{ref:n,className:"activity-modifiers",children:(0,Z.jsx)(z.Z,{size:"section"})}):(r.filter((function(e){return e.error})).map((function(e){return console.error(e.error)})),null);var i=Pe(null===t||void 0===t?void 0:t.hash),s=i.known_shields,a=i.known_champions,o=r.filter((function(e){return e.isSuccess&&e.data})).map((function(e){return e.data})),c=o.filter((function(e){return/shielded foes/i.test(e.displayProperties.name)})),l=o.filter((function(e){return/champion foes/i.test(e.displayProperties.name)})),d=o.filter((function(e){return!/(shielded|champion) foes|champions: mob| modifiers$/i.test(e.displayProperties.name)}));return(0,Z.jsxs)("section",{ref:n,className:"activity-modifiers",children:[c.length>0&&(0,Z.jsx)(Ze,{shields:c,known_shields:s}),l.length>0&&(0,Z.jsx)(je,{champions:l,known_champions:a}),d.length>0&&(0,Z.jsxs)("section",{className:"other-modifiers",children:[(0,Z.jsx)("h5",{className:"heading",children:"Modifiers"}),(0,Z.jsx)("div",{className:"modifiers",children:d.map((function(e,n){return(0,Z.jsx)($e,{data:e},n)}))})]})]})}));Ae.defaultProps={};var Ce=[{name:"Arc",pattern:/arc/i},{name:"Solar",pattern:/solar/i},{name:"Void",pattern:/void/i},{name:"Stasis",pattern:/stasis/i}],Ze=(0,y.forwardRef)((function(e,n){var t=e.shields,r=e.known_shields;if(!t||t.length<1)return null;var i=new Set;return t.map((function(e){return Ce.map((function(n){var t;return n.pattern.test(null===e||void 0===e||null===(t=e.displayProperties)||void 0===t?void 0:t.description)&&i.add(n.name)}))})),(0,Z.jsxs)("section",{ref:n,className:"activity-shields",children:[(0,Z.jsx)("h5",{className:"heading",children:"Shields"}),(0,Z.jsx)("div",{className:"shields",children:ge(i).map((function(e,n){return(0,Z.jsx)(we.Z,{contents:"".concat(e," Shields"),children:(0,Z.jsxs)("div",{className:"shield",children:[(0,Z.jsx)(F.Z,{icon:["elements",e],color:e}),r[e]>0&&(0,Z.jsx)("span",{className:"shield-amount",children:r[e]})]},n)},n)}))})]})}));Ze.defaultProps={shields:[],known_shields:{}};var Oe=me;function Te(){var e,n,t=(0,ae.useQuery)("Milestones"),r=(null===t||void 0===t||null===(e=t.data)||void 0===e||null===(n=e[1942283261])||void 0===n?void 0:n.activities)||[],i=(0,ae.useQueries)(r.map((function(e){return{queryKey:["DestinyActivityDefinition",e.activityHash]}})),{enabled:!!r});return t.isSuccess&&i.every((function(e){return e.isSuccess}))?(0,Z.jsx)(Q,{title:"Nightfall",start:16534116e5,period:f,items:[(0,Z.jsx)(q.Z,{triggerContent:i[0].data.displayProperties.description,children:(0,Z.jsx)(Oe,{dataArray:i})})],icon:"https://www.bungie.net/common/destiny2_content/icons/48dda413d9f412ca2b10fd56a35a2665.png",children:i[0].data.displayProperties.description}):null}var Be="DestinyActivityDefinition";function Le(e){var n,t=e.name,r=(0,ae.useQuery)(["Search",Be,t]),i=r.data,s=r.error,a=r.isLoading,o=(null===i||void 0===i||null===(n=i.results)||void 0===n?void 0:n.results)||[],c=(0,ae.useQueries)(o.map((function(e){return{queryKey:[Be,e.hash]}})),{enabled:!!o});if(a||c.some((function(e){return e.isLoading})))return(0,Z.jsx)("article",{className:"lost-sector",children:(0,Z.jsx)(z.Z,{size:"page",fadeIn:"none"})});if(s||c.some((function(e){return e.error})))return s&&console.error(s),c.map((function(e){return e.error&&console.error(e.error)})),(0,Z.jsx)("article",{className:"lost-sector",children:(0,Z.jsx)("h2",{className:"error",children:"Can't find Lost Sector info..."})});var l=c.filter((function(e){return"Lost Sector"===_e(e.data)&&e.data.displayProperties.name.startsWith(t+": ")&&e.data.index===c.reduce((function(n,t){return t.data.displayProperties.name===e.data.displayProperties.name?Math.max(n,t.data.index):n}),0)}));return 0===l.length?(0,Z.jsx)("article",{className:"lost-sector",children:(0,Z.jsx)("h2",{className:"error",children:"Can't find Lost Sector info..."})}):(0,Z.jsx)(Oe,{dataArray:l})}function Ue(e,n){return n?Ue(n,e%n):e}function Re(e,n){return e*n/Ue(e,n)}function Ie(e){var n=e.location;return(0,Z.jsx)(q.Z,{triggerContent:(0,Z.jsxs)("span",{className:"a-link",children:[n.name," - ",n.location]}),background:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_7d11acd7d5a3daebc0a0c906452932d6.png",children:(0,Z.jsx)(Le,{name:n.name})})}function Ve(){var e=(0,y.useMemo)((function(){var e=[{name:"K1 Crew Quarters",location:"Moon"},{name:"K1 Logistics",location:"Moon"},{name:"K1 Revelation",location:"Moon"},{name:"K1 Communion",location:"Moon"},{name:"The Conflux",location:"Nessus"},{name:"Metamorphosis",location:"Throne World"},{name:"Sepulcher",location:"Throne World"},{name:"Extraction",location:"Throne World"},{name:"Excavation Site XII",location:"EDZ"},{name:"Skydock IV",location:"EDZ"},{name:"The Quarry",location:"EDZ"}],n=["Chest","Helmet","Legs","Arms"],t=[];do{t.push((0,Z.jsxs)("div",{children:[(0,Z.jsx)(Ie,{location:e[t.length%e.length]})," (",n[t.length%n.length],")"]}))}while(t.length<Re(n.length,e.length));return t}),[]);return(0,Z.jsx)(Q,{title:"Legend & Master Lost Sector",items:e,start:16534116e5,period:h,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_7d11acd7d5a3daebc0a0c906452932d6.png"})}var He=["EDZ","Cosmodrome","Moon"].map((function(e){return(0,Z.jsx)("div",{children:e})}));function Ee(){return(0,Z.jsx)(Q,{title:"PsiOps Battleground: Legend",items:He,start:16521156e5,period:h,icon:"https://www.bungie.net/common/destiny2_content/icons/b5ca23093632aa939e8209a2ee558106.png"})}function We(){var e,n,t=(0,ae.useQuery)("Settings"),r=null===t||void 0===t||null===(e=t.data)||void 0===e||null===(n=e.destiny2CoreSettings)||void 0===n?void 0:n.currentSeasonHash,i=(0,ae.useQuery)(["DestinySeasonDefinition",r],{enabled:!!r}),s=i.isLoading,a=i.error,o=i.data;return t.isLoading||s?null:t.error||a?(console.error(t.error),null):(0,Z.jsx)(E,{title:"Season ".concat(o.seasonNumber,": ").concat(o.displayProperties.name),description:o.displayProperties.description,start:o.startDate,end:o.endDate,icon:"".concat("https://bungie.net").concat(o.displayProperties.icon)})}var Ye=[(0,Z.jsx)(le,{id:"2721157927",name:"Tarnation"}),(0,Z.jsx)(le,{id:"1399109800",name:"Fel Taradiddle"}),(0,Z.jsx)(le,{id:"3865728990",name:"Father's Sins"}),(0,Z.jsx)(le,{id:"927567426",name:"Come to Pass"})];function Qe(){return(0,Z.jsx)(Q,{title:"Wellspring Weapon",items:Ye,start:1648746e6,period:h,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyMilestoneDefinition_feb5aecca544ab023ecf3b74ac8f509b.png"})}var Fe=function(){return[{title:"Daily Reset",start:(0,l.PR)().end,period:h,icon:"https://cdn.jsdelivr.net/gh/game-icons/icons@c10320edc7ae3f28a29d172e0dd3f029411825d7/delapouite/clockwise-rotation.svg"},{title:"Weekly Reset",start:(0,l.nQ)().end,period:f,icon:"https://cdn.jsdelivr.net/gh/game-icons/icons@c10320edc7ae3f28a29d172e0dd3f029411825d7/delapouite/clockwise-rotation.svg",link:"https://kyber3000.com/reset"},{title:"Weekend Activities",start:(0,l.yb)()?(0,l.yb)().start:(0,l.l2)().start,end:(0,l.yb)()?(0,l.yb)().end:(0,l.l2)().end,period:f,icon:"https://cdn.jsdelivr.net/gh/game-icons/icons@c10320edc7ae3f28a29d172e0dd3f029411825d7/delapouite/clockwise-rotation.svg",description:(0,Z.jsxs)("ul",{children:[(0,Z.jsx)("li",{children:(0,Z.jsx)(v.Z,{href:"https://kyber3000.com/Xur",children:"Xur"})}),(0,Z.jsx)("li",{children:(0,Z.jsx)(v.Z,{href:"https://kyber3000.com/Trials",children:"Trials of Osiris"})})]})}]};function Ke(){return(Ke=(0,a.Z)(c().mark((function e(n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return e.next=4,e.sent.json();case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ze=function(e){return Ke.apply(this,arguments)}("https://raw.githubusercontent.com/CostasAK/d2-timers/events/events.json"),qe=[{name:"Destiny Server and Update Status",link:"https://help.bungie.net/hc/en-us/articles/360049199271-Destiny-Server-and-Update-Status"},{name:"Bungie Maintenance Notifications",link:"https://twitter.com/BungieHelp"},{name:"Patch Notes",link:"https://www.bungie.net/en/Explore/Category?category=Updates"}];function Ge(){var e=y.useState([]),n=(0,s.Z)(e,2),t=n[0],r=n[1];ze.then((function(e){return r(e)}));var a=y.useState(Fe()),o=(0,s.Z)(a,2),c=o[0],l=o[1],d=y.useState(Date.now()),h=(0,s.Z)(d,2),f=h[0],p=h[1];return y.useEffect((function(){var e=setTimeout((function(){l(Fe()),p((function(){return Date.now()}))}),u-f%u);return function(){return clearTimeout(e)}}),[f]),(0,Z.jsxs)("div",{className:"timers-wrapper",children:[(0,Z.jsxs)("div",{className:"timers",children:[(0,Z.jsx)(Te,{}),(0,Z.jsx)(Qe,{}),(0,Z.jsx)(Ve,{}),(0,Z.jsx)(Ee,{}),(0,Z.jsx)(ue,{}),(0,Z.jsx)(We,{}),t.map((function(e,n){return(0,Z.jsx)(E,(0,i.Z)({},e),n)})),c.map((function(e,n){return(0,Z.jsx)(E,(0,i.Z)({},e),n)}))]}),(0,Z.jsx)("div",{className:"links",children:qe.map((function(e){return(0,Z.jsx)(he.Z,{href:e.link,children:e.name},e.name)}))})]})}},7892:function(e){e.exports=function(){"use strict";var e=1e3,n=6e4,t=36e5,r="millisecond",i="second",s="minute",a="hour",o="day",c="week",l="month",d="quarter",u="year",h="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},y=function(e,n,t){var r=String(e);return!r||r.length>=n?e:""+Array(n+1-r.length).join(t)+e},g={s:y,z:function(e){var n=-e.utcOffset(),t=Math.abs(n),r=Math.floor(t/60),i=t%60;return(n<=0?"+":"-")+y(r,2,"0")+":"+y(i,2,"0")},m:function e(n,t){if(n.date()<t.date())return-e(t,n);var r=12*(t.year()-n.year())+(t.month()-n.month()),i=n.clone().add(r,l),s=t-i<0,a=n.clone().add(r+(s?-1:1),l);return+(-(r+(t-i)/(s?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:u,w:c,d:o,D:h,h:a,m:s,s:i,ms:r,Q:d}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},w="en",x={};x[w]=v;var j=function(e){return e instanceof D},S=function e(n,t,r){var i;if(!n)return w;if("string"==typeof n){var s=n.toLowerCase();x[s]&&(i=s),t&&(x[s]=t,i=s);var a=n.split("-");if(!i&&a.length>1)return e(a[0])}else{var o=n.name;x[o]=n,i=o}return!r&&i&&(w=i),i||!r&&w},k=function(e,n){if(j(e))return e.clone();var t="object"==typeof n?n:{};return t.date=e,t.args=arguments,new D(t)},b=g;b.l=S,b.i=j,b.w=function(e,n){return k(e,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var D=function(){function v(e){this.$L=S(e.locale,null,!0),this.parse(e)}var y=v.prototype;return y.parse=function(e){this.$d=function(e){var n=e.date,t=e.utc;if(null===n)return new Date(NaN);if(b.u(n))return new Date;if(n instanceof Date)return new Date(n);if("string"==typeof n&&!/Z$/i.test(n)){var r=n.match(p);if(r){var i=r[2]-1||0,s=(r[7]||"0").substring(0,3);return t?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(n)}(e),this.$x=e.x||{},this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return b},y.isValid=function(){return!(this.$d.toString()===f)},y.isSame=function(e,n){var t=k(e);return this.startOf(n)<=t&&t<=this.endOf(n)},y.isAfter=function(e,n){return k(e)<this.startOf(n)},y.isBefore=function(e,n){return this.endOf(n)<k(e)},y.$g=function(e,n,t){return b.u(e)?this[n]:this.set(t,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,n){var t=this,r=!!b.u(n)||n,d=b.p(e),f=function(e,n){var i=b.w(t.$u?Date.UTC(t.$y,n,e):new Date(t.$y,n,e),t);return r?i:i.endOf(o)},p=function(e,n){return b.w(t.toDate()[e].apply(t.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(n)),t)},m=this.$W,v=this.$M,y=this.$D,g="set"+(this.$u?"UTC":"");switch(d){case u:return r?f(1,0):f(31,11);case l:return r?f(1,v):f(0,v+1);case c:var w=this.$locale().weekStart||0,x=(m<w?m+7:m)-w;return f(r?y-x:y+(6-x),v);case o:case h:return p(g+"Hours",0);case a:return p(g+"Minutes",1);case s:return p(g+"Seconds",2);case i:return p(g+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,n){var t,c=b.p(e),d="set"+(this.$u?"UTC":""),f=(t={},t[o]=d+"Date",t[h]=d+"Date",t[l]=d+"Month",t[u]=d+"FullYear",t[a]=d+"Hours",t[s]=d+"Minutes",t[i]=d+"Seconds",t[r]=d+"Milliseconds",t)[c],p=c===o?this.$D+(n-this.$W):n;if(c===l||c===u){var m=this.clone().set(h,1);m.$d[f](p),m.init(),this.$d=m.set(h,Math.min(this.$D,m.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},y.set=function(e,n){return this.clone().$set(e,n)},y.get=function(e){return this[b.p(e)]()},y.add=function(r,d){var h,f=this;r=Number(r);var p=b.p(d),m=function(e){var n=k(f);return b.w(n.date(n.date()+Math.round(e*r)),f)};if(p===l)return this.set(l,this.$M+r);if(p===u)return this.set(u,this.$y+r);if(p===o)return m(1);if(p===c)return m(7);var v=(h={},h[s]=n,h[a]=t,h[i]=e,h)[p]||1,y=this.$d.getTime()+r*v;return b.w(y,this)},y.subtract=function(e,n){return this.add(-1*e,n)},y.format=function(e){var n=this,t=this.$locale();if(!this.isValid())return t.invalidDate||f;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=b.z(this),s=this.$H,a=this.$m,o=this.$M,c=t.weekdays,l=t.months,d=function(e,t,i,s){return e&&(e[t]||e(n,r))||i[t].substr(0,s)},u=function(e){return b.s(s%12||12,e,"0")},h=t.meridiem||function(e,n,t){var r=e<12?"AM":"PM";return t?r.toLowerCase():r},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:b.s(o+1,2,"0"),MMM:d(t.monthsShort,o,l,3),MMMM:d(l,o),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:d(t.weekdaysMin,this.$W,c,2),ddd:d(t.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(s),HH:b.s(s,2,"0"),h:u(1),hh:u(2),a:h(s,a,!0),A:h(s,a,!1),m:String(a),mm:b.s(a,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:i};return r.replace(m,(function(e,n){return n||p[e]||i.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,h,f){var p,m=b.p(h),v=k(r),y=(v.utcOffset()-this.utcOffset())*n,g=this-v,w=b.m(this,v);return w=(p={},p[u]=w/12,p[l]=w,p[d]=w/3,p[c]=(g-y)/6048e5,p[o]=(g-y)/864e5,p[a]=g/t,p[s]=g/n,p[i]=g/e,p)[m]||g,f?w:b.a(w)},y.daysInMonth=function(){return this.endOf(l).$D},y.$locale=function(){return x[this.$L]},y.locale=function(e,n){if(!e)return this.$L;var t=this.clone(),r=S(e,n,!0);return r&&(t.$L=r),t},y.clone=function(){return b.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},v}(),_=D.prototype;return k.prototype=_,[["$ms",r],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",u],["$D",h]].forEach((function(e){_[e[1]]=function(n){return this.$g(n,e[0],e[1])}})),k.extend=function(e,n){return e.$i||(e(n,D,k),e.$i=!0),k},k.locale=S,k.isDayjs=j,k.unix=function(e){return k(1e3*e)},k.en=x[w],k.Ls=x,k.p={},k}()}}]);
//# sourceMappingURL=421.d5af253d.chunk.js.map