"use strict";(self.webpackChunkd2_buddy=self.webpackChunkd2_buddy||[]).push([[393],{5402:function(e,n,t){t.d(n,{Z:function(){return a}});t(4270);var r=t(2791),s=t(4229),i=t(184);function a(e){var n=e.title,t=e.cardContent,a=e.modalContent,o=e.link,c=e.icon,l=e.className,d=e.floatIcon,u=e.order,m=e.ref,p=(0,r.useMemo)((function(){return(0,i.jsxs)(i.Fragment,{children:[n&&(0,i.jsx)("h4",{className:"title",children:n}),t&&(0,i.jsx)("section",{className:"card-content",children:t})]})}),[t,n]),h=(0,r.useMemo)((function(){return c?(0,r.isValidElement)(c)?(0,r.cloneElement)(c,{className:"icon "+(c.props.className||"")}):(0,i.jsx)("img",{className:"icon",src:c,alt:""}):null}),[c]),f=(0,r.useCallback)((function(e){return(0,i.jsxs)(i.Fragment,{children:[h&&h,e]})}),[h]),v=(0,r.useCallback)((function(e){return a?(0,i.jsx)("article",{ref:m,className:"card clickable "+l+" "+(d?"floating-icon":h?"side-icon":""),style:{order:u},children:e}):o?o.startsWith("steam://")?(0,i.jsx)("a",{ref:m,className:"card clickable "+l+" "+(d?"floating-icon":h?"side-icon":""),href:o,style:{order:u},children:e}):(0,i.jsx)("a",{ref:m,className:"card clickable "+l+" "+(d?"floating-icon":h?"side-icon":""),href:o,target:"_blank",rel:"noreferrer",style:{order:u},children:e}):(0,i.jsx)("article",{ref:m,className:"card "+l+" "+(d?"floating-icon":h?"side-icon":""),style:{order:u},children:e})}),[l,d,h,o,a,u,m]);return a?(0,i.jsx)(s.Z,{triggerContent:v(f(p)),className:l,background:c,children:(0,i.jsxs)("article",{className:"modal-text",children:[n&&(0,i.jsx)("h1",{className:"title",children:n}),a&&(0,i.jsx)("section",{className:"modal-content",children:a})]})}):v(f(p))}a.defaultProps={floatIcon:!1}},4996:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(935),s=t(184),i={weapons:{"Combat Bow":{symbol:"\ue099",name:"Bow"},"Auto Rifle":{symbol:"\ue100",name:"Auto Rifle"},"Pulse Rifle":{symbol:"\ue101",name:"Pulse Rifle"},"Scout Rifle":{symbol:"\ue102",name:"Scout Rifle"},"Hand Cannon":{symbol:"\ue103",name:"Hand Cannon"},"Submachine Gun":{symbol:"\ue107",name:"Submachine Gun"},Sidearm:{symbol:"\ue109",name:"Sidearm"},Shotgun:{symbol:"\ue104",name:"Shotgun"},"Sniper Rifle":{symbol:"\ue105",name:"Sniper Rifle"},"Fusion Rifle":{symbol:"\ue106",name:"Fusion Rifle"},"Grenade Launcher":{symbol:"\ue155",name:"Grenade Launcher"},Glaive:{symbol:"\ue156",name:"Glaive"},"Rocket Launcher":{symbol:"\ue108",name:"Rocket Launcher"},"Heavy Grenade Launcher":{symbol:"\ue113",name:"Heavy Grenade Launcher"},"Linear Fusion Rifle":{symbol:"\ue152",name:"Linear Fusion Rifle"},Sword:{symbol:"\ue153",name:"Sword"},"Machine Gun":{symbol:"\ue154",name:"Machine Gun"},"Trace Rifle":{symbol:"\ue138",name:"Trace Rifle"}},elements:{Kinetic:{symbol:"",name:"Kinetic"},Void:{symbol:"\ue144",name:"Void"},Solar:{symbol:"\ue140",name:"Solar"},Arc:{symbol:"\ue143",name:"Arc"},Stasis:{symbol:"\ue139",name:"Stasis"}},activities:{LostSector:{symbol:"\ue145",name:"Lost Sector"},Destination:{symbol:(0,s.jsx)("img",{src:"https://www.bungie.net/common/destiny2_content/icons/c60303e278aa5fc566a04e98c3d8024c.png",alt:"",style:{aspectRatio:"1 / 1",maxWidth:"96px",maxHeight:"96px",height:"1.5em",lineHeight:"1"}}),name:"Destination"}},champions:{modifiers:{Overload:{symbol:(0,s.jsx)("img",{src:"https://bungie.net/common/destiny2_content/icons/c4d9c4f1ec3167e272286bb155dc15f4.png",alt:"",style:{aspectRatio:"1 / 1",maxWidth:"60px",maxHeight:"60px",height:"1.5em",lineHeight:"1"}}),name:"Overload Champions"},Unstoppable:{symbol:(0,s.jsx)("img",{src:"https://bungie.net/common/destiny2_content/icons/0e40371c49f0beac97e5fd9dc2ea9348.png",alt:"",style:{aspectRatio:"1 / 1",maxWidth:"60px",maxHeight:"60px",height:"1.5em",lineHeight:"1"}}),name:"Unstoppable Champions"},Barrier:{symbol:(0,s.jsx)("img",{src:"https://bungie.net/common/destiny2_content/icons/2ac9bcf4a961c3b3e31da7b76a5a87f9.png",alt:"",style:{aspectRatio:"1 / 1",maxWidth:"60px",maxHeight:"60px",height:"1.5em",lineHeight:"1"}}),name:"Barrier Champions"}}},controllers:{playstation:{Cross:{symbol:"\ue025",name:"Cross"}}}},a=[].concat(["Kinetic","Arc","Solar","Void","Stasis"]);var o=function(e){var n=e.icon,t=e.color,o=e.style,c=e.className,l=e.onClick,d=e.tooltip;try{var u=n.reduce((function(e,n){return e[n]}),i);return(0,s.jsx)(r.Z,{contents:d,children:(0,s.jsx)("span",{className:"destiny-icon "+n.join(" ")+" "+(a.includes(t)?t.toLowerCase():"")+" "+(c||""),style:o,onClick:l,children:u.symbol})})}catch(m){return console.warn("Unknown Destiny icon: ".concat(n,". ").concat(m)),null}}},4229:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(1413),s=t(885),i=(t(4270),t(2791)),a=t(4996),o=t(9136),c=t(7948),l=t.n(c),d=t(9078),u=t(935),m=t(184);function p(e){var n=e.triggerContent,t=e.className,c=e.tooltip,p=e.background,h=e.children,f=(0,i.useState)(!1),v=(0,s.Z)(f,2),g=v[0],y=v[1],x=(0,i.useState)(0),j=(0,s.Z)(x,2),b=j[0],w=j[1],k=(0,i.useMemo)((function(){return(0,i.isValidElement)(n)?(0,i.cloneElement)(n,{onClick:function(){return y(!0)}}):n}),[n]),S=(0,i.useCallback)((function(e,n){return(0,m.jsxs)(l(),{isOpen:e,onRequestClose:function(){return y(!1)},className:"modal "+(t||""),overlayClassName:"modal-overlay",closeTimeoutMS:250,appElement:document.getElementById("root"),style:n?{content:{width:n+2}}:{},children:[(0,m.jsx)(a.Z,{icon:["controllers","playstation","Cross"],className:"close",onClick:function(){return y(!1)},tooltip:"Close Pop-up"}),(0,m.jsx)("div",{className:"background",style:{backgroundImage:"url(".concat(p,")")}}),(0,m.jsx)(d.Z,{className:"modal-scroll",children:(0,m.jsx)(o.Z,{bounds:!0,onResize:function(e){w(e.bounds.width)},children:function(e){var n=e.measureRef;return(0,m.jsx)("div",{ref:n,className:"modal-inner",children:h})}})})]})}),[p,h,t]);return(0,m.jsxs)(m.Fragment,{children:[c?(0,m.jsx)(u.Z,(0,r.Z)((0,r.Z)({},c),{},{children:k})):k,S(g,b)]})}},935:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(1413),s=t(885),i=t(2791),a=t(5733),o=t(184);function c(e){var n=e.trigger,t=e.backgroundColor,c=e.children,l=(0,i.useState)(null),d=(0,s.Z)(l,2),u=d[0],m=d[1],p=(0,i.useState)(null),h=(0,s.Z)(p,2),f=h[0],v=h[1],g=(0,a.D)(n,u,{modifiers:[{name:"arrow",options:{element:f}},{name:"offset",options:{offset:[0,8]}}]}),y=g.styles,x=g.attributes;return(0,o.jsxs)("div",(0,r.Z)((0,r.Z)({className:"popper",ref:m,style:(0,r.Z)((0,r.Z)({},y.popper),{},{backgroundColor:t})},x.popper),{},{children:[c,(0,o.jsx)("div",{className:"popper-arrow",ref:v,style:y.arrow})]}))}function l(e){var n=e.contents,t=e.backgroundColor,r=e.children,a=(0,i.useState)(null),l=(0,s.Z)(a,2),d=l[0],u=l[1],m=(0,i.useState)(!1),p=(0,s.Z)(m,2),h=p[0],f=p[1],v=(0,i.useMemo)((function(){return n?(0,i.isValidElement)(r)?(0,i.cloneElement)(r,{ref:u,onMouseOver:function(){return f(!0)},onMouseOut:function(){return f(!1)},className:r.props.className+" popper-content"}):(0,o.jsx)("div",{ref:u,className:"popper-content",children:r}):r}),[r,n]);return(0,o.jsxs)(o.Fragment,{children:[v,h&&(0,o.jsx)(c,{trigger:d,backgroundColor:t,children:n})]})}},8393:function(e,n,t){t.r(n),t.d(n,{default:function(){return He}});var r=t(2982),s=t(885),i=t(5861),a=t(7757),o=t.n(a),c=t(7184),l=t(7892),d=t.n(l);function u(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!n)return m(e,!1);var t=new Intl.DateTimeFormat(void 0,{hour:"numeric"}).formatToParts(new Date(e));return void 0!==t.dayPeriod?d()(e).format("h:mm A"):d()(e).format("H:mm")}function m(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return d()(e).format("ddd, D MMM YYYY")+(n?" "+u(e):"")}var p=t(2791),h=t(5402),f=6e4,v=36e5,g=24*v,y=30*g,x=365*g;function j(e){if(Math.abs(e)<750)return"now";var n=function(e){var n=Math.abs(e);if(n<6e4)return"less than 1 minute";if(n<9e4)return"1 minute";if(n<=345e4)return"".concat(Math.round(n/f)," minutes");if(n<22*v)return"".concat(n%v/v<.875?Math.floor(n/v):Math.ceil(n/v)).concat(n%v/v<.125||n%v/v>=.875?"":n%v/v<.375?"\xbc":n%v/v<.625?"\xbd":"\xbe"," hour").concat(n<675e4?"":"s");if(n<1.5*g)return"1 day";if(n<26*g)return"".concat(Math.round(n/g)," days");if(n<46*g)return"1 month";if(n<11*y)return"".concat(Math.round(n/y)," months");if(n<18*y)return"1 year";return"".concat(Math.round(n/x)," years")}(e);return e<0?"".concat(n," ago"):"in ".concat(n)}function b(e){return e&&e<=Date.now()}function w(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now()+1e3;if(!e||!n)return n;var r=(n-=n%1e3)%e,s=(t+=1e3-t%1e3)%e||0;return s<r?t-s+r:t-s+r+e}function k(e){return!!e&&new Date(e).getTime()}var S=t(184),N=864e5;function _(e){var n=e.name,t=e.items,r=e.start,i=e.period,a=e.icon,o=(0,p.useState)(Date.now()),c=(0,s.Z)(o,2),l=c[0],d=c[1],f=(0,p.useState)(w(i,k(r))),v=(0,s.Z)(f,2),g=v[0],y=v[1];function x(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!n&&b(e-N)?u(e):m(e)}(0,p.useEffect)((function(){var e=setTimeout((function(){d((function(){return Date.now()})),y((function(){return w(i,k(r))}))}),1e3);return function(){clearTimeout(e)}}),[r,i,g,l]);var _=(g-157788e6)/6e4,C=Math.floor((l-r)/i)%t.length,Z=(0,S.jsxs)(S.Fragment,{children:[t[C],"Cycles "+function(e){var n=j(e-l);return b(e-N)?n+", at "+x(e):n+", on "+x(e)}(g)]}),D=(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("section",{children:Z}),(0,S.jsxs)("section",{className:"upcoming-items",children:[(0,S.jsx)("h3",{children:"Upcoming"}),t.map((function(e,n){var r=(n-C+t.length-1)%t.length;return(0,S.jsxs)("section",{style:{order:r},children:[e,x(g+r*i,!0)]},n)}))]})]});return(0,S.jsx)(h.Z,{className:"cycle-card",title:n,order:_,cardContent:Z,modalContent:D,icon:a})}_.defaultProps={period:N};var C=t(4996),Z=t(4036),D=t(4229);var R=function(e){var n=e.Response.screenshot||e.Response.pgcrImage;return n?"https://bungie.net"+n:null},A=t(6107),P=function(e,n){return Object.keys(e).find((function(t){return e[t]===n}))};var M=function(e){return P(A.BN,e.Response.defaultDamageType).replace(/thermal/i,"Solar")};var B=function(e){var n=e.Response.itemTypeDisplayName;return"Grenade Launcher"===n&&A.JS.Heavy===e.Response.equippingBlock.ammoType&&(n="Heavy "+n),n},O={Legendary:"#4e3263",Exotic:"#cdad34"};var T=function(e){return O[e]||"#04040e"},U=t(4569),V=t.n(U)().create({baseURL:"https://www.bungie.net/Platform",headers:{Accept:"application/json","X-API-KEY":"8b8aaf0af60d41d5bccbc3af3445ef65"}}),L=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return V({url:e,method:n,headers:t})},E=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Array.isArray(e)?e:[e];return Promise.all(r.map((function(e){return V({url:e,method:n,headers:t})})))},H=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2?arguments[2]:void 0,r=(0,p.useState)(Array.isArray(e)?new Array(e.length):{}),i=(0,s.Z)(r,2),a=i[0],o=i[1],c=(0,p.useState)(!1),l=(0,s.Z)(c,2),d=l[0],u=l[1],m=(0,p.useState)(!0),h=(0,s.Z)(m,2),f=h[0],v=h[1],g=(0,p.useCallback)((function(){return E(e,n,t).then((function(e){o(e.length>1?e.map((function(e){return e.data})):e[0].data),v(!1)})).catch((function(e){u(e),v(!1)}))}),[e,n,t]);return(0,p.useEffect)((function(){g()}),[g]),{data:a,error:d,isPending:f}},F=[{name:"DestinyTracker",url:"https://destinytracker.com/destiny-2/db/items/",icon:"https://cod.tracker.gg/public/icons/icon192.png"},{name:"Gunsmith",url:"https://d2gunsmith.com/w/",icon:"https://d2gunsmith.com/favicon.ico"},{name:"Light.gg",url:"https://www.light.gg/db/en/items/",icon:"https://www.light.gg/Content/Images/new-icon.png"}];function G(e){var n=e.id;return(0,S.jsx)("ul",{className:"weapon-links",children:F.map((function(e){return(0,S.jsx)("li",{children:(0,S.jsxs)("a",{className:"site-link",href:e.url+n,target:"_blank",rel:"noreferrer",children:[e.icon&&(0,S.jsx)("img",{alt:"",src:e.icon,className:"site-icon"}),e.name]})},e.name)}))})}function W(e){var n=e.id,t=e.name,r=H("".concat("/Destiny2/Manifest/DestinyInventoryItemDefinition/").concat(n,"/")),s=r.data,i=r.error;if(r.isPending)return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{className:"destiny-weapon",children:[(0,S.jsx)(Z.Z,{size:"inline"})," ",t&&(0,S.jsx)("span",{children:t})]})});if(i)return console.error(i),null;t||(t=s.Response.displayProperties.name);var a=B(s),o=M(s),c=s.Response.inventory.tierTypeName,l=R(s);return(0,S.jsx)(D.Z,{triggerContent:(0,S.jsxs)("div",{className:"destiny-weapon a-link",children:[(0,S.jsx)(C.Z,{icon:["weapons",a],color:o})," ",(0,S.jsx)("span",{children:t})]}),tooltip:{contents:"".concat(c," ").concat(o," ").concat(a),backgroundColor:T(c)},children:(0,S.jsxs)("article",{className:"weapon-modal "+c.toLowerCase(),children:[(0,S.jsx)("div",{className:"weapon-screenshot",style:{backgroundImage:"url(".concat(l,")")},children:(0,S.jsx)(G,{id:n})}),(0,S.jsxs)("div",{className:"weapon-header",children:[(0,S.jsx)("img",{src:"https://bungie.net"+s.Response.displayProperties.icon,alt:"",className:"weapon-icon"}),(0,S.jsxs)("div",{className:"weapon-header-text",children:[(0,S.jsx)("h3",{children:t}),(0,S.jsxs)("p",{children:[c," |"," ",(0,S.jsx)(C.Z,{icon:["elements",o],color:o})," ",o," | ",(0,S.jsx)(C.Z,{icon:["weapons",a]})," ",a]})]})]})]})})}var I=[(0,S.jsx)(W,{id:"2782847179",name:"Blasphemer"}),(0,S.jsx)(W,{id:"2164448701",name:"Apostate"}),(0,S.jsx)(W,{id:"3067821200",name:"Heretic"})];function K(){return(0,S.jsx)(_,{name:"Altars of Sorrow Weapon",items:I,start:16488324e5,period:864e5,icon:"https://www.bungie.net/common/destiny2_content/icons/58bf5b93ae8cfefc55852fe664179757.png"})}var Q=t(8914),z=t(1933);function Y(){var e,n,t,r=(0,z.useQuery)("nightfall-milestone",(function(){return L("/Destiny2/Milestones")})),s=(null===r||void 0===r||null===(e=r.data)||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.Response[1942283261])||void 0===t?void 0:t.activities)||[],i=(0,z.useQueries)(s.map((function(e){return{queryKey:e.activityHash,queryFn:function(){return L("/Destiny2/Manifest/DestinyActivityDefinition/".concat(e.activityHash))}}})),{enabled:!!s});return r.isSuccess&&i.every((function(e){return e.isSuccess}))?(0,S.jsx)(h.Z,{title:"Nightfall",cardContent:i[0].data.data.Response.displayProperties.description,icon:"https://www.bungie.net/common/destiny2_content/icons/48dda413d9f412ca2b10fd56a35a2665.png"}):null}var q=t(8014);var X=function(e){var n=e.id,t=H("".concat("/Destiny2/Manifest/DestinyDestinationDefinition/").concat(n,"/")),r=t.data,s=t.error;return t.isPending?(0,S.jsxs)("div",{className:"destination",children:[(0,S.jsx)(C.Z,{icon:["activities","Destination"]}),(0,S.jsx)(Z.Z,{size:"inline"})]}):s?(console.error(s),null):(0,S.jsxs)("p",{className:"destination",children:[(0,S.jsx)(C.Z,{icon:["activities","Destination"]}),r.Response.displayProperties.name]})},$={LostSector:"Lost Sector"};var J=function(e){var n=P(A.EI,e.Response.directActivityModeType);return $[n]||n};function ee(e){var n=e.data,t=e.name;t||(t=n.Response.displayProperties.name);var r=J(n),s=R(n);return(0,S.jsxs)("section",{className:"activity-header",style:{backgroundImage:"url(".concat(s,")")},children:[(0,S.jsx)("h5",{className:"activity-type",children:r}),(0,S.jsx)("h1",{className:"activity-name",children:t}),(0,S.jsx)(X,{id:n.Response.destinationHash})]})}ee.defaultProps={};var ne=ee,te=t(935),re=[{class:"Overload",pattern:/Disruption|Overload/i},{class:"Unstoppable",pattern:/Stagger|Unstoppable/i},{class:"Barrier",pattern:/Shield-Piercing|Barrier/i}];function se(e){var n=e.champions,t=e.known_champions;if(!n||n.length<1)return null;var s=new Set;return n.map((function(e){return re.map((function(n){return n.pattern.test(e.Response.displayProperties.description)&&s.add(n.class)}))})),(0,S.jsxs)("section",{className:"activity-champions",children:[(0,S.jsx)("h5",{className:"heading",children:"Champions"}),(0,S.jsx)("div",{className:"champions",children:(0,r.Z)(s).map((function(e,n){return(0,S.jsx)(te.Z,{contents:"".concat(e," Champions"),children:(0,S.jsxs)("div",{className:"champion "+e,children:[(0,S.jsx)(C.Z,{icon:["champions","modifiers",e],style:{filter:"brightness(".concat(t[e]&&"75%",")")}}),t[e]>0&&(0,S.jsx)("span",{className:"champion-amount",children:t[e]})]},n)},n)}))})]})}se.defaultProps={champions:[],known_champions:{}};var ie=se;function ae(e){var n=e.data,t=n.Response.displayProperties.name,r=n.Response.displayProperties.icon,s=n.Response.displayProperties.description?(0,S.jsx)("p",{children:n.Response.displayProperties.description.replace(/(?:[\s.,]*\n+[\s.,]*)+/g,"; ").replace(/(\[Disruption|Stagger\])/g,"|$1|").split("|")}):null;if(!r||!t)return null;var i=[{class:"arc",pattern:/arc/i},{class:"solar",pattern:/solar/i},{class:"void",pattern:/void/i},{class:"stasis",pattern:/stasis/i}];return(0,S.jsxs)("section",{className:"activity-modifier",children:[(0,S.jsx)(te.Z,{contents:t,children:(0,S.jsx)("img",{className:"icon"+i.filter((function(e){return e.pattern.test(t)})).reduce((function(e,n){return e+" "+n.class}),""),src:"https://bungie.net"+r,alt:""})}),(0,S.jsxs)("div",{className:"description",children:[(0,S.jsx)("h6",{className:"heading"+i.filter((function(e){return e.pattern.test(t)})).reduce((function(e,n){return e+" "+n.class}),""),children:t}),s]})]})}ae.defaultProps={};var oe=ae,ce=[{name:"Arc",pattern:/arc/i},{name:"Solar",pattern:/solar/i},{name:"Void",pattern:/void/i},{name:"Stasis",pattern:/stasis/i}];function le(e){var n=e.shields,t=e.known_shields;if(!n||n.length<1)return null;var s=new Set;return n.map((function(e){return ce.map((function(n){return n.pattern.test(e.Response.displayProperties.description)&&s.add(n.name)}))})),(0,S.jsxs)("section",{className:"activity-shields",children:[(0,S.jsx)("h5",{className:"heading",children:"Shields"}),(0,S.jsx)("div",{className:"shields",children:(0,r.Z)(s).map((function(e,n){return(0,S.jsx)(te.Z,{contents:"".concat(e," Shields"),children:(0,S.jsxs)("div",{className:"shield",children:[(0,S.jsx)(C.Z,{icon:["elements",e],color:e}),t[e]>0&&(0,S.jsx)("span",{className:"shield-amount",children:t[e]})]},n)},n)}))})]})}le.defaultProps={shields:[],known_shields:{}};var de=le;function ue(e){var n=e.data,t=e.known_shields,r=e.known_champions,s=H(n.Response.modifiers.map((function(e){return"".concat("/Destiny2/Manifest/DestinyActivityModifierDefinition/").concat(e.activityModifierHash,"/")}))),i=s.data,a=s.error;if(s.isPending)return(0,S.jsx)("section",{className:"activity-modifiers",children:(0,S.jsx)(Z.Z,{size:"section"})});if(a)return console.error(a),null;var o=i.filter((function(e){return/shielded foes/i.test(e.Response.displayProperties.name)})),c=i.filter((function(e){return/champion foes/i.test(e.Response.displayProperties.name)})),l=i.filter((function(e){return!/(shielded|champion) foes|champions: mob/i.test(e.Response.displayProperties.name)}));return(0,S.jsxs)("section",{className:"activity-modifiers",children:[o.length>0&&(0,S.jsx)(de,{shields:o,known_shields:t}),c.length>0&&(0,S.jsx)(ie,{champions:c,known_champions:r}),l.length>0&&(0,S.jsxs)("section",{className:"other-modifiers",children:[(0,S.jsx)("h5",{className:"heading",children:"Modifiers"}),(0,S.jsx)("div",{className:"modifiers",children:l.map((function(e,n){return(0,S.jsx)(oe,{data:e},n)}))})]})]})}ue.defaultProps={};var me=ue,pe={0:{known_shields:{Void:0,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:0,Unstoppable:0}},480864726:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:3,Overload:0,Unstoppable:1}},480864721:{known_shields:{Void:0,Solar:0,Arc:1},known_champions:{Barrier:5,Overload:0,Unstoppable:2}},145221019:{known_shields:{Void:5,Solar:0,Arc:7},known_champions:{Barrier:0,Overload:1,Unstoppable:2}},145221020:{known_shields:{Void:5,Solar:0,Arc:4},known_champions:{Barrier:0,Overload:4,Unstoppable:2}},3094493720:{known_shields:{Void:0,Solar:2,Arc:4},known_champions:{Barrier:3,Overload:0,Unstoppable:1}},3094493727:{known_shields:{Void:0,Solar:2,Arc:2},known_champions:{Barrier:3,Overload:0,Unstoppable:4}},2936791996:{known_shields:{Void:4,Solar:0,Arc:0},known_champions:{Barrier:2,Overload:2,Unstoppable:0}},2936791995:{known_shields:{Void:3,Solar:0,Arc:0},known_champions:{Barrier:5,Overload:4,Unstoppable:0}},1898610132:{known_shields:{Void:9,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:2,Unstoppable:2}},1898610131:{known_shields:{Void:10,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:4,Unstoppable:3}},660710127:{known_shields:{Void:1,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:2,Unstoppable:3}},660710120:{known_shields:{Void:1,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:3,Unstoppable:4}},4206916275:{known_shields:{Void:17,Solar:2,Arc:0},known_champions:{Barrier:0,Overload:1,Unstoppable:3}},4206916276:{known_shields:{Void:29,Solar:2,Arc:1},known_champions:{Barrier:0,Overload:3,Unstoppable:5}},3911969233:{known_shields:{Void:0,Solar:0,Arc:4},known_champions:{Barrier:4,Overload:0,Unstoppable:3}},3911969238:{known_shields:{Void:0,Solar:0,Arc:1},known_champions:{Barrier:7,Overload:0,Unstoppable:3}},184186581:{known_shields:{Void:0,Solar:10,Arc:0},known_champions:{Barrier:3,Overload:2,Unstoppable:0}},184186578:{known_shields:{Void:0,Solar:10,Arc:0},known_champions:{Barrier:4,Overload:6,Unstoppable:0}},567131512:{known_shields:{Void:0,Solar:8,Arc:3},known_champions:{Barrier:3,Overload:2,Unstoppable:0}},567131519:{known_shields:{Void:0,Solar:8,Arc:3},known_champions:{Barrier:4,Overload:6,Unstoppable:0}},3678847129:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:0,Overload:3,Unstoppable:2}},3678847134:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:0,Overload:3,Unstoppable:4}}};var he=function(e){try{return pe[e]}catch(n){return console.warn(n),null}},fe="DestinyActivityDefinition",ve="/Destiny2/Manifest/".concat(fe,"/"),ge="/Destiny2/Armory/Search/".concat(fe,"/"),ye=function(e){var n=(0,p.useState)(new Array(2)),t=(0,s.Z)(n,2),r=t[0],i=t[1],a=(0,p.useState)(!1),o=(0,s.Z)(a,2),c=o[0],l=o[1],d=(0,p.useState)(!1),u=(0,s.Z)(d,2),m=u[0],h=u[1],f=(0,p.useState)(!0),v=(0,s.Z)(f,2),g=v[0],y=v[1],x=(0,p.useCallback)((function(){return E(ge+e).then((function(e){l([e[0].data.Response.results.results.filter((function(e){return e.displayProperties.name.endsWith(": Legend")}))[0].hash,e[0].data.Response.results.results.filter((function(e){return e.displayProperties.name.endsWith(": Master")}))[0].hash])})).catch((function(e){h(e),y(!1)}))}),[e]),j=(0,p.useCallback)((function(){return E(c.map((function(e){return ve+e}))).then((function(e){i(e.map((function(e){return e.data}))),y(!1)})).catch((function(e){h(e),y(!1)}))}),[c]);return(0,p.useEffect)((function(){x()}),[x]),(0,p.useEffect)((function(){c&&j()}),[j,c]),{data:r,error:m,isPending:g}};function xe(e){var n=e.name,t=ye(n),r=t.data,s=t.error;if(t.isPending)return(0,S.jsx)("article",{className:"lost-sector",children:(0,S.jsx)(Z.Z,{size:"page",fadeIn:"none"})});if(s)return console.error(s),(0,S.jsx)("article",{className:"lost-sector",children:(0,S.jsx)("h2",{className:"error",children:"Can't find Lost Sector info..."})});var i=he(r[0].Response.hash),a=i.known_shields,o=i.known_champions,c=he(r[1].Response.hash),l=c.known_shields,d=c.known_champions;return(0,S.jsxs)("article",{className:"lost-sector success",children:[(0,S.jsx)(ne,{data:r[0],name:r[0].Response.displayProperties.name.replace(/: (Legend|Master)$/i,"")}),(0,S.jsxs)("section",{className:"legend-difficulty",children:[(0,S.jsx)("h2",{className:"heading",children:"Legend"}),(0,S.jsx)(me,{data:r[0],known_shields:a,known_champions:o})]}),(0,S.jsxs)("section",{className:"master-difficulty",children:[(0,S.jsx)("h2",{className:"heading",children:"Master"}),(0,S.jsx)(me,{data:r[1],known_shields:l,known_champions:d})]})]})}function je(e,n){return n?je(n,e%n):e}function be(e,n){return e*n/je(e,n)}function we(e){var n=e.location;return(0,S.jsx)(D.Z,{triggerContent:(0,S.jsxs)("span",{className:"a-link",children:[n.name," - ",n.location]}),background:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_7d11acd7d5a3daebc0a0c906452932d6.png",children:(0,S.jsx)(xe,{name:n.name})})}function ke(){var e=(0,p.useMemo)((function(){var e=[{name:"K1 Crew Quarters",location:"Moon"},{name:"K1 Logistics",location:"Moon"},{name:"Metamorphosis",location:"Throne World"},{name:"Sepulcher",location:"Throne World"},{name:"Extraction",location:"Throne World"},{name:"Veles Labyrinth",location:"Cosmodrome"},{name:"Exodus Garden A2",location:"Cosmodrome"},{name:"Aphelion's Rest",location:"Dreaming City"},{name:"Bay of Drowned Wishes",location:"Dreaming City"},{name:"Chamber of Starlight",location:"Dreaming City"},{name:"K1 Revelation",location:"Moon"}],n=["Arms","Chest","Helmet","Legs"],t=[];do{t.push((0,S.jsxs)("div",{children:[(0,S.jsx)(we,{location:e[t.length%e.length]})," (",n[t.length%n.length],")"]}))}while(t.length<be(n.length,e.length));return t}),[]);return(0,S.jsx)(_,{name:"Legend & Master Lost Sector",items:e,start:16489188e5,period:864e5,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_7d11acd7d5a3daebc0a0c906452932d6.png"})}var Se=["EDZ","Cosmodrome","Moon"].map((function(e){return(0,S.jsx)("div",{children:e})}));function Ne(){return(0,S.jsx)(_,{name:"PsiOps Battleground: Legend",items:Se,start:16521156e5,period:864e5,icon:"https://www.bungie.net/common/destiny2_content/icons/b5ca23093632aa939e8209a2ee558106.png"})}function _e(e){return e.charAt(0).toUpperCase()+e.slice(1)}var Ce=t(3540),Ze=6e4,De=864e5;function Re(e){var n=(0,p.useState)(w(e.period,k(e.end))),t=(0,s.Z)(n,2),r=t[0],i=t[1],a=(0,p.useState)((function(){for(var n=w(e.period,k(e.start));e.period&&r&&n>r;)n-=e.period;return n})),o=(0,s.Z)(a,2),c=o[0],l=o[1],d=(0,p.useState)(Date.now()),f=(0,s.Z)(d,2),v=f[0],g=f[1];(0,p.useEffect)((function(){var n=setTimeout((function(){i(w(e.period,k(r))),g((function(){return Date.now()})),l((function(){for(var n=w(e.period,k(c));e.period&&r&&n>=r;)n-=e.period;return n}))}),1e3);return function(){return clearTimeout(n)}}),[v,c,r,e.period]);var y=!!e.period,x=!1;b(c)&&(x=!0);var N=!1;if((b(r)||!r&&b(c+De)||!y&&(b(r)||!r&&b(c+De)))&&(N=!0),N)return null;var _=c;x&&r&&(_=r);var C,Z=j(_-v);C=x&&!r?"On "+m(_,e.hasTime):b(_-De)?"at "+u(_,e.hasTime):"on "+m(_,e.hasTime);var D=_/Ze;y||(D-=5259600);var R,A="string"===typeof e.description||e.description instanceof String?(0,Ce.ZP)(e.description):e.description;return(0,S.jsx)(h.Z,{className:"timer-card "+(x?"highlight":""),icon:e.icon,title:e.name,cardContent:(R=(y||!x||r?Z+", ":"")+C,R.split(". ").map(_e).join(". ")),modalContent:A||void 0,order:D,link:e.link})}Re.defaultProps={end:!1,period:!1,hasTime:!0,description:!1};function Ae(){var e,n,t,r,s,i=(0,z.useQuery)("d2settings",(function(){return L("/Settings/")})),a=null===i||void 0===i||null===(e=i.data)||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.Response)||void 0===t||null===(r=t.destiny2CoreSettings)||void 0===r?void 0:r.currentSeasonHash,o=(0,z.useQuery)("seasons",(function(){return L("/Destiny2/Manifest/DestinySeasonDefinition/".concat(a))}),{enabled:!!a}),c=o.isLoading,l=o.error,d=o.data;if(i.isLoading||c)return null;if(i.error||l)return console.error(i.error),null;var u=null===d||void 0===d||null===(s=d.data)||void 0===s?void 0:s.Response;return(0,S.jsx)(Re,{name:"Season ".concat(u.seasonNumber,": ").concat(u.displayProperties.name),description:u.displayProperties.description,start:u.startDate,end:u.endDate,icon:"".concat("https://bungie.net").concat(u.displayProperties.icon)})}var Pe=[(0,S.jsx)(W,{id:"2721157927",name:"Tarnation"}),(0,S.jsx)(W,{id:"1399109800",name:"Fel Taradiddle"}),(0,S.jsx)(W,{id:"3865728990",name:"Father's Sins"}),(0,S.jsx)(W,{id:"927567426",name:"Come to Pass"})];function Me(){return(0,S.jsx)(_,{name:"Wellspring Weapon",items:Pe,start:1648746e6,period:864e5,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyMilestoneDefinition_feb5aecca544ab023ecf3b74ac8f509b.png"})}var Be=36e5,Oe=864e5,Te=6048e5,Ue=function(){return[{name:"Daily Reset",start:(0,c.PR)().end,period:Oe,icon:(0,S.jsx)(q.jFC,{})},{name:"Weekly Reset",start:(0,c.nQ)().end,period:Te,icon:(0,S.jsx)(q.jFC,{}),link:"https://kyber3000.com/reset"},{name:"Weekend Activities",start:(0,c.yb)()?(0,c.yb)().start:(0,c.l2)().start,end:(0,c.yb)()?(0,c.yb)().end:(0,c.l2)().end,period:Te,icon:(0,S.jsx)(q.jFC,{}),description:(0,S.jsxs)("ul",{children:[(0,S.jsx)("li",{children:(0,S.jsx)("a",{href:"https://kyber3000.com/Xur",target:"_blank",rel:"noreferrer",children:"Xur"})}),(0,S.jsx)("li",{children:(0,S.jsx)("a",{href:"https://kyber3000.com/Trials",target:"_blank",rel:"noreferrer",children:"Trials of Osiris"})})]})},{name:"Season ".concat((0,c.ye)().seasonNumber),start:(0,c.ye)().start,end:(0,c.ye)().end}]};function Ve(){return(Ve=(0,i.Z)(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return e.next=4,e.sent.json();case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Le=function(e){return Ve.apply(this,arguments)}("https://raw.githubusercontent.com/CostasAK/d2-timers/events/events.json"),Ee=[{name:"Destiny Server and Update Status",link:"https://help.bungie.net/hc/en-us/articles/360049199271-Destiny-Server-and-Update-Status"},{name:"Bungie Maintenance Notifications",link:"https://twitter.com/BungieHelp"},{name:"Patch Notes",link:"https://www.bungie.net/en/Explore/Category?category=Updates"}];function He(){var e=p.useState([]),n=(0,s.Z)(e,2),t=n[0],i=n[1];Le.then((function(e){return i(e)}));var a=p.useState(Ue()),o=(0,s.Z)(a,2),c=o[0],l=o[1],d=p.useState(Date.now()),u=(0,s.Z)(d,2),m=u[0],h=u[1];p.useEffect((function(){var e=setTimeout((function(){l(Ue()),h((function(){return Date.now()}))}),Be-m%Be);return function(){return clearTimeout(e)}}),[m]);var f=[].concat((0,r.Z)(t),(0,r.Z)(c));return(0,S.jsxs)("div",{className:"timers-wrapper",children:[(0,S.jsxs)("div",{className:"timers",children:[(0,S.jsx)(Y,{}),(0,S.jsx)(Me,{}),(0,S.jsx)(ke,{}),(0,S.jsx)(Ne,{}),(0,S.jsx)(K,{}),(0,S.jsx)(Ae,{}),f.map((function(e){return(0,S.jsx)(Re,{name:e.name,description:e.description,start:e.start,end:e.end,period:e.period,hasTime:e.hasTime,icon:e.icon,link:e.link},e.name)}))]}),(0,S.jsx)("div",{className:"links",children:Ee.map((function(e){return(0,S.jsx)(Q.Z,{href:e.link,children:e.name},e.name)}))})]})}},4270:function(){}}]);
//# sourceMappingURL=393.ad8b5878.chunk.js.map