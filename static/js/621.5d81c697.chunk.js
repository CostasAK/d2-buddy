"use strict";(self.webpackChunkd2_buddy=self.webpackChunkd2_buddy||[]).push([[621],{9991:function(n,e,i){i.r(e),i.d(e,{default:function(){return En}});var t,r=i(885),o=i(171),a=i(2791),s=i(9412),l=i(168),d=i(6031),c=(0,d.iv)(t||(t=(0,l.Z)(["\n  display: flex;\n  flex-flow: column;\n  justify-content: flex-start;\n  align-items: safe center;\n  text-align: center;\n  margin: auto;\n"]))),u=d.ZP.section.withConfig({displayName:"CycleCardModalStyle__CurrentItem",componentId:"sc-8dv19i-0"})([""," margin-top:",";"],c,(function(n){return n.theme.lengths.pad})),v=d.ZP.section.withConfig({displayName:"CycleCardModalStyle__UpcomingItems",componentId:"sc-8dv19i-1"})([""," gap:",";& > h3{margin:auto;margin-top:",";order:-1;}"],c,(function(n){return n.theme.lengths.gap}),(function(n){return n.theme.lengths.gap})),p=i(1413),m=i(5987),h=i(6107);function f(n){return n.charAt(0).toUpperCase()+n.slice(1)}function y(n){if(Math.abs(n)<.75*o.E0)return"now";var e=function(n){var e=Math.abs(n);if(e<1*o.Z7)return"less than 1 minute";if(e<1.5*o.Z7)return"1 minute";if(e<=57.5*o.Z7)return"".concat(Math.round(e/o.Z7)," minutes");if(e<22*o.xO)return"".concat(e%o.xO/o.xO<.875?Math.floor(e/o.xO):Math.ceil(e/o.xO)).concat(e%o.xO/o.xO<.125||e%o.xO/o.xO>=.875?"":e%o.xO/o.xO<.375?"\xbc":e%o.xO/o.xO<.625?"\xbd":"\xbe"," hour").concat(e<1.875*o.xO?"":"s");if(e<1.5*o.v0)return"1 day";if(e<26*o.v0)return"".concat(Math.round(e/o.v0)," days");if(e<46*o.v0)return"1 month";if(e<11*o.iL)return"".concat(Math.round(e/o.iL)," months");if(e<18*o.iL)return"1 year";return"".concat(Math.round(e/o.ty)," years")}(n);return n<0?"".concat(e," ago"):"in ".concat(e)}function x(n){return n&&n<=Date.now()}var g=i(6175),w=i(184),j=(0,a.forwardRef)((function(n,e){var i=n.timestamp,t=n.hasTime,s=n.prefix,l=n.conditions,d=n.className,c=(0,a.useState)(Date.now()),u=(0,r.Z)(c,2),v=u[0],p=u[1],m=(0,a.useState)(y(i-v)),j=(0,r.Z)(m,2),b=j[0],k=j[1];(0,a.useEffect)((function(){var n=setTimeout((function(){p((function(){return Date.now()})),k((function(){return y(i-v)}))}),(0,g.R)(30*o.E0,0)-Date.now());return function(){return clearTimeout(n)}}),[v,i]),l=Array.isArray(l)?l:[l];var S,_;return i&&l.every((function(n){return!0===n||("past"===n?x(i):"future"===n?!x(i):"past"===(null===n||void 0===n?void 0:n.when)?x(n.timestamp):"future"===(null===n||void 0===n?void 0:n.when)?!x(n.timestamp):void 0)}))?(S=Math.abs(i-v)<o.v0?"at "+(0,h.m)(i,t):"on "+(0,h.p)(i,t),(0,w.jsx)("p",{ref:e,className:d,children:(_="".concat(s?"".concat(Array.isArray(s)?x(i)?s[1]:s[0]:s," "):"").concat(b?"".concat(b,", "):"").concat(S),_.split(". ").map(f).join(". "))})):null}));j.defaultProps={hasTime:!0,conditions:[!0]};var b=d.ZP.p.withConfig({displayName:"TimerCardDescriptionStyle__StyledDescription",componentId:"sc-an8yzt-0"})(["margin-top:",";"],(function(n){return n.theme.lengths.gap})),k=function(n){return n===o.xO?"Hourly":n===o.v0?"Daily":n===o.g0?"Weekly":n===o.iL?"Monrthly":n===o.ty?"Yearly":null},S=function(n){var e=n.start,i=n.end,t=n.period,r=n.description;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(j,{prefix:e&&i&&["Starts","Started"],timestamp:e}),(0,w.jsx)(j,{prefix:e&&i&&["Ends","Ended"],timestamp:i}),k(t)&&(0,w.jsxs)("p",{children:["Period: ",k(t)]}),r&&(0,w.jsx)(b,{children:r})]})},_=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=15046488e5;return(n-i+e)/o.Z7};function D(n){return!!n&&new Date(n).getTime()}var N=["description","start","end","period","hasTime"],P=function(n,e,i){for(var t=(0,g.R)(i,D(n));i&&e&&t>=e;)t-=i;return t},Z=(0,a.forwardRef)((function(n,e){var i=n.description,t=n.start,l=n.end,d=n.period,c=(n.hasTime,(0,m.Z)(n,N)),u=(0,a.useState)((0,g.R)(d,D(l))),v=(0,r.Z)(u,2),h=v[0],f=v[1],y=(0,a.useState)(P(t,h,d)),b=(0,r.Z)(y,2),k=b[0],Z=b[1];return(0,a.useEffect)((function(){var n=Math.max(k&&h?Math.min(k,h):k||h,(0,g.R)(o.Z7,0))-Date.now(),e=setTimeout((function(){f((0,g.R)(d,D(h))),Z(P(k,h,d))}),n);return function(){return clearTimeout(e)}}),[k,h,d]),x(h)||!h&&x(k+o.v0)||!d&&(x(h)||!h&&x(k+o.v0))?null:(0,w.jsxs)(s.Z,(0,p.Z)((0,p.Z)({ref:e,modalContent:(0,w.jsx)(S,{start:k,end:h,period:d,description:i}),style:{order:_(k,d?0:-10*o.ty)},highlight:x(k)},c),{},{children:[(0,w.jsx)(j,{prefix:k&&h&&"Starts",timestamp:k,conditions:"future"}),(0,w.jsx)(j,{prefix:k&&h&&"Ends",timestamp:h,conditions:["future",{timestamp:k,when:"past"}]})]}))}));Z.defaultProps={hasTime:!0};var A=Z,O=function(n){var e=n.items,i=n.nextCycle,t=n.currentItem,r=n.period;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("p",{children:["Period: ",k(r)]}),(0,w.jsxs)(u,{children:[e[t],(0,w.jsx)(j,{prefix:"Cycles",timestamp:i})]}),e.length>1&&(0,w.jsxs)(v,{children:[(0,w.jsx)("h3",{children:"Upcoming"}),e.map((function(n,o){var a=(o-t+e.length-1)%e.length;return(0,w.jsxs)("section",{style:{order:a},children:[n,(0,w.jsx)(j,{timestamp:i+a*r})]},o)}))]})]})},L=(0,a.forwardRef)((function(n,e){var i=n.title,t=n.items,l=n.start,d=n.period,c=n.icon,u=(0,a.useState)((0,g.R)(d,D(l))),v=(0,r.Z)(u,2),p=v[0],m=v[1],h=(0,a.useState)(Math.floor((Date.now()-l)/d)%t.length),f=(0,r.Z)(h,2),y=f[0],x=f[1];return(0,a.useEffect)((function(){var n=setTimeout((function(){m((0,g.R)(d,D(l))),x(Math.floor((Date.now()-l)/d)%t.length)}),p-Date.now());return function(){clearTimeout(n)}}),[l,d,p,t.length]),(0,w.jsxs)(s.Z,{ref:e,className:"cycle-card",title:i,style:{order:_(p,-5*o.ty)},modalContent:(0,w.jsx)(O,{items:t,nextCycle:p,currentItem:y,period:d}),icon:c,children:[t[y],(0,w.jsx)(j,{prefix:"Cycles",timestamp:p})]})}));L.defaultProps={period:o.v0};var M=L,C=i(3364),U=i(8521),I=i(9773),B=i(6938),T=i(4664);function V(n){var e=(null===n||void 0===n?void 0:n.screenshot)||(null===n||void 0===n?void 0:n.pgcrImage);return e?"https://bungie.net"+e:null}var R=i(4942),E=["None","Primary","Special","Heavy","Unknown"].reduce((function(n,e,i){var t;return Object.assign(n,(t={},(0,R.Z)(t,i,e),(0,R.Z)(t,e,i),t))}),{});var Q=function(n){var e,i=null===n||void 0===n?void 0:n.itemTypeDisplayName;return"Grenade Launcher"===i&&(null===n||void 0===n||null===(e=n.equippingBlock)||void 0===e?void 0:e.ammoType)===E["Heavy"]&&(i="Heavy "+i),i},H={Legendary:"#4e3263",Exotic:"#cdad34"};var F=function(n){return H[n]||"#04040e"},W=i(1933),q=[{name:"DestinyTracker",url:"https://destinytracker.com/destiny-2/db/items/",icon:"https://cod.tracker.gg/public/icons/icon192.png"},{name:"Gunsmith",url:"https://d2gunsmith.com/w/",icon:"https://d2gunsmith.com/favicon.ico"},{name:"Light.gg",url:"https://www.light.gg/db/en/items/",icon:"https://www.light.gg/Content/Images/new-icon.png"}];function z(n){var e=n.id;return(0,w.jsx)("ul",{className:"weapon-links",children:q.map((function(n){return(0,w.jsx)("li",{children:(0,w.jsxs)(C.Z,{className:"site-link",href:n.url+e,children:[n.icon&&(0,w.jsx)(I.Z,{src:n.icon,className:"site-icon"}),n.name]})},n.name)}))})}function K(n){var e,i,t=n.id,r=n.name,o=(0,W.useQuery)(["DestinyInventoryItemDefinition",t]),a=o.data,s=o.error,l=o.isLoading,d=function(n){var e,i,t,r,o,a,s,l,d,c=Array.isArray(n);n=c?n:[n];var u=(0,W.useQueries)(n.map((function(n){return{queryKey:["DestinyDamageTypeDefinition",n],enabled:!!n}})));return{weaponElement:c?u.map((function(n){var e,i;return null===n||void 0===n||null===(e=n.data)||void 0===e||null===(i=e.displayProperties)||void 0===i?void 0:i.name})):null===u||void 0===u||null===(e=u[0])||void 0===e||null===(i=e.data)||void 0===i||null===(t=i.displayProperties)||void 0===t?void 0:t.name,weaponElementIcon:c?u.map((function(n){var e,i,t,r;return(null===n||void 0===n||null===(e=n.data)||void 0===e||null===(i=e.displayProperties)||void 0===i?void 0:i.hasIcon)&&(null===n||void 0===n||null===(t=n.data)||void 0===t||null===(r=t.displayProperties)||void 0===r?void 0:r.icon)})):(null===u||void 0===u||null===(r=u[0])||void 0===r||null===(o=r.data)||void 0===o||null===(a=o.displayProperties)||void 0===a?void 0:a.hasIcon)&&(null===u||void 0===u||null===(s=u[0])||void 0===s||null===(l=s.data)||void 0===l||null===(d=l.displayProperties)||void 0===d?void 0:d.icon),data:u,isLoading:u.map((function(n){return n.isLoading})),someIsLoading:u.some((function(n){return n.isLoading}))}}(null===a||void 0===a?void 0:a.defaultDamageTypeHash),c=d.weaponElement,u=d.someIsLoading;if(l||u)return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{className:"destiny-weapon",children:[(0,w.jsx)(B.Z,{size:"inline"})," ",r&&(0,w.jsx)("span",{children:r})]})});if(s)return console.error(s),null;r||(r=null===a||void 0===a||null===(e=a.displayProperties)||void 0===e?void 0:e.name);var v=Q(a),p=null===a||void 0===a||null===(i=a.inventory)||void 0===i?void 0:i.tierTypeName,m=V(a);return(0,w.jsx)(T.Z,{triggerContent:(0,w.jsxs)("div",{className:"destiny-weapon a-link",children:[(0,w.jsx)(U.Z,{icon:["weapons",v],color:c})," ",(0,w.jsx)("span",{children:r})]}),tooltip:{contents:"".concat(p," ").concat(c," ").concat(v),backgroundColor:F(p)},children:(0,w.jsxs)("article",{className:"weapon-modal "+(null===p||void 0===p?void 0:p.toLowerCase()),children:[(0,w.jsx)("div",{className:"weapon-screenshot",style:{backgroundImage:"url(".concat(m,")")},children:(0,w.jsx)(z,{id:t})}),(0,w.jsxs)("div",{className:"weapon-header",children:[(0,w.jsx)(I.Z,{src:a.displayProperties.icon,className:"weapon-icon"}),(0,w.jsxs)("div",{className:"weapon-header-text",children:[(0,w.jsx)("h3",{children:r}),(0,w.jsxs)("p",{children:[p," |"," ",(0,w.jsx)(U.Z,{icon:["elements",c],color:c})," ",c," | ",(0,w.jsx)(U.Z,{icon:["weapons",v]})," ",v]})]})]})]})})}var G=[(0,w.jsx)(K,{id:"2782847179",name:"Blasphemer"}),(0,w.jsx)(K,{id:"2164448701",name:"Apostate"}),(0,w.jsx)(K,{id:"3067821200",name:"Heretic"})];function X(){return(0,w.jsx)(M,{title:"Altars of Sorrow Weapon",items:G,start:16488324e5,period:o.v0,icon:"https://www.bungie.net/common/destiny2_content/icons/58bf5b93ae8cfefc55852fe664179757.png"})}var $=i(8811),Y=i(1694),J=i.n(Y),nn=(0,a.forwardRef)((function(n,e){var i=n.id,t=n.dataArray,r=n.name,o=i?[].concat(i):[],s=(0,W.useQueries)(o.map((function(n){return{queryKey:["DestinyActivityDefinition",n],enabled:!!n}})));if(i){if(!s.every((function(n){return n.isSuccess})))return s.some((function(n){return n.isLoading}))?(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("article",{ref:e,className:"activity",children:(0,w.jsx)(B.Z,{size:"page",fadeIn:"none"})})}):(s.filter((function(n){return n.error})).map((function(n){return console.error(n.error)})),null);s=s.filter((function(n){return n.isSuccess})).map((function(n){return n.data}))}else s=t.map((function(n){return n.data}));return s.sort((function(n,e){return(null===n||void 0===n?void 0:n.activityLightLevel)-(null===e||void 0===e?void 0:e.activityLightLevel)})),(0,w.jsxs)("article",{ref:e,className:J()("activity","success"),children:[(0,w.jsx)(hn,{data:s[0],name:r}),s.map((function(n,e){return(0,w.jsxs)(a.Fragment,{children:[(0,w.jsx)(cn,{data:n}),(0,w.jsx)(gn,{data:n})]},e)}))]})}));nn.defaultProps={};var en=i(907);var tn=i(181);function rn(n){return function(n){if(Array.isArray(n))return(0,en.Z)(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||(0,tn.Z)(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var on=i(1982),an=[{class:"Overload",pattern:/Disruption|Overload/i},{class:"Unstoppable",pattern:/Stagger|Unstoppable/i},{class:"Barrier",pattern:/Shield-Piercing|Barrier/i}],sn=(0,a.forwardRef)((function(n,e){var i=n.champions,t=n.known_champions;if(!i||i.length<1)return null;var r=new Set;return i.map((function(n){return an.map((function(e){var i;return e.pattern.test(null===n||void 0===n||null===(i=n.displayProperties)||void 0===i?void 0:i.description)&&r.add(e.class)}))})),(0,w.jsxs)("section",{ref:e,className:"activity-champions",children:[(0,w.jsx)("h5",{className:"heading",children:"Champions"}),(0,w.jsx)("div",{className:"champions",children:rn(r).map((function(n,e){return(0,w.jsx)(on.Z,{contents:"".concat(n," Champions"),children:(0,w.jsxs)("div",{className:"champion "+n,children:[(0,w.jsx)(U.Z,{icon:["champions","modifiers",n],style:{filter:"brightness(".concat(t[n]&&"75%",")")}}),t[n]>0&&(0,w.jsx)("span",{className:"champion-amount",children:t[n]})]},e)},e)}))})]})}));sn.defaultProps={champions:[],known_champions:{}};var ln=(0,a.forwardRef)((function(n,e){var i,t=n.id,r=(0,W.useQuery)(["DestinyDestinationDefinition",t]),o=r.data,a=r.error;return r.isLoading?(0,w.jsxs)("p",{ref:e,className:"destination",children:[(0,w.jsx)(U.Z,{icon:["activities","Destination"]}),(0,w.jsx)(B.Z,{size:"inline"})]}):a?(console.error(a),null):(0,w.jsxs)("p",{ref:e,className:"destination",children:[(0,w.jsx)(U.Z,{icon:["activities","Destination"]}),null===o||void 0===o||null===(i=o.displayProperties)||void 0===i?void 0:i.name]})}));ln.defaultProps={};var dn=["className","data"],cn=(0,a.forwardRef)((function(n,e){var i,t=n.className,r=n.data,o=(0,m.Z)(n,dn),a=null===r||void 0===r||null===(i=r.selectionScreenDisplayProperties)||void 0===i?void 0:i.name;return(0,w.jsx)("h2",(0,p.Z)((0,p.Z)({ref:e,className:J()("activity-difficulty",null===a||void 0===a?void 0:a.toLowerCase(),t)},o),{},{children:a}))}));cn.defaultProps={};var un={"Scored Nightfall Strikes":"Nightfall"},vn=function(n){return un[n]||n},pn=function(n){var e,i,t,r,o,a,s,l,d,c,u,v,p=Array.isArray(n);n=p?n:[n];var m=(0,W.useQueries)(n.map((function(n){return{queryKey:["DestinyActivityModeDefinition",n],enabled:!!n}})));return{activityMode:p?m.map((function(n){var e,i;return vn(null===n||void 0===n||null===(e=n.data)||void 0===e||null===(i=e.displayProperties)||void 0===i?void 0:i.name)})):vn(null===m||void 0===m||null===(e=m[0])||void 0===e||null===(i=e.data)||void 0===i||null===(t=i.displayProperties)||void 0===t?void 0:t.name),activityModeIcon:p?m.map((function(n){var e,i,t,r;return(null===n||void 0===n||null===(e=n.data)||void 0===e||null===(i=e.displayProperties)||void 0===i?void 0:i.hasIcon)&&(null===n||void 0===n||null===(t=n.data)||void 0===t||null===(r=t.displayProperties)||void 0===r?void 0:r.icon)})):(null===m||void 0===m||null===(r=m[0])||void 0===r||null===(o=r.data)||void 0===o||null===(a=o.displayProperties)||void 0===a?void 0:a.hasIcon)&&(null===m||void 0===m||null===(s=m[0])||void 0===s||null===(l=s.data)||void 0===l||null===(d=l.displayProperties)||void 0===d?void 0:d.icon),activityModeDescription:p?m.map((function(n){var e,i;return null===n||void 0===n||null===(e=n.data)||void 0===e||null===(i=e.displayProperties)||void 0===i?void 0:i.description})):null===m||void 0===m||null===(c=m[0])||void 0===c||null===(u=c.data)||void 0===u||null===(v=u.displayProperties)||void 0===v?void 0:v.description,data:m,isLoading:m.map((function(n){return n.isLoading})),someIsLoading:m.some((function(n){return n.isLoading}))}},mn=function(n){var e=n.hash,i=pn(e),t=i.activityMode,r=i.activityModeIcon,o=i.someIsLoading;return(0,w.jsxs)("h5",{className:"activity-type",children:[(0,w.jsx)(I.Z,{src:r}),o?(0,w.jsx)(B.Z,{size:"inline"}):t]})},hn=(0,a.forwardRef)((function(n,e){var i=n.data,t=n.name;t||(t=i.originalDisplayProperties.name),"Nightfall"===i.originalDisplayProperties.name&&(t=i.originalDisplayProperties.description);var r=V(i);return(0,w.jsxs)("section",{ref:e,className:"activity-header",style:{backgroundImage:"url(".concat(r,")")},children:[(0,w.jsx)(mn,{hash:null===i||void 0===i?void 0:i.directActivityModeHash}),(0,w.jsx)("h1",{className:"activity-name",children:t}),(0,w.jsx)(ln,{id:i.destinationHash})]})}));hn.defaultProps={};var fn=(0,a.forwardRef)((function(n,e){var i,t,r,o,a=n.data,s=null===a||void 0===a||null===(i=a.displayProperties)||void 0===i?void 0:i.name,l=null===a||void 0===a||null===(t=a.displayProperties)||void 0===t?void 0:t.icon,d=null!==a&&void 0!==a&&null!==(r=a.displayProperties)&&void 0!==r&&r.description?(0,w.jsx)("p",{children:null===a||void 0===a||null===(o=a.displayProperties)||void 0===o?void 0:o.description.replace(/(?:[\s.,]*\n+[\s.,]*)+/g,"; ").replace(/(\[Disruption|Stagger\])/g,"|$1|").split("|")}):null;if(!l||!s)return null;var c=[{class:"arc",pattern:/arc/i},{class:"solar",pattern:/solar/i},{class:"void",pattern:/void/i},{class:"stasis",pattern:/stasis/i}];return(0,w.jsxs)("section",{ref:e,className:"activity-modifier",children:[(0,w.jsx)(I.Z,{className:J()("icon",c.filter((function(n){return n.pattern.test(s)})).map((function(n){return n.class}))),src:l,title:s}),(0,w.jsxs)("div",{className:"description",children:[(0,w.jsx)("h6",{className:J()("heading",c.filter((function(n){return n.pattern.test(s)})).map((function(n){return n.class}))),children:s}),d]})]})}));fn.defaultProps={};var yn={0:{known_shields:{Void:0,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:0,Unstoppable:0}},480864726:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:3,Overload:0,Unstoppable:1}},480864721:{known_shields:{Void:0,Solar:0,Arc:1},known_champions:{Barrier:5,Overload:0,Unstoppable:2}},145221019:{known_shields:{Void:5,Solar:0,Arc:7},known_champions:{Barrier:0,Overload:1,Unstoppable:2}},145221020:{known_shields:{Void:5,Solar:0,Arc:4},known_champions:{Barrier:0,Overload:4,Unstoppable:2}},3094493720:{known_shields:{Void:0,Solar:2,Arc:4},known_champions:{Barrier:3,Overload:0,Unstoppable:1}},3094493727:{known_shields:{Void:0,Solar:2,Arc:2},known_champions:{Barrier:3,Overload:0,Unstoppable:4}},2936791996:{known_shields:{Void:4,Solar:0,Arc:0},known_champions:{Barrier:2,Overload:2,Unstoppable:0}},2936791995:{known_shields:{Void:3,Solar:0,Arc:0},known_champions:{Barrier:5,Overload:4,Unstoppable:0}},1898610132:{known_shields:{Void:9,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:2,Unstoppable:2}},1898610131:{known_shields:{Void:10,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:4,Unstoppable:3}},660710127:{known_shields:{Void:1,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:2,Unstoppable:3}},660710120:{known_shields:{Void:1,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:3,Unstoppable:4}},4206916275:{known_shields:{Void:17,Solar:2,Arc:0},known_champions:{Barrier:0,Overload:1,Unstoppable:3}},4206916276:{known_shields:{Void:29,Solar:2,Arc:1},known_champions:{Barrier:0,Overload:3,Unstoppable:5}},3911969233:{known_shields:{Void:0,Solar:0,Arc:4},known_champions:{Barrier:4,Overload:0,Unstoppable:3}},3911969238:{known_shields:{Void:0,Solar:0,Arc:1},known_champions:{Barrier:7,Overload:0,Unstoppable:3}},184186581:{known_shields:{Void:0,Solar:10,Arc:0},known_champions:{Barrier:3,Overload:2,Unstoppable:0}},184186578:{known_shields:{Void:0,Solar:10,Arc:0},known_champions:{Barrier:4,Overload:6,Unstoppable:0}},567131512:{known_shields:{Void:0,Solar:8,Arc:3},known_champions:{Barrier:3,Overload:2,Unstoppable:0}},567131519:{known_shields:{Void:0,Solar:8,Arc:3},known_champions:{Barrier:4,Overload:6,Unstoppable:0}},3678847129:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:0,Overload:3,Unstoppable:2}},3678847134:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:0,Overload:3,Unstoppable:4}}};var xn=function(n){return yn[n]||{known_shields:void 0,known_champions:void 0}},gn=(0,a.forwardRef)((function(n,e){var i=n.data,t=(0,W.useQueries)(i.modifiers.map((function(n){return{queryKey:["DestinyActivityModifierDefinition",n.activityModifierHash]}})));if(!t.every((function(n){return n.isSuccess})))return t.some((function(n){return n.isLoading}))?(0,w.jsx)("section",{ref:e,className:"activity-modifiers",children:(0,w.jsx)(B.Z,{size:"section"})}):(t.filter((function(n){return n.error})).map((function(n){return console.error(n.error)})),null);var r=xn(null===i||void 0===i?void 0:i.hash),o=r.known_shields,a=r.known_champions,s=t.filter((function(n){return n.isSuccess&&n.data})).map((function(n){return n.data})),l=s.filter((function(n){return/shielded foes/i.test(n.displayProperties.name)})),d=s.filter((function(n){return/champion foes/i.test(n.displayProperties.name)})),c=s.filter((function(n){return!/(shielded|champion) foes|champions: mob| modifiers$/i.test(n.displayProperties.name)}));return(0,w.jsxs)("section",{ref:e,className:"activity-modifiers",children:[l.length>0&&(0,w.jsx)(jn,{shields:l,known_shields:o}),d.length>0&&(0,w.jsx)(sn,{champions:d,known_champions:a}),c.length>0&&(0,w.jsxs)("section",{className:"other-modifiers",children:[(0,w.jsx)("h5",{className:"heading",children:"Modifiers"}),(0,w.jsx)("div",{className:"modifiers",children:c.map((function(n,e){return(0,w.jsx)(fn,{data:n},e)}))})]})]})}));gn.defaultProps={};var wn=[{name:"Arc",pattern:/arc/i},{name:"Solar",pattern:/solar/i},{name:"Void",pattern:/void/i},{name:"Stasis",pattern:/stasis/i}],jn=(0,a.forwardRef)((function(n,e){var i=n.shields,t=n.known_shields;if(!i||i.length<1)return null;var r=new Set;return i.map((function(n){return wn.map((function(e){var i;return e.pattern.test(null===n||void 0===n||null===(i=n.displayProperties)||void 0===i?void 0:i.description)&&r.add(e.name)}))})),(0,w.jsxs)("section",{ref:e,className:"activity-shields",children:[(0,w.jsx)("h5",{className:"heading",children:"Shields"}),(0,w.jsx)("div",{className:"shields",children:rn(r).map((function(n,e){return(0,w.jsx)(on.Z,{contents:"".concat(n," Shields"),children:(0,w.jsxs)("div",{className:"shield",children:[(0,w.jsx)(U.Z,{icon:["elements",n],color:n}),t[n]>0&&(0,w.jsx)("span",{className:"shield-amount",children:t[n]})]},e)},e)}))})]})}));jn.defaultProps={shields:[],known_shields:{}};var bn=nn;function kn(){var n,e,i=(0,W.useQuery)("Milestones"),t=(null===i||void 0===i||null===(n=i.data)||void 0===n||null===(e=n[1942283261])||void 0===e?void 0:e.activities)||[],r=(0,W.useQueries)(t.map((function(n){return{queryKey:["DestinyActivityDefinition",n.activityHash],enabled:!(null===n||void 0===n||!n.activityHash)}})));return i.isSuccess&&r.every((function(n){return n.isSuccess}))?(0,w.jsx)(M,{title:"Nightfall",start:16534116e5,period:o.g0,items:[(0,w.jsx)(T.Z,{triggerContent:r[0].data.displayProperties.description,children:(0,w.jsx)(bn,{dataArray:r})})],icon:"https://www.bungie.net/common/destiny2_content/icons/48dda413d9f412ca2b10fd56a35a2665.png",children:r[0].data.displayProperties.description}):null}function Sn(n,e){var i="undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!i){if(Array.isArray(n)||(i=(0,tn.Z)(n))||e&&n&&"number"===typeof n.length){i&&(n=i);var t=0,r=function(){};return{s:r,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){i=i.call(n)},n:function(){var n=i.next();return a=n.done,n},e:function(n){s=!0,o=n},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}function _n(){var n=function(){var n,e,i=(0,W.useQuery)(["buddyData","featuredDungeon"]).data,t=null===i||void 0===i?void 0:i.schedule,r=null===t||void 0===t||null===(n=t[0])||void 0===n?void 0:n.period;if(!((null===t||void 0===t||null===(e=t[0])||void 0===e?void 0:e.end)>Date.now()))return{period:r,start:void 0,items:void 0};var o,a=[],s=Date.now(),l=!1,d=Sn(t);try{for(d.s();!(o=d.n()).done;){var c=o.value;if(a.includes(null===c||void 0===c?void 0:c.name)){l=!0;break}a.unshift(null===c||void 0===c?void 0:c.name),s=c.start}}catch(u){d.e(u)}finally{d.f()}return{period:r,start:s,items:l?a:[null===a||void 0===a?void 0:a[(null===a||void 0===a?void 0:a.length)-1]]}}(),e=n.period,i=n.start,t=n.items;return void 0===t?null:(0,w.jsx)(M,{title:"Featured Dungeon",items:t,start:i,period:e,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_f20ebb76bee675ca429e470cec58cc7b.png"})}function Dn(){return(0,w.jsx)(A,{title:"Lightfall Raid",start:16784676e5,end:1678554e6,icon:"https://www.bungie.net/common/destiny2_content/icons/8b1bfd1c1ce1cab51d23c78235a6e067.png"})}var Nn="DestinyActivityDefinition";function Pn(n){var e,i=n.name,t=(0,W.useQuery)(["Search",Nn,i]),r=t.data,o=t.error,a=t.isLoading,s=(null===r||void 0===r||null===(e=r.results)||void 0===e?void 0:e.results)||[],l=(0,W.useQueries)(s.map((function(n){return{queryKey:[Nn,n.hash],enabled:!(null===n||void 0===n||!n.hash)}}))),d=l.map((function(n){var e;return null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.directActivityModeHash})),c=pn(d),u=c.activityMode,v=c.someIsLoading;if(a||l.some((function(n){return n.isLoading}))||v)return(0,w.jsx)("article",{className:"lost-sector",children:(0,w.jsx)(B.Z,{size:"page",fadeIn:"none"})});if(o||l.some((function(n){return n.error})))return o&&console.error(o),l.map((function(n){return n.error&&console.error(n.error)})),(0,w.jsx)("article",{className:"lost-sector",children:(0,w.jsx)("h2",{className:"error",children:"Can't find Lost Sector info..."})});var p=l.filter((function(n,e){return"Lost Sector"===u[e]&&n.data.displayProperties.name.startsWith(i+": ")&&n.data.index===l.reduce((function(e,i){return i.data.displayProperties.name===n.data.displayProperties.name?Math.max(e,i.data.index):e}),0)}));return 0===p.length?(0,w.jsx)("article",{className:"lost-sector",children:(0,w.jsx)("h2",{className:"error",children:"Can't find Lost Sector info..."})}):(0,w.jsx)(bn,{dataArray:p})}function Zn(n,e){return e?Zn(e,n%e):n}function An(n,e){return n*e/Zn(n,e)}function On(n){var e=n.location;return(0,w.jsx)(T.Z,{triggerContent:(0,w.jsxs)("span",{className:"a-link",children:[e.name," - ",e.location]}),background:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_7d11acd7d5a3daebc0a0c906452932d6.png",children:(0,w.jsx)(Pn,{name:e.name})})}function Ln(){var n=function(){var n,e,i,t,r,o,a,s,l,d,c,u,v,p=(0,W.useQuery)(["buddyData","lostSectors"]).data,m=null===p||void 0===p||null===(n=p.schedule)||void 0===n?void 0:n.period,h=null===p||void 0===p||null===(e=p.schedule)||void 0===e?void 0:e.start,f=null===p||void 0===p||null===(i=p.schedule)||void 0===i?void 0:i.locations,y=null===(t=f)||void 0===t?void 0:t.length;return null===(null===(r=f)||void 0===r?void 0:r[y-1])&&(f=h+(y-1)*m<Date.now()?void 0:[null===(v=f)||void 0===v?void 0:v[y-2]]),void 0!==f&&(f=f.map((function(n){var e,i;return{name:n,location:null===p||void 0===p||null===(e=p.info)||void 0===e||null===(i=e[n])||void 0===i?void 0:i.location}}))),{period:m,start:h,locations:f,drops:(null===p||void 0===p||null===(o=p.schedule)||void 0===o||null===(a=o.drops)||void 0===a?void 0:a.length)<4?[null===p||void 0===p||null===(s=p.schedule)||void 0===s||null===(l=s.drops)||void 0===l?void 0:l[(null===p||void 0===p||null===(d=p.schedule)||void 0===d||null===(c=d.drops)||void 0===c?void 0:c.length)-1]]:null===p||void 0===p||null===(u=p.schedule)||void 0===u?void 0:u.drops}}(),e=n.period,i=n.start,t=n.locations,r=n.drops,o=(0,a.useMemo)((function(){var n=[];do{n.push((0,w.jsxs)("div",{children:[(0,w.jsx)(On,{location:null===t||void 0===t?void 0:t[n.length%(null===t||void 0===t?void 0:t.length)]})," (",null===r||void 0===r?void 0:r[n.length%(null===r||void 0===r?void 0:r.length)],")"]}))}while(n.length<An(null===r||void 0===r?void 0:r.length,null===t||void 0===t?void 0:t.length));return n}),[r,t]);return void 0===t?null:(0,w.jsx)(M,{title:"Legend & Master Lost Sector",items:o,start:i,period:e,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_7d11acd7d5a3daebc0a0c906452932d6.png"})}function Mn(){var n=function(){var n,e,i=(0,W.useQuery)(["buddyData","featuredRaid"]).data,t=null===i||void 0===i?void 0:i.schedule,r=null===t||void 0===t||null===(n=t[0])||void 0===n?void 0:n.period;if(!((null===t||void 0===t||null===(e=t[0])||void 0===e?void 0:e.end)>Date.now()))return{period:r,start:void 0,items:void 0};var o,a=[],s=Date.now(),l=!1,d=Sn(t);try{for(d.s();!(o=d.n()).done;){var c=o.value;if(a.includes(null===c||void 0===c?void 0:c.name)){l=!0;break}a.unshift(null===c||void 0===c?void 0:c.name),s=c.start}}catch(u){d.e(u)}finally{d.f()}return{period:r,start:s,items:l?a:[null===a||void 0===a?void 0:a[(null===a||void 0===a?void 0:a.length)-1]]}}(),e=n.period,i=n.start,t=n.items;return void 0===t?null:(0,w.jsx)(M,{title:"Featured Raid",items:t,start:i,period:e,icon:"https://www.bungie.net/common/destiny2_content/icons/8b1bfd1c1ce1cab51d23c78235a6e067.png"})}var Cn=i(9921),Un=[{title:"Daily Reset",start:Cn.OW,period:o.v0,icon:"https://cdn.jsdelivr.net/gh/game-icons/icons@c10320edc7ae3f28a29d172e0dd3f029411825d7/delapouite/clockwise-rotation.svg"},{title:"Weekly Reset",start:Cn.eM,period:o.g0,icon:"https://cdn.jsdelivr.net/gh/game-icons/icons@c10320edc7ae3f28a29d172e0dd3f029411825d7/delapouite/clockwise-rotation.svg",link:"https://kyber3000.com/reset"},{title:"Weekend Activities",start:Cn.Wp,end:Cn.VT,period:o.g0,icon:"https://cdn.jsdelivr.net/gh/game-icons/icons@c10320edc7ae3f28a29d172e0dd3f029411825d7/delapouite/clockwise-rotation.svg",description:(0,w.jsxs)("ul",{children:[(0,w.jsx)("li",{children:(0,w.jsx)(C.Z,{href:"https://kyber3000.com/Xur",children:"Xur"})}),(0,w.jsx)("li",{children:(0,w.jsx)(C.Z,{href:"https://kyber3000.com/Trials",children:"Trials of Osiris"})})]})}];function In(){return Un.map((function(n,e){return(0,w.jsx)(A,(0,p.Z)({},n),e)}))}function Bn(){var n,e,i=(0,W.useQuery)("Settings"),t=null===i||void 0===i||null===(n=i.data)||void 0===n||null===(e=n.destiny2CoreSettings)||void 0===e?void 0:e.currentSeasonHash,r=(0,W.useQuery)(["DestinySeasonDefinition",t],{enabled:!!t}),o=r.isLoading,a=r.error,s=r.data;return i.isLoading||o?null:i.error||a?(console.error(i.error),null):(0,w.jsx)(A,{title:"Season ".concat(s.seasonNumber,": ").concat(s.displayProperties.name),description:s.displayProperties.description,start:s.startDate,end:s.endDate,icon:"".concat("https://bungie.net").concat(s.displayProperties.icon)})}var Tn=[(0,w.jsx)(K,{id:"2721157927",name:"Tarnation"}),(0,w.jsx)(K,{id:"1399109800",name:"Fel Taradiddle"}),(0,w.jsx)(K,{id:"3865728990",name:"Father's Sins"}),(0,w.jsx)(K,{id:"927567426",name:"Come to Pass"})];function Vn(){return(0,w.jsx)(M,{title:"Wellspring Weapon",items:Tn,start:1648746e6,period:o.v0,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyMilestoneDefinition_feb5aecca544ab023ecf3b74ac8f509b.png"})}var Rn=[{name:"Destiny Server and Update Status",link:"https://help.bungie.net/hc/en-us/articles/360049199271-Destiny-Server-and-Update-Status"},{name:"Bungie Maintenance Notifications",link:"https://twitter.com/BungieHelp"},{name:"Patch Notes",link:"https://www.bungie.net/en/Explore/Category?category=Updates"}];function En(){var n=a.useState(Date.now()),e=(0,r.Z)(n,2),i=e[0],t=e[1];return a.useEffect((function(){var n=setTimeout((function(){t((function(){return Date.now()}))}),o.xO-i%o.xO);return function(){return clearTimeout(n)}}),[i]),(0,w.jsxs)("div",{className:"timers-wrapper",children:[(0,w.jsx)("h1",{children:"Timers"}),(0,w.jsxs)("div",{className:"timers",children:[(0,w.jsx)(Dn,{}),(0,w.jsx)(kn,{}),(0,w.jsx)(Ln,{}),(0,w.jsx)(Vn,{}),(0,w.jsx)(X,{}),(0,w.jsx)(_n,{}),(0,w.jsx)(Mn,{}),(0,w.jsx)(Bn,{}),(0,w.jsx)(In,{})]}),(0,w.jsx)("div",{className:"links",children:Rn.map((function(n){return(0,w.jsx)($.Z,{href:n.link,children:n.name},n.name)}))})]})}}}]);
//# sourceMappingURL=621.5d81c697.chunk.js.map