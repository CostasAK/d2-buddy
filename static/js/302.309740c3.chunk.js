"use strict";(self.webpackChunkd2_buddy=self.webpackChunkd2_buddy||[]).push([[302],{2866:function(e,n,t){t.d(n,{Z:function(){return g}});var r=t(2791),a=t(1694),s=t.n(a),i=t(184),o=function(e){var n=e.children,t=e.title,a=e.titleRule,o=e.icon,c=(0,r.useMemo)((function(){return o?(0,r.isValidElement)(o)?(0,r.cloneElement)(o,{className:s()("icon",o.props.className)}):(0,i.jsx)("img",{className:"icon",src:o,alt:""}):null}),[o]);return(0,i.jsxs)(i.Fragment,{children:[c&&c,t&&(0,i.jsx)("h4",{className:s()("title",{"title-rule":a}),children:t}),n&&(0,i.jsx)("section",{className:"card-content",children:n})]})};o.defaultProps={titleRule:!1};var c=t(1413),l=t(5987),d=t(8722),u=["children","className","modalContent","customModal","title","icon"],m=(0,r.forwardRef)((function(e,n){var t=e.children,r=e.className,a=e.modalContent,s=e.customModal,o=e.title,m=e.icon,p=(0,l.Z)(e,u);return a?(0,i.jsx)(d.Z,{triggerContent:t,className:r,background:m,children:s?a:(0,i.jsxs)("article",(0,c.Z)((0,c.Z)({ref:n,className:"modal-text"},p),{},{children:[o&&(0,i.jsx)("h1",{className:"title",children:o}),(0,i.jsx)("section",{className:"modal-content",children:a})]}))}):t}));m.defaultProps={customModal:!1};var p=["children","className","hasModal","link"],h=(0,r.forwardRef)((function(e,n){var t=e.children,r=e.className,a=e.hasModal,o=e.link,d=(0,l.Z)(e,p),u=s()("card",{clickable:a||o},r);return a?(0,i.jsx)("article",(0,c.Z)((0,c.Z)({ref:n,className:u},d),{},{children:t})):o?o.startsWith("steam://")?(0,i.jsx)("a",(0,c.Z)((0,c.Z)({ref:n,className:u,href:o},d),{},{children:t})):(0,i.jsx)("a",(0,c.Z)((0,c.Z)({ref:n,className:u,href:o,target:"_blank",rel:"noreferrer"},d),{},{children:t})):(0,i.jsx)("article",(0,c.Z)((0,c.Z)({ref:n,className:u},d),{},{children:t}))})),f=t(2007),v=t.n(f),y=(0,r.forwardRef)((function(e,n){var t=e.title,r=e.titleRule,a=e.cardContent,c=e.modalContent,l=e.customModal,d=e.link,u=e.icon,p=e.className,f=e.floatIcon,v=e.order;return(0,i.jsx)(m,{className:p,modalContent:c,title:t,icon:u,customModal:l,children:(0,i.jsx)(h,{className:s()(p,{"floating-icon":f,"side-icon":!f&&u}),hasModal:!!c,link:d,style:{order:v},children:(0,i.jsx)(o,{icon:u,title:t,titleRule:void 0===r?!f:r,children:a})})})}));y.propTypes={title:v().string,titleRule:v().bool,cardContent:v().oneOfType([v().string,v().element]),modalContent:v().oneOfType([v().string,v().object]),link:v().string,icon:v().oneOfType([v().string,v().element]),className:v().string,floatIcon:v().bool,customModal:v().bool},y.defaultProps={floatIcon:!1,customModal:!1};var g=y},4996:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(935),a=t(184),s={weapons:{"Combat Bow":{symbol:"\ue099",name:"Bow"},"Auto Rifle":{symbol:"\ue100",name:"Auto Rifle"},"Pulse Rifle":{symbol:"\ue101",name:"Pulse Rifle"},"Scout Rifle":{symbol:"\ue102",name:"Scout Rifle"},"Hand Cannon":{symbol:"\ue103",name:"Hand Cannon"},"Submachine Gun":{symbol:"\ue107",name:"Submachine Gun"},Sidearm:{symbol:"\ue109",name:"Sidearm"},Shotgun:{symbol:"\ue104",name:"Shotgun"},"Sniper Rifle":{symbol:"\ue105",name:"Sniper Rifle"},"Fusion Rifle":{symbol:"\ue106",name:"Fusion Rifle"},"Grenade Launcher":{symbol:"\ue155",name:"Grenade Launcher"},Glaive:{symbol:"\ue156",name:"Glaive"},"Rocket Launcher":{symbol:"\ue108",name:"Rocket Launcher"},"Heavy Grenade Launcher":{symbol:"\ue113",name:"Heavy Grenade Launcher"},"Linear Fusion Rifle":{symbol:"\ue152",name:"Linear Fusion Rifle"},Sword:{symbol:"\ue153",name:"Sword"},"Machine Gun":{symbol:"\ue154",name:"Machine Gun"},"Trace Rifle":{symbol:"\ue138",name:"Trace Rifle"}},elements:{Kinetic:{symbol:"",name:"Kinetic"},Void:{symbol:"\ue144",name:"Void"},Solar:{symbol:"\ue140",name:"Solar"},Arc:{symbol:"\ue143",name:"Arc"},Stasis:{symbol:"\ue139",name:"Stasis"}},activities:{LostSector:{symbol:"\ue145",name:"Lost Sector"},Destination:{symbol:(0,a.jsx)("img",{src:"https://www.bungie.net/common/destiny2_content/icons/c60303e278aa5fc566a04e98c3d8024c.png",alt:"",style:{aspectRatio:"1 / 1",maxWidth:"96px",maxHeight:"96px",height:"1.5em",lineHeight:"1"}}),name:"Destination"}},champions:{modifiers:{Overload:{symbol:(0,a.jsx)("img",{src:"https://bungie.net/common/destiny2_content/icons/c4d9c4f1ec3167e272286bb155dc15f4.png",alt:"",style:{aspectRatio:"1 / 1",maxWidth:"60px",maxHeight:"60px",height:"1.5em",lineHeight:"1"}}),name:"Overload Champions"},Unstoppable:{symbol:(0,a.jsx)("img",{src:"https://bungie.net/common/destiny2_content/icons/0e40371c49f0beac97e5fd9dc2ea9348.png",alt:"",style:{aspectRatio:"1 / 1",maxWidth:"60px",maxHeight:"60px",height:"1.5em",lineHeight:"1"}}),name:"Unstoppable Champions"},Barrier:{symbol:(0,a.jsx)("img",{src:"https://bungie.net/common/destiny2_content/icons/2ac9bcf4a961c3b3e31da7b76a5a87f9.png",alt:"",style:{aspectRatio:"1 / 1",maxWidth:"60px",maxHeight:"60px",height:"1.5em",lineHeight:"1"}}),name:"Barrier Champions"}}},controllers:{playstation:{Cross:{symbol:"\ue025",name:"Cross"}}}},i=[].concat(["Kinetic","Arc","Solar","Void","Stasis"]);var o=function(e){var n=e.icon,t=e.color,o=e.style,c=e.className,l=e.onClick,d=e.tooltip;try{var u=n.reduce((function(e,n){return e[n]}),s);return(0,a.jsx)(r.Z,{contents:d,children:(0,a.jsx)("span",{className:"destiny-icon "+n.join(" ")+" "+(i.includes(t)?t.toLowerCase():"")+" "+(c||""),style:o,onClick:l,children:u.symbol})})}catch(m){return console.warn("Unknown Destiny icon: ".concat(n,". ").concat(m)),null}}},8722:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(1413),a=t(885),s=t(2791),i=t(4996),o=t(9136),c=t(7948),l=t.n(c),d=t(9078),u=t(935),m=t(184);function p(e){var n=e.triggerContent,t=e.className,c=e.tooltip,p=e.background,h=e.children,f=(0,s.useState)(!1),v=(0,a.Z)(f,2),y=v[0],g=v[1],x=(0,s.useState)(0),j=(0,a.Z)(x,2),w=j[0],b=j[1],k=(0,s.useMemo)((function(){return(0,s.isValidElement)(n)?(0,s.cloneElement)(n,{onClick:function(){return g(!0)}}):n}),[n]),S=(0,s.useCallback)((function(e,n){return(0,m.jsxs)(l(),{isOpen:e,onRequestClose:function(){return g(!1)},className:"modal "+(t||""),overlayClassName:"modal-overlay",closeTimeoutMS:250,appElement:document.getElementById("root"),style:n?{content:{width:n+2}}:{},children:[(0,m.jsx)(i.Z,{icon:["controllers","playstation","Cross"],className:"close",onClick:function(){return g(!1)},tooltip:"Close Pop-up"}),(0,m.jsx)("div",{className:"background",style:{backgroundImage:"url(".concat(p,")")}}),(0,m.jsx)(d.Z,{className:"modal-scroll",children:(0,m.jsx)(o.Z,{bounds:!0,onResize:function(e){b(e.bounds.width)},children:function(e){var n=e.measureRef;return(0,m.jsx)("div",{ref:n,className:"modal-inner",children:h})}})})]})}),[p,h,t]);return(0,m.jsxs)(m.Fragment,{children:[c?(0,m.jsx)(u.Z,(0,r.Z)((0,r.Z)({},c),{},{children:k})):k,S(y,w)]})}},935:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(1413),a=t(885),s=t(2791),i=t(5733),o=t(184);function c(e){var n=e.trigger,t=e.backgroundColor,c=e.children,l=(0,s.useState)(null),d=(0,a.Z)(l,2),u=d[0],m=d[1],p=(0,s.useState)(null),h=(0,a.Z)(p,2),f=h[0],v=h[1],y=(0,i.D)(n,u,{modifiers:[{name:"arrow",options:{element:f}},{name:"offset",options:{offset:[0,8]}}]}),g=y.styles,x=y.attributes;return(0,o.jsxs)("div",(0,r.Z)((0,r.Z)({className:"popper",ref:m,style:(0,r.Z)((0,r.Z)({},g.popper),{},{backgroundColor:t})},x.popper),{},{children:[c,(0,o.jsx)("div",{className:"popper-arrow",ref:v,style:g.arrow})]}))}function l(e){var n=e.contents,t=e.backgroundColor,r=e.children,i=(0,s.useState)(null),l=(0,a.Z)(i,2),d=l[0],u=l[1],m=(0,s.useState)(!1),p=(0,a.Z)(m,2),h=p[0],f=p[1],v=(0,s.useMemo)((function(){return n?(0,s.isValidElement)(r)?(0,s.cloneElement)(r,{ref:u,onMouseOver:function(){return f(!0)},onMouseOut:function(){return f(!1)},className:r.props.className+" popper-content"}):(0,o.jsx)("div",{ref:u,className:"popper-content",children:r}):r}),[r,n]);return(0,o.jsxs)(o.Fragment,{children:[v,h&&(0,o.jsx)(c,{trigger:d,backgroundColor:t,children:n})]})}},4302:function(e,n,t){t.r(n),t.d(n,{default:function(){return Ie}});var r=t(2982),a=t(885),s=t(5861),i=t(7757),o=t.n(i),c=t(7184),l=t(7892),d=t.n(l);function u(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!n)return m(e,!1);var t=new Intl.DateTimeFormat(void 0,{hour:"numeric"}).formatToParts(new Date(e));return void 0!==t.dayPeriod?d()(e).format("h:mm A"):d()(e).format("H:mm")}function m(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return d()(e).format("ddd, D MMM YYYY")+(n?" "+u(e):"")}var p=t(2791),h=t(2866),f=6e4,v=36e5,y=24*v,g=30*y,x=365*y;function j(e){if(Math.abs(e)<750)return"now";var n=function(e){var n=Math.abs(e);if(n<6e4)return"less than 1 minute";if(n<9e4)return"1 minute";if(n<=345e4)return"".concat(Math.round(n/f)," minutes");if(n<22*v)return"".concat(n%v/v<.875?Math.floor(n/v):Math.ceil(n/v)).concat(n%v/v<.125||n%v/v>=.875?"":n%v/v<.375?"\xbc":n%v/v<.625?"\xbd":"\xbe"," hour").concat(n<675e4?"":"s");if(n<1.5*y)return"1 day";if(n<26*y)return"".concat(Math.round(n/y)," days");if(n<46*y)return"1 month";if(n<11*g)return"".concat(Math.round(n/g)," months");if(n<18*g)return"1 year";return"".concat(Math.round(n/x)," years")}(e);return e<0?"".concat(n," ago"):"in ".concat(n)}function w(e){return e&&e<=Date.now()}function b(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now()+1e3;if(!e||!n)return n;var r=(n-=n%1e3)%e,a=(t+=1e3-t%1e3)%e||0;return a<r?t-a+r:t-a+r+e}function k(e){return!!e&&new Date(e).getTime()}var S=t(184),N=864e5;function _(e){var n=e.name,t=e.items,r=e.start,s=e.period,i=e.icon,o=(0,p.useState)(Date.now()),c=(0,a.Z)(o,2),l=c[0],d=c[1],f=(0,p.useState)(b(s,k(r))),v=(0,a.Z)(f,2),y=v[0],g=v[1];function x(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!n&&w(e-N)?u(e):m(e)}(0,p.useEffect)((function(){var e=setTimeout((function(){d((function(){return Date.now()})),g((function(){return b(s,k(r))}))}),1e3);return function(){clearTimeout(e)}}),[r,s,y,l]);var _=(y-157788e6)/6e4,Z=Math.floor((l-r)/s)%t.length,R=(0,S.jsxs)(S.Fragment,{children:[t[Z],"Cycles "+function(e){var n=j(e-l);return w(e-N)?n+", at "+x(e):n+", on "+x(e)}(y)]}),C=(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("section",{children:R}),(0,S.jsxs)("section",{className:"upcoming-items",children:[(0,S.jsx)("h3",{children:"Upcoming"}),t.map((function(e,n){var r=(n-Z+t.length-1)%t.length;return(0,S.jsxs)("section",{style:{order:r},children:[e,x(y+r*s,!0)]},n)}))]})]});return(0,S.jsx)(h.Z,{className:"cycle-card",title:n,order:_,cardContent:R,modalContent:C,icon:i})}_.defaultProps={period:N};var Z=t(4996),R=t(4036),C=t(8722);var D=function(e){var n=e.Response.screenshot||e.Response.pgcrImage;return n?"https://bungie.net"+n:null},M=t(6107),A=function(e,n){return Object.keys(e).find((function(t){return e[t]===n}))};var P=function(e){return A(M.BN,e.Response.defaultDamageType).replace(/thermal/i,"Solar")};var T=function(e){var n=e.Response.itemTypeDisplayName;return"Grenade Launcher"===n&&M.JS.Heavy===e.Response.equippingBlock.ammoType&&(n="Heavy "+n),n},B={Legendary:"#4e3263",Exotic:"#cdad34"};var O=function(e){return B[e]||"#04040e"},U=t(4569),L=t.n(U)().create({baseURL:"https://www.bungie.net/Platform",headers:{Accept:"application/json","X-API-KEY":"8b8aaf0af60d41d5bccbc3af3445ef65"}}),V=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return L({url:e,method:n,headers:t})},E=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Array.isArray(e)?e:[e];return Promise.all(r.map((function(e){return L({url:e,method:n,headers:t})})))},H=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",t=arguments.length>2?arguments[2]:void 0,r=(0,p.useState)(Array.isArray(e)?new Array(e.length):{}),s=(0,a.Z)(r,2),i=s[0],o=s[1],c=(0,p.useState)(!1),l=(0,a.Z)(c,2),d=l[0],u=l[1],m=(0,p.useState)(!0),h=(0,a.Z)(m,2),f=h[0],v=h[1],y=(0,p.useCallback)((function(){return E(e,n,t).then((function(e){o(e.length>1?e.map((function(e){return e.data})):e[0].data),v(!1)})).catch((function(e){u(e),v(!1)}))}),[e,n,t]);return(0,p.useEffect)((function(){y()}),[y]),{data:i,error:d,isPending:f}},F=[{name:"DestinyTracker",url:"https://destinytracker.com/destiny-2/db/items/",icon:"https://cod.tracker.gg/public/icons/icon192.png"},{name:"Gunsmith",url:"https://d2gunsmith.com/w/",icon:"https://d2gunsmith.com/favicon.ico"},{name:"Light.gg",url:"https://www.light.gg/db/en/items/",icon:"https://www.light.gg/Content/Images/new-icon.png"}];function G(e){var n=e.id;return(0,S.jsx)("ul",{className:"weapon-links",children:F.map((function(e){return(0,S.jsx)("li",{children:(0,S.jsxs)("a",{className:"site-link",href:e.url+n,target:"_blank",rel:"noreferrer",children:[e.icon&&(0,S.jsx)("img",{alt:"",src:e.icon,className:"site-icon"}),e.name]})},e.name)}))})}function I(e){var n=e.id,t=e.name,r=H("".concat("/Destiny2/Manifest/DestinyInventoryItemDefinition/").concat(n,"/")),a=r.data,s=r.error;if(r.isPending)return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{className:"destiny-weapon",children:[(0,S.jsx)(R.Z,{size:"inline"})," ",t&&(0,S.jsx)("span",{children:t})]})});if(s)return console.error(s),null;t||(t=a.Response.displayProperties.name);var i=T(a),o=P(a),c=a.Response.inventory.tierTypeName,l=D(a);return(0,S.jsx)(C.Z,{triggerContent:(0,S.jsxs)("div",{className:"destiny-weapon a-link",children:[(0,S.jsx)(Z.Z,{icon:["weapons",i],color:o})," ",(0,S.jsx)("span",{children:t})]}),tooltip:{contents:"".concat(c," ").concat(o," ").concat(i),backgroundColor:O(c)},children:(0,S.jsxs)("article",{className:"weapon-modal "+c.toLowerCase(),children:[(0,S.jsx)("div",{className:"weapon-screenshot",style:{backgroundImage:"url(".concat(l,")")},children:(0,S.jsx)(G,{id:n})}),(0,S.jsxs)("div",{className:"weapon-header",children:[(0,S.jsx)("img",{src:"https://bungie.net"+a.Response.displayProperties.icon,alt:"",className:"weapon-icon"}),(0,S.jsxs)("div",{className:"weapon-header-text",children:[(0,S.jsx)("h3",{children:t}),(0,S.jsxs)("p",{children:[c," |"," ",(0,S.jsx)(Z.Z,{icon:["elements",o],color:o})," ",o," | ",(0,S.jsx)(Z.Z,{icon:["weapons",i]})," ",i]})]})]})]})})}var W=[(0,S.jsx)(I,{id:"2782847179",name:"Blasphemer"}),(0,S.jsx)(I,{id:"2164448701",name:"Apostate"}),(0,S.jsx)(I,{id:"3067821200",name:"Heretic"})];function K(){return(0,S.jsx)(_,{name:"Altars of Sorrow Weapon",items:W,start:16488324e5,period:864e5,icon:"https://www.bungie.net/common/destiny2_content/icons/58bf5b93ae8cfefc55852fe664179757.png"})}var Q=t(8914),q=t(1933),z=t(1694),Y=t.n(z);function X(e){var n=e.id,t=e.dataArray,r=e.name,a=n?[].concat(n):[],s=(0,q.useQueries)(a.map((function(e){return{queryKey:e,queryFn:function(){return V("".concat("/Destiny2/Manifest/DestinyActivityDefinition/").concat(e,"/"))}}})),{enabled:!!n});if(n){if(!s.every((function(e){return e.isSuccess})))return s.some((function(e){return e.isLoading}))?(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("article",{className:"activity",children:(0,S.jsx)(R.Z,{size:"page",fadeIn:"none"})})}):(s.filter((function(e){return e.error})).map((function(e){return console.error(e.error)})),null);s=s.filter((function(e){return e.isSucces})).map((function(e){return e.data}))}else s=t;return(0,S.jsxs)("article",{className:Y()("activity","success"),children:[(0,S.jsx)(ce,{data:s[0].data,name:r}),s.map((function(e,n){return(0,S.jsxs)(p.Fragment,{children:[(0,S.jsx)(se,{data:e.data}),(0,S.jsx)(de,{data:e.data})]},n)}))]})}X.defaultProps={};var $=t(935),J=[{class:"Overload",pattern:/Disruption|Overload/i},{class:"Unstoppable",pattern:/Stagger|Unstoppable/i},{class:"Barrier",pattern:/Shield-Piercing|Barrier/i}];function ee(e){var n=e.champions,t=e.known_champions;if(!n||n.length<1)return null;var a=new Set;return n.map((function(e){return J.map((function(n){return n.pattern.test(e.Response.displayProperties.description)&&a.add(n.class)}))})),(0,S.jsxs)("section",{className:"activity-champions",children:[(0,S.jsx)("h5",{className:"heading",children:"Champions"}),(0,S.jsx)("div",{className:"champions",children:(0,r.Z)(a).map((function(e,n){return(0,S.jsx)($.Z,{contents:"".concat(e," Champions"),children:(0,S.jsxs)("div",{className:"champion "+e,children:[(0,S.jsx)(Z.Z,{icon:["champions","modifiers",e],style:{filter:"brightness(".concat(t[e]&&"75%",")")}}),t[e]>0&&(0,S.jsx)("span",{className:"champion-amount",children:t[e]})]},n)},n)}))})]})}ee.defaultProps={champions:[],known_champions:{}};function ne(e){var n=e.id,t=H("".concat("/Destiny2/Manifest/DestinyDestinationDefinition/").concat(n,"/")),r=t.data,a=t.error;return t.isPending?(0,S.jsxs)("div",{className:"destination",children:[(0,S.jsx)(Z.Z,{icon:["activities","Destination"]}),(0,S.jsx)(R.Z,{size:"inline"})]}):a?(console.error(a),null):(0,S.jsxs)("p",{className:"destination",children:[(0,S.jsx)(Z.Z,{icon:["activities","Destination"]}),r.Response.displayProperties.name]})}var te=t(1413),re=t(5987),ae=["className","data"],se=(0,p.forwardRef)((function(e,n){var t,r,a=e.className,s=e.data,i=(0,re.Z)(e,ae),o=null===s||void 0===s||null===(t=s.Response)||void 0===t||null===(r=t.selectionScreenDisplayProperties)||void 0===r?void 0:r.name;return(0,S.jsx)("h2",(0,te.Z)((0,te.Z)({ref:n,className:Y()("activity-difficulty",o.toLowerCase(),a)},i),{},{children:o}))}));se.defaultProps={};var ie={LostSector:"Lost Sector"};var oe=function(e){var n=A(M.EI,e.Response.directActivityModeType);return ie[n]||n};function ce(e){var n=e.data,t=e.name;t||(t=n.Response.displayProperties.name);var r=oe(n);"Nightfall"===n.Response.originalDisplayProperties.name&&(t=n.Response.originalDisplayProperties.description,r="Nightfall");var a=D(n);return(0,S.jsxs)("section",{className:"activity-header",style:{backgroundImage:"url(".concat(a,")")},children:[(0,S.jsx)("h5",{className:"activity-type",children:r}),(0,S.jsx)("h1",{className:"activity-name",children:t}),(0,S.jsx)(ne,{id:n.Response.destinationHash})]})}ce.defaultProps={};function le(e){var n=e.data,t=n.Response.displayProperties.name,r=n.Response.displayProperties.icon,a=n.Response.displayProperties.description?(0,S.jsx)("p",{children:n.Response.displayProperties.description.replace(/(?:[\s.,]*\n+[\s.,]*)+/g,"; ").replace(/(\[Disruption|Stagger\])/g,"|$1|").split("|")}):null;if(!r||!t)return null;var s=[{class:"arc",pattern:/arc/i},{class:"solar",pattern:/solar/i},{class:"void",pattern:/void/i},{class:"stasis",pattern:/stasis/i}];return(0,S.jsxs)("section",{className:"activity-modifier",children:[(0,S.jsx)($.Z,{contents:t,children:(0,S.jsx)("img",{className:"icon"+s.filter((function(e){return e.pattern.test(t)})).reduce((function(e,n){return e+" "+n.class}),""),src:"https://bungie.net"+r,alt:""})}),(0,S.jsxs)("div",{className:"description",children:[(0,S.jsx)("h6",{className:"heading"+s.filter((function(e){return e.pattern.test(t)})).reduce((function(e,n){return e+" "+n.class}),""),children:t}),a]})]})}le.defaultProps={};function de(e){var n=e.data,t=e.known_shields,r=e.known_champions,a=H(n.Response.modifiers.map((function(e){return"".concat("/Destiny2/Manifest/DestinyActivityModifierDefinition/").concat(e.activityModifierHash,"/")}))),s=a.data,i=a.error;if(a.isPending)return(0,S.jsx)("section",{className:"activity-modifiers",children:(0,S.jsx)(R.Z,{size:"section"})});if(i)return console.error(i),null;var o=s.filter((function(e){return/shielded foes/i.test(e.Response.displayProperties.name)})),c=s.filter((function(e){return/champion foes/i.test(e.Response.displayProperties.name)})),l=s.filter((function(e){return!/(shielded|champion) foes|champions: mob/i.test(e.Response.displayProperties.name)}));return(0,S.jsxs)("section",{className:"activity-modifiers",children:[o.length>0&&(0,S.jsx)(me,{shields:o,known_shields:t}),c.length>0&&(0,S.jsx)(ee,{champions:c,known_champions:r}),l.length>0&&(0,S.jsxs)("section",{className:"other-modifiers",children:[(0,S.jsx)("h5",{className:"heading",children:"Modifiers"}),(0,S.jsx)("div",{className:"modifiers",children:l.map((function(e,n){return(0,S.jsx)(le,{data:e},n)}))})]})]})}de.defaultProps={};var ue=[{name:"Arc",pattern:/arc/i},{name:"Solar",pattern:/solar/i},{name:"Void",pattern:/void/i},{name:"Stasis",pattern:/stasis/i}];function me(e){var n=e.shields,t=e.known_shields;if(!n||n.length<1)return null;var a=new Set;return n.map((function(e){return ue.map((function(n){return n.pattern.test(e.Response.displayProperties.description)&&a.add(n.name)}))})),(0,S.jsxs)("section",{className:"activity-shields",children:[(0,S.jsx)("h5",{className:"heading",children:"Shields"}),(0,S.jsx)("div",{className:"shields",children:(0,r.Z)(a).map((function(e,n){return(0,S.jsx)($.Z,{contents:"".concat(e," Shields"),children:(0,S.jsxs)("div",{className:"shield",children:[(0,S.jsx)(Z.Z,{icon:["elements",e],color:e}),t[e]>0&&(0,S.jsx)("span",{className:"shield-amount",children:t[e]})]},n)},n)}))})]})}me.defaultProps={shields:[],known_shields:{}};var pe=X;function he(){var e,n,t,r=(0,q.useQuery)("nightfall-milestone",(function(){return V("/Destiny2/Milestones")})),a=(null===r||void 0===r||null===(e=r.data)||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.Response[1942283261])||void 0===t?void 0:t.activities)||[],s=(0,q.useQueries)(a.map((function(e){return{queryKey:e.activityHash,queryFn:function(){return V("/Destiny2/Manifest/DestinyActivityDefinition/".concat(e.activityHash))}}})),{enabled:!!a});return r.isSuccess&&s.every((function(e){return e.isSuccess}))?(0,S.jsx)(h.Z,{title:"Nightfall",cardContent:s[0].data.data.Response.displayProperties.description,icon:"https://www.bungie.net/common/destiny2_content/icons/48dda413d9f412ca2b10fd56a35a2665.png",customModal:!0,modalContent:(0,S.jsx)(pe,{dataArray:s.map((function(e){return e.data}))})}):null}var fe=t(8014),ve={0:{known_shields:{Void:0,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:0,Unstoppable:0}},480864726:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:3,Overload:0,Unstoppable:1}},480864721:{known_shields:{Void:0,Solar:0,Arc:1},known_champions:{Barrier:5,Overload:0,Unstoppable:2}},145221019:{known_shields:{Void:5,Solar:0,Arc:7},known_champions:{Barrier:0,Overload:1,Unstoppable:2}},145221020:{known_shields:{Void:5,Solar:0,Arc:4},known_champions:{Barrier:0,Overload:4,Unstoppable:2}},3094493720:{known_shields:{Void:0,Solar:2,Arc:4},known_champions:{Barrier:3,Overload:0,Unstoppable:1}},3094493727:{known_shields:{Void:0,Solar:2,Arc:2},known_champions:{Barrier:3,Overload:0,Unstoppable:4}},2936791996:{known_shields:{Void:4,Solar:0,Arc:0},known_champions:{Barrier:2,Overload:2,Unstoppable:0}},2936791995:{known_shields:{Void:3,Solar:0,Arc:0},known_champions:{Barrier:5,Overload:4,Unstoppable:0}},1898610132:{known_shields:{Void:9,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:2,Unstoppable:2}},1898610131:{known_shields:{Void:10,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:4,Unstoppable:3}},660710127:{known_shields:{Void:1,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:2,Unstoppable:3}},660710120:{known_shields:{Void:1,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:3,Unstoppable:4}},4206916275:{known_shields:{Void:17,Solar:2,Arc:0},known_champions:{Barrier:0,Overload:1,Unstoppable:3}},4206916276:{known_shields:{Void:29,Solar:2,Arc:1},known_champions:{Barrier:0,Overload:3,Unstoppable:5}},3911969233:{known_shields:{Void:0,Solar:0,Arc:4},known_champions:{Barrier:4,Overload:0,Unstoppable:3}},3911969238:{known_shields:{Void:0,Solar:0,Arc:1},known_champions:{Barrier:7,Overload:0,Unstoppable:3}},184186581:{known_shields:{Void:0,Solar:10,Arc:0},known_champions:{Barrier:3,Overload:2,Unstoppable:0}},184186578:{known_shields:{Void:0,Solar:10,Arc:0},known_champions:{Barrier:4,Overload:6,Unstoppable:0}},567131512:{known_shields:{Void:0,Solar:8,Arc:3},known_champions:{Barrier:3,Overload:2,Unstoppable:0}},567131519:{known_shields:{Void:0,Solar:8,Arc:3},known_champions:{Barrier:4,Overload:6,Unstoppable:0}},3678847129:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:0,Overload:3,Unstoppable:2}},3678847134:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:0,Overload:3,Unstoppable:4}}};var ye=function(e){try{return ve[e]}catch(n){return console.warn(n),null}},ge="DestinyActivityDefinition",xe="/Destiny2/Manifest/".concat(ge,"/"),je="/Destiny2/Armory/Search/".concat(ge,"/"),we=function(e){var n=(0,p.useState)(new Array(2)),t=(0,a.Z)(n,2),r=t[0],s=t[1],i=(0,p.useState)(!1),o=(0,a.Z)(i,2),c=o[0],l=o[1],d=(0,p.useState)(!1),u=(0,a.Z)(d,2),m=u[0],h=u[1],f=(0,p.useState)(!0),v=(0,a.Z)(f,2),y=v[0],g=v[1],x=(0,p.useCallback)((function(){return E(je+e).then((function(e){l([e[0].data.Response.results.results.filter((function(e){return e.displayProperties.name.endsWith(": Legend")}))[0].hash,e[0].data.Response.results.results.filter((function(e){return e.displayProperties.name.endsWith(": Master")}))[0].hash])})).catch((function(e){h(e),g(!1)}))}),[e]),j=(0,p.useCallback)((function(){return E(c.map((function(e){return xe+e}))).then((function(e){s(e.map((function(e){return e.data}))),g(!1)})).catch((function(e){h(e),g(!1)}))}),[c]);return(0,p.useEffect)((function(){x()}),[x]),(0,p.useEffect)((function(){c&&j()}),[j,c]),{data:r,error:m,isPending:y}};function be(e){var n=e.name,t=we(n),r=t.data,a=t.error;if(t.isPending)return(0,S.jsx)("article",{className:"lost-sector",children:(0,S.jsx)(R.Z,{size:"page",fadeIn:"none"})});if(a)return console.error(a),(0,S.jsx)("article",{className:"lost-sector",children:(0,S.jsx)("h2",{className:"error",children:"Can't find Lost Sector info..."})});var s=ye(r[0].Response.hash),i=s.known_shields,o=s.known_champions,c=ye(r[1].Response.hash),l=c.known_shields,d=c.known_champions;return(0,S.jsxs)("article",{className:"lost-sector success",children:[(0,S.jsx)(ce,{data:r[0],name:r[0].Response.displayProperties.name.replace(/: (Legend|Master)$/i,"")}),(0,S.jsxs)("section",{className:"legend-difficulty",children:[(0,S.jsx)("h2",{className:"heading",children:"Legend"}),(0,S.jsx)(de,{data:r[0],known_shields:i,known_champions:o})]}),(0,S.jsxs)("section",{className:"master-difficulty",children:[(0,S.jsx)("h2",{className:"heading",children:"Master"}),(0,S.jsx)(de,{data:r[1],known_shields:l,known_champions:d})]})]})}function ke(e,n){return n?ke(n,e%n):e}function Se(e,n){return e*n/ke(e,n)}function Ne(e){var n=e.location;return(0,S.jsx)(C.Z,{triggerContent:(0,S.jsxs)("span",{className:"a-link",children:[n.name," - ",n.location]}),background:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_7d11acd7d5a3daebc0a0c906452932d6.png",children:(0,S.jsx)(be,{name:n.name})})}function _e(){var e=(0,p.useMemo)((function(){var e=[{name:"K1 Crew Quarters",location:"Moon"},{name:"K1 Logistics",location:"Moon"},{name:"Metamorphosis",location:"Throne World"},{name:"Sepulcher",location:"Throne World"},{name:"Extraction",location:"Throne World"},{name:"Veles Labyrinth",location:"Cosmodrome"},{name:"Exodus Garden A2",location:"Cosmodrome"},{name:"Aphelion's Rest",location:"Dreaming City"},{name:"Bay of Drowned Wishes",location:"Dreaming City"},{name:"Chamber of Starlight",location:"Dreaming City"},{name:"K1 Revelation",location:"Moon"}],n=["Arms","Chest","Helmet","Legs"],t=[];do{t.push((0,S.jsxs)("div",{children:[(0,S.jsx)(Ne,{location:e[t.length%e.length]})," (",n[t.length%n.length],")"]}))}while(t.length<Se(n.length,e.length));return t}),[]);return(0,S.jsx)(_,{name:"Legend & Master Lost Sector",items:e,start:16489188e5,period:864e5,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_7d11acd7d5a3daebc0a0c906452932d6.png"})}var Ze=["EDZ","Cosmodrome","Moon"].map((function(e){return(0,S.jsx)("div",{children:e})}));function Re(){return(0,S.jsx)(_,{name:"PsiOps Battleground: Legend",items:Ze,start:16521156e5,period:864e5,icon:"https://www.bungie.net/common/destiny2_content/icons/b5ca23093632aa939e8209a2ee558106.png"})}function Ce(e){return e.charAt(0).toUpperCase()+e.slice(1)}var De=t(3540),Me=6e4,Ae=864e5;function Pe(e){var n=(0,p.useState)(b(e.period,k(e.end))),t=(0,a.Z)(n,2),r=t[0],s=t[1],i=(0,p.useState)((function(){for(var n=b(e.period,k(e.start));e.period&&r&&n>r;)n-=e.period;return n})),o=(0,a.Z)(i,2),c=o[0],l=o[1],d=(0,p.useState)(Date.now()),f=(0,a.Z)(d,2),v=f[0],y=f[1];(0,p.useEffect)((function(){var n=setTimeout((function(){s(b(e.period,k(r))),y((function(){return Date.now()})),l((function(){for(var n=b(e.period,k(c));e.period&&r&&n>=r;)n-=e.period;return n}))}),1e3);return function(){return clearTimeout(n)}}),[v,c,r,e.period]);var g=!!e.period,x=!1;w(c)&&(x=!0);var N=!1;if((w(r)||!r&&w(c+Ae)||!g&&(w(r)||!r&&w(c+Ae)))&&(N=!0),N)return null;var _=c;x&&r&&(_=r);var Z,R=j(_-v);Z=x&&!r?"On "+m(_,e.hasTime):w(_-Ae)?"at "+u(_,e.hasTime):"on "+m(_,e.hasTime);var C=_/Me;g||(C-=5259600);var D,M="string"===typeof e.description||e.description instanceof String?(0,De.ZP)(e.description):e.description;return(0,S.jsx)(h.Z,{className:"timer-card "+(x?"highlight":""),icon:e.icon,title:e.name,cardContent:(D=(g||!x||r?R+", ":"")+Z,D.split(". ").map(Ce).join(". ")),modalContent:M||void 0,order:C,link:e.link})}Pe.defaultProps={end:!1,period:!1,hasTime:!0,description:!1};function Te(){var e,n,t,r,a,s=(0,q.useQuery)("d2settings",(function(){return V("/Settings/")})),i=null===s||void 0===s||null===(e=s.data)||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.Response)||void 0===t||null===(r=t.destiny2CoreSettings)||void 0===r?void 0:r.currentSeasonHash,o=(0,q.useQuery)("seasons",(function(){return V("/Destiny2/Manifest/DestinySeasonDefinition/".concat(i))}),{enabled:!!i}),c=o.isLoading,l=o.error,d=o.data;if(s.isLoading||c)return null;if(s.error||l)return console.error(s.error),null;var u=null===d||void 0===d||null===(a=d.data)||void 0===a?void 0:a.Response;return(0,S.jsx)(Pe,{name:"Season ".concat(u.seasonNumber,": ").concat(u.displayProperties.name),description:u.displayProperties.description,start:u.startDate,end:u.endDate,icon:"".concat("https://bungie.net").concat(u.displayProperties.icon)})}var Be=[(0,S.jsx)(I,{id:"2721157927",name:"Tarnation"}),(0,S.jsx)(I,{id:"1399109800",name:"Fel Taradiddle"}),(0,S.jsx)(I,{id:"3865728990",name:"Father's Sins"}),(0,S.jsx)(I,{id:"927567426",name:"Come to Pass"})];function Oe(){return(0,S.jsx)(_,{name:"Wellspring Weapon",items:Be,start:1648746e6,period:864e5,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyMilestoneDefinition_feb5aecca544ab023ecf3b74ac8f509b.png"})}var Ue=36e5,Le=864e5,Ve=6048e5,Ee=function(){return[{name:"Daily Reset",start:(0,c.PR)().end,period:Le,icon:(0,S.jsx)(fe.jFC,{})},{name:"Weekly Reset",start:(0,c.nQ)().end,period:Ve,icon:(0,S.jsx)(fe.jFC,{}),link:"https://kyber3000.com/reset"},{name:"Weekend Activities",start:(0,c.yb)()?(0,c.yb)().start:(0,c.l2)().start,end:(0,c.yb)()?(0,c.yb)().end:(0,c.l2)().end,period:Ve,icon:(0,S.jsx)(fe.jFC,{}),description:(0,S.jsxs)("ul",{children:[(0,S.jsx)("li",{children:(0,S.jsx)("a",{href:"https://kyber3000.com/Xur",target:"_blank",rel:"noreferrer",children:"Xur"})}),(0,S.jsx)("li",{children:(0,S.jsx)("a",{href:"https://kyber3000.com/Trials",target:"_blank",rel:"noreferrer",children:"Trials of Osiris"})})]})},{name:"Season ".concat((0,c.ye)().seasonNumber),start:(0,c.ye)().start,end:(0,c.ye)().end}]};function He(){return(He=(0,s.Z)(o().mark((function e(n){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return e.next=4,e.sent.json();case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fe=function(e){return He.apply(this,arguments)}("https://raw.githubusercontent.com/CostasAK/d2-timers/events/events.json"),Ge=[{name:"Destiny Server and Update Status",link:"https://help.bungie.net/hc/en-us/articles/360049199271-Destiny-Server-and-Update-Status"},{name:"Bungie Maintenance Notifications",link:"https://twitter.com/BungieHelp"},{name:"Patch Notes",link:"https://www.bungie.net/en/Explore/Category?category=Updates"}];function Ie(){var e=p.useState([]),n=(0,a.Z)(e,2),t=n[0],s=n[1];Fe.then((function(e){return s(e)}));var i=p.useState(Ee()),o=(0,a.Z)(i,2),c=o[0],l=o[1],d=p.useState(Date.now()),u=(0,a.Z)(d,2),m=u[0],h=u[1];p.useEffect((function(){var e=setTimeout((function(){l(Ee()),h((function(){return Date.now()}))}),Ue-m%Ue);return function(){return clearTimeout(e)}}),[m]);var f=[].concat((0,r.Z)(t),(0,r.Z)(c));return(0,S.jsxs)("div",{className:"timers-wrapper",children:[(0,S.jsxs)("div",{className:"timers",children:[(0,S.jsx)(he,{}),(0,S.jsx)(Oe,{}),(0,S.jsx)(_e,{}),(0,S.jsx)(Re,{}),(0,S.jsx)(K,{}),(0,S.jsx)(Te,{}),f.map((function(e){return(0,S.jsx)(Pe,{name:e.name,description:e.description,start:e.start,end:e.end,period:e.period,hasTime:e.hasTime,icon:e.icon,link:e.link},e.name)}))]}),(0,S.jsx)("div",{className:"links",children:Ge.map((function(e){return(0,S.jsx)(Q.Z,{href:e.link,children:e.name},e.name)}))})]})}}}]);
//# sourceMappingURL=302.309740c3.chunk.js.map