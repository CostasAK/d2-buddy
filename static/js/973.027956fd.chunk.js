"use strict";(self.webpackChunkd2_buddy=self.webpackChunkd2_buddy||[]).push([[973],{5849:function(e,n,r){r.r(n),r.d(n,{default:function(){return Ve}});var i=r(1413),t=r(885),a=r(5861),o=r(7757),s=r.n(o),c=r(7184),l=6e4,d=36e5,u=24*d,p=7*u,m=30*u,h=365.25*u,f=r(7892),v=r.n(f);function y(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!n)return x(e,!1);var r=new Intl.DateTimeFormat(void 0,{hour:"numeric"}).formatToParts(new Date(e));return void 0!==r.dayPeriod?v()(e).format("h:mm A"):v()(e).format("H:mm")}function x(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return v()(e).format("ddd, D MMM YYYY")+(n?" "+y(e):"")}var w=r(2791),j=r(1625);function g(e){if(Math.abs(e)<750)return"now";var n=function(e){var n=Math.abs(e);if(n<6e4)return"less than 1 minute";if(n<9e4)return"1 minute";if(n<=345e4)return"".concat(Math.round(n/l)," minutes");if(n<22*d)return"".concat(n%d/d<.875?Math.floor(n/d):Math.ceil(n/d)).concat(n%d/d<.125||n%d/d>=.875?"":n%d/d<.375?"\xbc":n%d/d<.625?"\xbd":"\xbe"," hour").concat(n<675e4?"":"s");if(n<1.5*u)return"1 day";if(n<26*u)return"".concat(Math.round(n/u)," days");if(n<46*u)return"1 month";if(n<11*m)return"".concat(Math.round(n/m)," months");if(n<18*m)return"1 year";return"".concat(Math.round(n/h)," years")}(e);return e<0?"".concat(n," ago"):"in ".concat(n)}function k(e){return e&&e<=Date.now()}function b(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now()+1e3;if(!e||!n)return n;var i=(n-=n%1e3)%e,t=(r+=1e3-r%1e3)%e||0;return t<i?r-t+i:r-t+i+e}function S(e){return!!e&&new Date(e).getTime()}var _=r(184);function N(e){var n=e.name,r=e.items,i=e.start,a=e.period,o=e.icon,s=(0,w.useState)(Date.now()),c=(0,t.Z)(s,2),d=c[0],p=c[1],m=(0,w.useState)(b(a,S(i))),f=(0,t.Z)(m,2),v=f[0],N=f[1];function D(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!n&&k(e-u)?y(e):x(e)}(0,w.useEffect)((function(){var e=setTimeout((function(){p((function(){return Date.now()})),N((function(){return b(a,S(i))}))}),1e3);return function(){clearTimeout(e)}}),[i,a,v,d]);var Z=(v-5*h)/l,A=Math.floor((d-i)/a)%r.length,P=(0,_.jsxs)(_.Fragment,{children:[r[A],"Cycles "+function(e){var n=g(e-d);return k(e-u)?n+", at "+D(e):n+", on "+D(e)}(v)]}),C=(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("section",{children:P}),(0,_.jsxs)("section",{className:"upcoming-items",children:[(0,_.jsx)("h3",{children:"Upcoming"}),r.map((function(e,n){var i=(n-A+r.length-1)%r.length;return(0,_.jsxs)("section",{style:{order:i},children:[e,D(v+i*a,!0)]},n)}))]})]});return(0,_.jsx)(j.Z,{className:"cycle-card",title:n,style:{order:Z},modalContent:C,icon:o,children:P})}N.defaultProps={period:u};var D=N,Z=r(4996),A=r(8301),P=r(4036),C=r(8722);function B(e){var n=(null===e||void 0===e?void 0:e.screenshot)||(null===e||void 0===e?void 0:e.pgcrImage);return n?"https://bungie.net"+n:null}var M=r(6107),T=function(e,n){return Object.keys(e).find((function(r){return e[r]===n}))};var U=function(e){var n;return null===(n=T(M.BN,null===e||void 0===e?void 0:e.defaultDamageType))||void 0===n?void 0:n.replace(/thermal/i,"Solar")};var O=function(e){var n,r=null===e||void 0===e?void 0:e.itemTypeDisplayName;return"Grenade Launcher"===r&&M.JS.Heavy===(null===e||void 0===e||null===(n=e.equippingBlock)||void 0===n?void 0:n.ammoType)&&(r="Heavy "+r),r},L={Legendary:"#4e3263",Exotic:"#cdad34"};var V=function(e){return L[e]||"#04040e"},R=r(1933),E=[{name:"DestinyTracker",url:"https://destinytracker.com/destiny-2/db/items/",icon:"https://cod.tracker.gg/public/icons/icon192.png"},{name:"Gunsmith",url:"https://d2gunsmith.com/w/",icon:"https://d2gunsmith.com/favicon.ico"},{name:"Light.gg",url:"https://www.light.gg/db/en/items/",icon:"https://www.light.gg/Content/Images/new-icon.png"}];function F(e){var n=e.id;return(0,_.jsx)("ul",{className:"weapon-links",children:E.map((function(e){return(0,_.jsx)("li",{children:(0,_.jsxs)("a",{className:"site-link",href:e.url+n,target:"_blank",rel:"noreferrer",children:[e.icon&&(0,_.jsx)(A.Z,{src:e.icon,className:"site-icon"}),e.name]})},e.name)}))})}function Q(e){var n,r,i=e.id,t=e.name,a=(0,R.useQuery)(["DestinyInventoryItemDefinition",i]),o=a.data,s=a.error;if(a.isLoading)return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:"destiny-weapon",children:[(0,_.jsx)(P.Z,{size:"inline"})," ",t&&(0,_.jsx)("span",{children:t})]})});if(s)return console.error(s),null;t||(t=null===o||void 0===o||null===(n=o.displayProperties)||void 0===n?void 0:n.name);var c=O(o),l=U(o),d=null===o||void 0===o||null===(r=o.inventory)||void 0===r?void 0:r.tierTypeName,u=B(o);return(0,_.jsx)(C.Z,{triggerContent:(0,_.jsxs)("div",{className:"destiny-weapon a-link",children:[(0,_.jsx)(Z.Z,{icon:["weapons",c],color:l})," ",(0,_.jsx)("span",{children:t})]}),tooltip:{contents:"".concat(d," ").concat(l," ").concat(c),backgroundColor:V(d)},children:(0,_.jsxs)("article",{className:"weapon-modal "+(null===d||void 0===d?void 0:d.toLowerCase()),children:[(0,_.jsx)("div",{className:"weapon-screenshot",style:{backgroundImage:"url(".concat(u,")")},children:(0,_.jsx)(F,{id:i})}),(0,_.jsxs)("div",{className:"weapon-header",children:[(0,_.jsx)(A.Z,{src:o.displayProperties.icon,className:"weapon-icon"}),(0,_.jsxs)("div",{className:"weapon-header-text",children:[(0,_.jsx)("h3",{children:t}),(0,_.jsxs)("p",{children:[d," |"," ",(0,_.jsx)(Z.Z,{icon:["elements",l],color:l})," ",l," | ",(0,_.jsx)(Z.Z,{icon:["weapons",c]})," ",c]})]})]})]})})}var H=[(0,_.jsx)(Q,{id:"2782847179",name:"Blasphemer"}),(0,_.jsx)(Q,{id:"2164448701",name:"Apostate"}),(0,_.jsx)(Q,{id:"3067821200",name:"Heretic"})];function I(){return(0,_.jsx)(D,{name:"Altars of Sorrow Weapon",items:H,start:16488324e5,period:u,icon:"https://www.bungie.net/common/destiny2_content/icons/58bf5b93ae8cfefc55852fe664179757.png"})}var W=r(691),K=r(1694),z=r.n(K),q=(0,w.forwardRef)((function(e,n){var r=e.id,i=e.dataArray,t=e.name,a=r?[].concat(r):[],o=(0,R.useQueries)(a.map((function(e){return{queryKey:["DestinyActivityDefinition",e]}})),{enabled:!!r});if(r){if(!o.every((function(e){return e.isSuccess})))return o.some((function(e){return e.isLoading}))?(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("article",{ref:n,className:"activity",children:(0,_.jsx)(P.Z,{size:"page",fadeIn:"none"})})}):(o.filter((function(e){return e.error})).map((function(e){return console.error(e.error)})),null);o=o.filter((function(e){return e.isSuccess})).map((function(e){return e.data}))}else o=i.map((function(e){return e.data}));return o.sort((function(e,n){return(null===e||void 0===e?void 0:e.activityLightLevel)-(null===n||void 0===n?void 0:n.activityLightLevel)})),(0,_.jsxs)("article",{ref:n,className:z()("activity","success"),children:[(0,_.jsx)(ae,{data:o[0],name:t}),o.map((function(e,n){return(0,_.jsxs)(w.Fragment,{children:[(0,_.jsx)(re,{data:e}),(0,_.jsx)(le,{data:e})]},n)}))]})}));q.defaultProps={};var Y=r(2982),G=r(935),X=[{class:"Overload",pattern:/Disruption|Overload/i},{class:"Unstoppable",pattern:/Stagger|Unstoppable/i},{class:"Barrier",pattern:/Shield-Piercing|Barrier/i}],$=(0,w.forwardRef)((function(e,n){var r=e.champions,i=e.known_champions;if(!r||r.length<1)return null;var t=new Set;return r.map((function(e){return X.map((function(n){var r;return n.pattern.test(null===e||void 0===e||null===(r=e.displayProperties)||void 0===r?void 0:r.description)&&t.add(n.class)}))})),(0,_.jsxs)("section",{ref:n,className:"activity-champions",children:[(0,_.jsx)("h5",{className:"heading",children:"Champions"}),(0,_.jsx)("div",{className:"champions",children:(0,Y.Z)(t).map((function(e,n){return(0,_.jsx)(G.Z,{contents:"".concat(e," Champions"),children:(0,_.jsxs)("div",{className:"champion "+e,children:[(0,_.jsx)(Z.Z,{icon:["champions","modifiers",e],style:{filter:"brightness(".concat(i[e]&&"75%",")")}}),i[e]>0&&(0,_.jsx)("span",{className:"champion-amount",children:i[e]})]},n)},n)}))})]})}));$.defaultProps={champions:[],known_champions:{}};var J=(0,w.forwardRef)((function(e,n){var r,i=e.id,t=(0,R.useQuery)(["DestinyDestinationDefinition",i]),a=t.data,o=t.error;return t.isLoading?(0,_.jsxs)("p",{ref:n,className:"destination",children:[(0,_.jsx)(Z.Z,{icon:["activities","Destination"]}),(0,_.jsx)(P.Z,{size:"inline"})]}):o?(console.error(o),null):(0,_.jsxs)("p",{ref:n,className:"destination",children:[(0,_.jsx)(Z.Z,{icon:["activities","Destination"]}),null===a||void 0===a||null===(r=a.displayProperties)||void 0===r?void 0:r.name]})}));J.defaultProps={};var ee=r(5987),ne=["className","data"],re=(0,w.forwardRef)((function(e,n){var r,t=e.className,a=e.data,o=(0,ee.Z)(e,ne),s=null===a||void 0===a||null===(r=a.selectionScreenDisplayProperties)||void 0===r?void 0:r.name;return(0,_.jsx)("h2",(0,i.Z)((0,i.Z)({ref:n,className:z()("activity-difficulty",null===s||void 0===s?void 0:s.toLowerCase(),t)},o),{},{children:s}))}));re.defaultProps={};var ie={LostSector:"Lost Sector"};var te=function(e){var n=T(M.EI,null===e||void 0===e?void 0:e.directActivityModeType);return ie[n]||n},ae=(0,w.forwardRef)((function(e,n){var r=e.data,i=e.name;i||(i=r.displayProperties.name);var t=te(r);"Nightfall"===r.originalDisplayProperties.name&&(i=r.originalDisplayProperties.description,t="Nightfall");var a=B(r);return(0,_.jsxs)("section",{ref:n,className:"activity-header",style:{backgroundImage:"url(".concat(a,")")},children:[(0,_.jsx)("h5",{className:"activity-type",children:t}),(0,_.jsx)("h1",{className:"activity-name",children:i}),(0,_.jsx)(J,{id:r.destinationHash})]})}));ae.defaultProps={};var oe=(0,w.forwardRef)((function(e,n){var r,i,t,a,o=e.data,s=null===o||void 0===o||null===(r=o.displayProperties)||void 0===r?void 0:r.name,c=null===o||void 0===o||null===(i=o.displayProperties)||void 0===i?void 0:i.icon,l=null!==o&&void 0!==o&&null!==(t=o.displayProperties)&&void 0!==t&&t.description?(0,_.jsx)("p",{children:null===o||void 0===o||null===(a=o.displayProperties)||void 0===a?void 0:a.description.replace(/(?:[\s.,]*\n+[\s.,]*)+/g,"; ").replace(/(\[Disruption|Stagger\])/g,"|$1|").split("|")}):null;if(!c||!s)return null;var d=[{class:"arc",pattern:/arc/i},{class:"solar",pattern:/solar/i},{class:"void",pattern:/void/i},{class:"stasis",pattern:/stasis/i}];return(0,_.jsxs)("section",{ref:n,className:"activity-modifier",children:[(0,_.jsx)(G.Z,{contents:s,children:(0,_.jsx)(A.Z,{className:z()("icon",d.filter((function(e){return e.pattern.test(s)})).map((function(e){return e.class}))),src:c})}),(0,_.jsxs)("div",{className:"description",children:[(0,_.jsx)("h6",{className:z()("heading",d.filter((function(e){return e.pattern.test(s)})).map((function(e){return e.class}))),children:s}),l]})]})}));oe.defaultProps={};var se={0:{known_shields:{Void:0,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:0,Unstoppable:0}},480864726:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:3,Overload:0,Unstoppable:1}},480864721:{known_shields:{Void:0,Solar:0,Arc:1},known_champions:{Barrier:5,Overload:0,Unstoppable:2}},145221019:{known_shields:{Void:5,Solar:0,Arc:7},known_champions:{Barrier:0,Overload:1,Unstoppable:2}},145221020:{known_shields:{Void:5,Solar:0,Arc:4},known_champions:{Barrier:0,Overload:4,Unstoppable:2}},3094493720:{known_shields:{Void:0,Solar:2,Arc:4},known_champions:{Barrier:3,Overload:0,Unstoppable:1}},3094493727:{known_shields:{Void:0,Solar:2,Arc:2},known_champions:{Barrier:3,Overload:0,Unstoppable:4}},2936791996:{known_shields:{Void:4,Solar:0,Arc:0},known_champions:{Barrier:2,Overload:2,Unstoppable:0}},2936791995:{known_shields:{Void:3,Solar:0,Arc:0},known_champions:{Barrier:5,Overload:4,Unstoppable:0}},1898610132:{known_shields:{Void:9,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:2,Unstoppable:2}},1898610131:{known_shields:{Void:10,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:4,Unstoppable:3}},660710127:{known_shields:{Void:1,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:2,Unstoppable:3}},660710120:{known_shields:{Void:1,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:3,Unstoppable:4}},4206916275:{known_shields:{Void:17,Solar:2,Arc:0},known_champions:{Barrier:0,Overload:1,Unstoppable:3}},4206916276:{known_shields:{Void:29,Solar:2,Arc:1},known_champions:{Barrier:0,Overload:3,Unstoppable:5}},3911969233:{known_shields:{Void:0,Solar:0,Arc:4},known_champions:{Barrier:4,Overload:0,Unstoppable:3}},3911969238:{known_shields:{Void:0,Solar:0,Arc:1},known_champions:{Barrier:7,Overload:0,Unstoppable:3}},184186581:{known_shields:{Void:0,Solar:10,Arc:0},known_champions:{Barrier:3,Overload:2,Unstoppable:0}},184186578:{known_shields:{Void:0,Solar:10,Arc:0},known_champions:{Barrier:4,Overload:6,Unstoppable:0}},567131512:{known_shields:{Void:0,Solar:8,Arc:3},known_champions:{Barrier:3,Overload:2,Unstoppable:0}},567131519:{known_shields:{Void:0,Solar:8,Arc:3},known_champions:{Barrier:4,Overload:6,Unstoppable:0}},3678847129:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:0,Overload:3,Unstoppable:2}},3678847134:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:0,Overload:3,Unstoppable:4}}};var ce=function(e){return se[e]||{known_shields:void 0,known_champions:void 0}},le=(0,w.forwardRef)((function(e,n){var r=e.data,i=(0,R.useQueries)(r.modifiers.map((function(e){return{queryKey:["DestinyActivityModifierDefinition",e.activityModifierHash]}})));if(!i.every((function(e){return e.isSuccess})))return i.some((function(e){return e.isLoading}))?(0,_.jsx)("section",{ref:n,className:"activity-modifiers",children:(0,_.jsx)(P.Z,{size:"section"})}):(i.filter((function(e){return e.error})).map((function(e){return console.error(e.error)})),null);var t=ce(null===r||void 0===r?void 0:r.hash),a=t.known_shields,o=t.known_champions,s=i.filter((function(e){return e.isSuccess})).map((function(e){return e.data})),c=s.filter((function(e){return/shielded foes/i.test(e.displayProperties.name)})),l=s.filter((function(e){return/champion foes/i.test(e.displayProperties.name)})),d=s.filter((function(e){return!/(shielded|champion) foes|champions: mob| modifiers$/i.test(e.displayProperties.name)}));return(0,_.jsxs)("section",{ref:n,className:"activity-modifiers",children:[c.length>0&&(0,_.jsx)(ue,{shields:c,known_shields:a}),l.length>0&&(0,_.jsx)($,{champions:l,known_champions:o}),d.length>0&&(0,_.jsxs)("section",{className:"other-modifiers",children:[(0,_.jsx)("h5",{className:"heading",children:"Modifiers"}),(0,_.jsx)("div",{className:"modifiers",children:d.map((function(e,n){return(0,_.jsx)(oe,{data:e},n)}))})]})]})}));le.defaultProps={};var de=[{name:"Arc",pattern:/arc/i},{name:"Solar",pattern:/solar/i},{name:"Void",pattern:/void/i},{name:"Stasis",pattern:/stasis/i}],ue=(0,w.forwardRef)((function(e,n){var r=e.shields,i=e.known_shields;if(!r||r.length<1)return null;var t=new Set;return r.map((function(e){return de.map((function(n){var r;return n.pattern.test(null===e||void 0===e||null===(r=e.displayProperties)||void 0===r?void 0:r.description)&&t.add(n.name)}))})),(0,_.jsxs)("section",{ref:n,className:"activity-shields",children:[(0,_.jsx)("h5",{className:"heading",children:"Shields"}),(0,_.jsx)("div",{className:"shields",children:(0,Y.Z)(t).map((function(e,n){return(0,_.jsx)(G.Z,{contents:"".concat(e," Shields"),children:(0,_.jsxs)("div",{className:"shield",children:[(0,_.jsx)(Z.Z,{icon:["elements",e],color:e}),i[e]>0&&(0,_.jsx)("span",{className:"shield-amount",children:i[e]})]},n)},n)}))})]})}));ue.defaultProps={shields:[],known_shields:{}};var pe=q;function me(){var e,n,r=(0,R.useQuery)("Milestones"),i=(null===r||void 0===r||null===(e=r.data)||void 0===e||null===(n=e[1942283261])||void 0===n?void 0:n.activities)||[],t=(0,R.useQueries)(i.map((function(e){return{queryKey:["DestinyActivityDefinition",e.activityHash]}})),{enabled:!!i});return r.isSuccess&&t.every((function(e){return e.isSuccess}))?(0,_.jsx)(j.Z,{title:"Nightfall",icon:"https://www.bungie.net/common/destiny2_content/icons/48dda413d9f412ca2b10fd56a35a2665.png",customModal:!0,modalContent:(0,_.jsx)(pe,{dataArray:t}),children:t[0].data.displayProperties.description}):null}var he=r(8014),fe="DestinyActivityDefinition";function ve(e){var n,r=e.name,i=(0,R.useQuery)(["Search",fe,r]),t=i.data,a=i.error,o=i.isLoading,s=(null===t||void 0===t||null===(n=t.results)||void 0===n?void 0:n.results)||[],c=(0,R.useQueries)(s.map((function(e){return{queryKey:[fe,e.hash]}})),{enabled:!!s});if(o||c.some((function(e){return e.isLoading})))return(0,_.jsx)("article",{className:"lost-sector",children:(0,_.jsx)(P.Z,{size:"page",fadeIn:"none"})});if(a||c.some((function(e){return e.error})))return a&&console.error(a),c.map((function(e){return e.error&&console.error(e.error)})),(0,_.jsx)("article",{className:"lost-sector",children:(0,_.jsx)("h2",{className:"error",children:"Can't find Lost Sector info..."})});var l=c.filter((function(e){return"Lost Sector"===te(e.data)}));return(0,_.jsx)(pe,{dataArray:l})}function ye(e,n){return n?ye(n,e%n):e}function xe(e,n){return e*n/ye(e,n)}function we(e){var n=e.location;return(0,_.jsx)(C.Z,{triggerContent:(0,_.jsxs)("span",{className:"a-link",children:[n.name," - ",n.location]}),background:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_7d11acd7d5a3daebc0a0c906452932d6.png",children:(0,_.jsx)(ve,{name:n.name})})}function je(){var e=(0,w.useMemo)((function(){var e=[{name:"K1 Crew Quarters",location:"Moon"},{name:"K1 Logistics",location:"Moon"},{name:"Metamorphosis",location:"Throne World"},{name:"Sepulcher",location:"Throne World"},{name:"Extraction",location:"Throne World"},{name:"Veles Labyrinth",location:"Cosmodrome"},{name:"Exodus Garden A2",location:"Cosmodrome"},{name:"Aphelion's Rest",location:"Dreaming City"},{name:"Bay of Drowned Wishes",location:"Dreaming City"},{name:"Chamber of Starlight",location:"Dreaming City"},{name:"K1 Revelation",location:"Moon"}],n=["Arms","Chest","Helmet","Legs"],r=[];do{r.push((0,_.jsxs)("div",{children:[(0,_.jsx)(we,{location:e[r.length%e.length]})," (",n[r.length%n.length],")"]}))}while(r.length<xe(n.length,e.length));return r}),[]);return(0,_.jsx)(D,{name:"Legend & Master Lost Sector",items:e,start:16489188e5,period:u,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_7d11acd7d5a3daebc0a0c906452932d6.png"})}var ge=["EDZ","Cosmodrome","Moon"].map((function(e){return(0,_.jsx)("div",{children:e})}));function ke(){return(0,_.jsx)(D,{name:"PsiOps Battleground: Legend",items:ge,start:16521156e5,period:u,icon:"https://www.bungie.net/common/destiny2_content/icons/b5ca23093632aa939e8209a2ee558106.png"})}function be(e){return e.charAt(0).toUpperCase()+e.slice(1)}var Se=function(e){var n=e.timestamp,r=e.hasTime,i=e.prefix,a=e.conditions,o=(0,w.useState)(Date.now()),s=(0,t.Z)(o,2),c=s[0],l=s[1],d=(0,w.useState)(g(n-c)),p=(0,t.Z)(d,2),m=p[0],h=p[1];(0,w.useEffect)((function(){var e=setTimeout((function(){l((function(){return Date.now()})),h((function(){return g(n-c)}))}),b(3e4,0)-Date.now());return function(){return clearTimeout(e)}}),[c,n]),a=Array.isArray(a)?a:[a];var f,v;return n&&a.every((function(e){return!0===e||("past"===e?n-c<0:"future"===e?n-c>0:"past"===(null===e||void 0===e?void 0:e.when)?e.timestamp-c<0:"future"===(null===e||void 0===e?void 0:e.when)?e.timestamp-c>0:void 0)}))?(f=Math.abs(n-c)<u?"at "+y(n,r):"on "+x(n,r),(0,_.jsx)("p",{children:(v="".concat(i?"".concat(i," "):"").concat(m?"".concat(m,", "):"").concat(f),v.split(". ").map(be).join(". "))})):null};Se.defaultProps={hasTime:!0,conditions:[!0]};var _e=r(6031).ZP.p.withConfig({displayName:"TimerCardDescriptionStyle__StyledDescription",componentId:"sc-an8yzt-0"})(["margin-top:",";"],(function(e){return e.theme.lengths.gap})),Ne=function(e){return e===d?"Hourly":e===u?"Daily":e===p?"Weekly":e===m?"Monrthly":e===h?"Yearly":null},De=function(e){var n=e.start,r=e.end,i=e.period,t=e.description;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(Se,{prefix:n&&r&&"Starts",timestamp:n}),(0,_.jsx)(Se,{prefix:n&&r&&"Ends",timestamp:r}),Ne(i)&&(0,_.jsxs)("p",{children:["Period: ",Ne(i)]}),t&&(0,_.jsx)(_e,{children:t})]})},Ze=["className","description","start","end","period","hasTime"],Ae=(0,w.forwardRef)((function(e,n){var r=e.className,a=e.description,o=e.start,s=e.end,c=e.period,d=(e.hasTime,(0,ee.Z)(e,Ze)),p=(0,w.useState)(b(c,S(s))),m=(0,t.Z)(p,2),h=m[0],f=m[1],v=(0,w.useState)((function(){for(var e=b(c,S(o));c&&h&&e>h;)e-=c;return e})),y=(0,t.Z)(v,2),x=y[0],g=y[1],N=(0,w.useState)(Date.now()),D=(0,t.Z)(N,2),Z=D[0],A=D[1];(0,w.useEffect)((function(){var e=setTimeout((function(){f(b(c,S(h))),A((function(){return Date.now()})),g((function(){for(var e=b(c,S(x));c&&h&&e>=h;)e-=c;return e}))}),b(3e4,0)-Date.now());return function(){return clearTimeout(e)}}),[Z,x,h,c]);var P=!!c,C=!1;k(x)&&(C=!0);var B=!1;if((k(h)||!h&&k(x+u)||!P&&(k(h)||!h&&k(x+u)))&&(B=!0),B)return null;var M=x;C&&h&&(M=h);var T=M/l;return P||(T-=5259600),(0,_.jsxs)(j.Z,(0,i.Z)((0,i.Z)({ref:n,className:z()("timer-card",r),modalContent:(0,_.jsx)(De,{start:x,end:h,period:c,description:a}),style:{order:T},highlight:!!C},d),{},{children:[(0,_.jsx)(Se,{prefix:x&&h&&"Starts",timestamp:x,conditions:"future"}),(0,_.jsx)(Se,{prefix:x&&h&&"Ends",timestamp:h,conditions:["future",{timestamp:x,when:"past"}]})]}))}));Ae.defaultProps={hasTime:!0};var Pe=Ae;function Ce(){var e,n,r=(0,R.useQuery)("Settings"),i=null===r||void 0===r||null===(e=r.data)||void 0===e||null===(n=e.destiny2CoreSettings)||void 0===n?void 0:n.currentSeasonHash,t=(0,R.useQuery)(["DestinySeasonDefinition",i],{enabled:!!i}),a=t.isLoading,o=t.error,s=t.data;return r.isLoading||a?null:r.error||o?(console.error(r.error),null):(0,_.jsx)(Pe,{title:"Season ".concat(s.seasonNumber,": ").concat(s.displayProperties.name),description:s.displayProperties.description,start:s.startDate,end:s.endDate,icon:"".concat("https://bungie.net").concat(s.displayProperties.icon)})}var Be=[(0,_.jsx)(Q,{id:"2721157927",name:"Tarnation"}),(0,_.jsx)(Q,{id:"1399109800",name:"Fel Taradiddle"}),(0,_.jsx)(Q,{id:"3865728990",name:"Father's Sins"}),(0,_.jsx)(Q,{id:"927567426",name:"Come to Pass"})];function Me(){return(0,_.jsx)(D,{name:"Wellspring Weapon",items:Be,start:1648746e6,period:u,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyMilestoneDefinition_feb5aecca544ab023ecf3b74ac8f509b.png"})}var Te=function(){return[{title:"Daily Reset",start:(0,c.PR)().end,period:u,icon:(0,_.jsx)(he.jFC,{})},{title:"Weekly Reset",start:(0,c.nQ)().end,period:p,icon:(0,_.jsx)(he.jFC,{}),link:"https://kyber3000.com/reset"},{title:"Weekend Activities",start:(0,c.yb)()?(0,c.yb)().start:(0,c.l2)().start,end:(0,c.yb)()?(0,c.yb)().end:(0,c.l2)().end,period:p,icon:(0,_.jsx)(he.jFC,{}),description:(0,_.jsxs)("ul",{children:[(0,_.jsx)("li",{children:(0,_.jsx)("a",{href:"https://kyber3000.com/Xur",target:"_blank",rel:"noreferrer",children:"Xur"})}),(0,_.jsx)("li",{children:(0,_.jsx)("a",{href:"https://kyber3000.com/Trials",target:"_blank",rel:"noreferrer",children:"Trials of Osiris"})})]})}]};function Ue(){return(Ue=(0,a.Z)(s().mark((function e(n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:return e.next=4,e.sent.json();case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oe=function(e){return Ue.apply(this,arguments)}("https://raw.githubusercontent.com/CostasAK/d2-timers/events/events.json"),Le=[{name:"Destiny Server and Update Status",link:"https://help.bungie.net/hc/en-us/articles/360049199271-Destiny-Server-and-Update-Status"},{name:"Bungie Maintenance Notifications",link:"https://twitter.com/BungieHelp"},{name:"Patch Notes",link:"https://www.bungie.net/en/Explore/Category?category=Updates"}];function Ve(){var e=w.useState([]),n=(0,t.Z)(e,2),r=n[0],a=n[1];Oe.then((function(e){return a(e)}));var o=w.useState(Te()),s=(0,t.Z)(o,2),c=s[0],l=s[1],u=w.useState(Date.now()),p=(0,t.Z)(u,2),m=p[0],h=p[1];return w.useEffect((function(){var e=setTimeout((function(){l(Te()),h((function(){return Date.now()}))}),d-m%d);return function(){return clearTimeout(e)}}),[m]),(0,_.jsxs)("div",{className:"timers-wrapper",children:[(0,_.jsxs)("div",{className:"timers",children:[(0,_.jsx)(me,{}),(0,_.jsx)(Me,{}),(0,_.jsx)(je,{}),(0,_.jsx)(ke,{}),(0,_.jsx)(I,{}),(0,_.jsx)(Ce,{}),r.map((function(e,n){return(0,_.jsx)(Pe,(0,i.Z)({},e),n)})),c.map((function(e,n){return(0,_.jsx)(Pe,(0,i.Z)({},e),n)}))]}),(0,_.jsx)("div",{className:"links",children:Le.map((function(e){return(0,_.jsx)(W.Z,{href:e.link,children:e.name},e.name)}))})]})}}}]);
//# sourceMappingURL=973.027956fd.chunk.js.map