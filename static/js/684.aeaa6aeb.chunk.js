"use strict";(self.webpackChunkd2_buddy=self.webpackChunkd2_buddy||[]).push([[684],{5519:function(n,e,r){r.r(e),r.d(e,{default:function(){return En}});var i=r(1413),t=r(885),a=r(5861),o=r(7757),s=r.n(o),c=r(7184),l=6e4,d=36e5,u=24*d,p=7*u,m=30*u,h=365.25*u,f=r(7892),v=r.n(f);function y(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return x(n,!1);var r=new Intl.DateTimeFormat(void 0,{hour:"numeric"}).formatToParts(new Date(n));return void 0!==r.dayPeriod?v()(n).format("h:mm A"):v()(n).format("H:mm")}function x(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return v()(n).format("ddd, D MMM YYYY")+(e?" "+y(n):"")}var j=r(2791),w=r(1625);function g(n){if(Math.abs(n)<750)return"now";var e=function(n){var e=Math.abs(n);if(e<6e4)return"less than 1 minute";if(e<9e4)return"1 minute";if(e<=345e4)return"".concat(Math.round(e/l)," minutes");if(e<22*d)return"".concat(e%d/d<.875?Math.floor(e/d):Math.ceil(e/d)).concat(e%d/d<.125||e%d/d>=.875?"":e%d/d<.375?"\xbc":e%d/d<.625?"\xbd":"\xbe"," hour").concat(e<675e4?"":"s");if(e<1.5*u)return"1 day";if(e<26*u)return"".concat(Math.round(e/u)," days");if(e<46*u)return"1 month";if(e<11*m)return"".concat(Math.round(e/m)," months");if(e<18*m)return"1 year";return"".concat(Math.round(e/h)," years")}(n);return n<0?"".concat(e," ago"):"in ".concat(e)}function k(n){return n&&n<=Date.now()}function b(n,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now()+1e3;if(!n||!e)return e;var i=(e-=e%1e3)%n,t=(r+=1e3-r%1e3)%n||0;return t<i?r-t+i:r-t+i+n}function S(n){return!!n&&new Date(n).getTime()}var _=r(184);function D(n){var e=n.name,r=n.items,i=n.start,a=n.period,o=n.icon,s=(0,j.useState)(Date.now()),c=(0,t.Z)(s,2),d=c[0],p=c[1],m=(0,j.useState)(b(a,S(i))),f=(0,t.Z)(m,2),v=f[0],D=f[1];function N(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!e&&k(n-u)?y(n):x(n)}(0,j.useEffect)((function(){var n=setTimeout((function(){p((function(){return Date.now()})),D((function(){return b(a,S(i))}))}),1e3);return function(){clearTimeout(n)}}),[i,a,v,d]);var A=(v-5*h)/l,Z=Math.floor((d-i)/a)%r.length,P=(0,_.jsxs)(_.Fragment,{children:[r[Z],"Cycles "+function(n){var e=g(n-d);return k(n-u)?e+", at "+N(n):e+", on "+N(n)}(v)]}),C=(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("section",{children:P}),(0,_.jsxs)("section",{className:"upcoming-items",children:[(0,_.jsx)("h3",{children:"Upcoming"}),r.map((function(n,e){var i=(e-Z+r.length-1)%r.length;return(0,_.jsxs)("section",{style:{order:i},children:[n,N(v+i*a,!0)]},e)}))]})]});return(0,_.jsx)(w.Z,{className:"cycle-card",title:e,style:{order:A},modalContent:C,icon:o,children:P})}D.defaultProps={period:u};var N=D,A=r(4996),Z=r(8301),P=r(4036),C=r(8722);function B(n){var e=(null===n||void 0===n?void 0:n.screenshot)||(null===n||void 0===n?void 0:n.pgcrImage);return e?"https://bungie.net"+e:null}var M=r(6107),T=function(n,e){return Object.keys(n).find((function(r){return n[r]===e}))};var U=function(n){var e;return null===(e=T(M.BN,null===n||void 0===n?void 0:n.defaultDamageType))||void 0===e?void 0:e.replace(/thermal/i,"Solar")};var O=function(n){var e,r=null===n||void 0===n?void 0:n.itemTypeDisplayName;return"Grenade Launcher"===r&&M.JS.Heavy===(null===n||void 0===n||null===(e=n.equippingBlock)||void 0===e?void 0:e.ammoType)&&(r="Heavy "+r),r},L={Legendary:"#4e3263",Exotic:"#cdad34"};var V=function(n){return L[n]||"#04040e"},R=r(1933),E=[{name:"DestinyTracker",url:"https://destinytracker.com/destiny-2/db/items/",icon:"https://cod.tracker.gg/public/icons/icon192.png"},{name:"Gunsmith",url:"https://d2gunsmith.com/w/",icon:"https://d2gunsmith.com/favicon.ico"},{name:"Light.gg",url:"https://www.light.gg/db/en/items/",icon:"https://www.light.gg/Content/Images/new-icon.png"}];function F(n){var e=n.id;return(0,_.jsx)("ul",{className:"weapon-links",children:E.map((function(n){return(0,_.jsx)("li",{children:(0,_.jsxs)("a",{className:"site-link",href:n.url+e,target:"_blank",rel:"noreferrer",children:[n.icon&&(0,_.jsx)(Z.Z,{src:n.icon,className:"site-icon"}),n.name]})},n.name)}))})}function Q(n){var e,r,i=n.id,t=n.name,a=(0,R.useQuery)(["DestinyInventoryItemDefinition",i]),o=a.data,s=a.error;if(a.isLoading)return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:"destiny-weapon",children:[(0,_.jsx)(P.Z,{size:"inline"})," ",t&&(0,_.jsx)("span",{children:t})]})});if(s)return console.error(s),null;t||(t=null===o||void 0===o||null===(e=o.displayProperties)||void 0===e?void 0:e.name);var c=O(o),l=U(o),d=null===o||void 0===o||null===(r=o.inventory)||void 0===r?void 0:r.tierTypeName,u=B(o);return(0,_.jsx)(C.Z,{triggerContent:(0,_.jsxs)("div",{className:"destiny-weapon a-link",children:[(0,_.jsx)(A.Z,{icon:["weapons",c],color:l})," ",(0,_.jsx)("span",{children:t})]}),tooltip:{contents:"".concat(d," ").concat(l," ").concat(c),backgroundColor:V(d)},children:(0,_.jsxs)("article",{className:"weapon-modal "+(null===d||void 0===d?void 0:d.toLowerCase()),children:[(0,_.jsx)("div",{className:"weapon-screenshot",style:{backgroundImage:"url(".concat(u,")")},children:(0,_.jsx)(F,{id:i})}),(0,_.jsxs)("div",{className:"weapon-header",children:[(0,_.jsx)(Z.Z,{src:o.displayProperties.icon,className:"weapon-icon"}),(0,_.jsxs)("div",{className:"weapon-header-text",children:[(0,_.jsx)("h3",{children:t}),(0,_.jsxs)("p",{children:[d," |"," ",(0,_.jsx)(A.Z,{icon:["elements",l],color:l})," ",l," | ",(0,_.jsx)(A.Z,{icon:["weapons",c]})," ",c]})]})]})]})})}var H=[(0,_.jsx)(Q,{id:"2782847179",name:"Blasphemer"}),(0,_.jsx)(Q,{id:"2164448701",name:"Apostate"}),(0,_.jsx)(Q,{id:"3067821200",name:"Heretic"})];function I(){return(0,_.jsx)(N,{name:"Altars of Sorrow Weapon",items:H,start:16488324e5,period:u,icon:"https://www.bungie.net/common/destiny2_content/icons/58bf5b93ae8cfefc55852fe664179757.png"})}var W=r(691),K=r(1694),z=r.n(K),q=(0,j.forwardRef)((function(n,e){var r=n.id,i=n.dataArray,t=n.name,a=r?[].concat(r):[],o=(0,R.useQueries)(a.map((function(n){return{queryKey:["DestinyActivityDefinition",n]}})),{enabled:!!r});if(r){if(!o.every((function(n){return n.isSuccess})))return o.some((function(n){return n.isLoading}))?(0,_.jsx)(_.Fragment,{children:(0,_.jsx)("article",{ref:e,className:"activity",children:(0,_.jsx)(P.Z,{size:"page",fadeIn:"none"})})}):(o.filter((function(n){return n.error})).map((function(n){return console.error(n.error)})),null);o=o.filter((function(n){return n.isSuccess})).map((function(n){return n.data}))}else o=i.map((function(n){return n.data}));return o.sort((function(n,e){return(null===n||void 0===n?void 0:n.activityLightLevel)-(null===e||void 0===e?void 0:e.activityLightLevel)})),(0,_.jsxs)("article",{ref:e,className:z()("activity","success"),children:[(0,_.jsx)(on,{data:o[0],name:t}),o.map((function(n,e){return(0,_.jsxs)(j.Fragment,{children:[(0,_.jsx)(rn,{data:n}),(0,_.jsx)(dn,{data:n})]},e)}))]})}));q.defaultProps={};var Y=r(2982),G=r(935),X=[{class:"Overload",pattern:/Disruption|Overload/i},{class:"Unstoppable",pattern:/Stagger|Unstoppable/i},{class:"Barrier",pattern:/Shield-Piercing|Barrier/i}],$=(0,j.forwardRef)((function(n,e){var r=n.champions,i=n.known_champions;if(!r||r.length<1)return null;var t=new Set;return r.map((function(n){return X.map((function(e){var r;return e.pattern.test(null===n||void 0===n||null===(r=n.displayProperties)||void 0===r?void 0:r.description)&&t.add(e.class)}))})),(0,_.jsxs)("section",{ref:e,className:"activity-champions",children:[(0,_.jsx)("h5",{className:"heading",children:"Champions"}),(0,_.jsx)("div",{className:"champions",children:(0,Y.Z)(t).map((function(n,e){return(0,_.jsx)(G.Z,{contents:"".concat(n," Champions"),children:(0,_.jsxs)("div",{className:"champion "+n,children:[(0,_.jsx)(A.Z,{icon:["champions","modifiers",n],style:{filter:"brightness(".concat(i[n]&&"75%",")")}}),i[n]>0&&(0,_.jsx)("span",{className:"champion-amount",children:i[n]})]},e)},e)}))})]})}));$.defaultProps={champions:[],known_champions:{}};var J=(0,j.forwardRef)((function(n,e){var r,i=n.id,t=(0,R.useQuery)(["DestinyDestinationDefinition",i]),a=t.data,o=t.error;return t.isLoading?(0,_.jsxs)("p",{ref:e,className:"destination",children:[(0,_.jsx)(A.Z,{icon:["activities","Destination"]}),(0,_.jsx)(P.Z,{size:"inline"})]}):o?(console.error(o),null):(0,_.jsxs)("p",{ref:e,className:"destination",children:[(0,_.jsx)(A.Z,{icon:["activities","Destination"]}),null===a||void 0===a||null===(r=a.displayProperties)||void 0===r?void 0:r.name]})}));J.defaultProps={};var nn=r(5987),en=["className","data"],rn=(0,j.forwardRef)((function(n,e){var r,t=n.className,a=n.data,o=(0,nn.Z)(n,en),s=null===a||void 0===a||null===(r=a.selectionScreenDisplayProperties)||void 0===r?void 0:r.name;return(0,_.jsx)("h2",(0,i.Z)((0,i.Z)({ref:e,className:z()("activity-difficulty",null===s||void 0===s?void 0:s.toLowerCase(),t)},o),{},{children:s}))}));rn.defaultProps={};var tn={LostSector:"Lost Sector"};var an=function(n){var e=T(M.EI,null===n||void 0===n?void 0:n.directActivityModeType);return tn[e]||e},on=(0,j.forwardRef)((function(n,e){var r=n.data,i=n.name;i||(i=r.displayProperties.name);var t=an(r);"Nightfall"===r.originalDisplayProperties.name&&(i=r.originalDisplayProperties.description,t="Nightfall");var a=B(r);return(0,_.jsxs)("section",{ref:e,className:"activity-header",style:{backgroundImage:"url(".concat(a,")")},children:[(0,_.jsx)("h5",{className:"activity-type",children:t}),(0,_.jsx)("h1",{className:"activity-name",children:i}),(0,_.jsx)(J,{id:r.destinationHash})]})}));on.defaultProps={};var sn=(0,j.forwardRef)((function(n,e){var r,i,t,a,o=n.data,s=null===o||void 0===o||null===(r=o.displayProperties)||void 0===r?void 0:r.name,c=null===o||void 0===o||null===(i=o.displayProperties)||void 0===i?void 0:i.icon,l=null!==o&&void 0!==o&&null!==(t=o.displayProperties)&&void 0!==t&&t.description?(0,_.jsx)("p",{children:null===o||void 0===o||null===(a=o.displayProperties)||void 0===a?void 0:a.description.replace(/(?:[\s.,]*\n+[\s.,]*)+/g,"; ").replace(/(\[Disruption|Stagger\])/g,"|$1|").split("|")}):null;if(!c||!s)return null;var d=[{class:"arc",pattern:/arc/i},{class:"solar",pattern:/solar/i},{class:"void",pattern:/void/i},{class:"stasis",pattern:/stasis/i}];return(0,_.jsxs)("section",{ref:e,className:"activity-modifier",children:[(0,_.jsx)(G.Z,{contents:s,children:(0,_.jsx)(Z.Z,{className:z()("icon",d.filter((function(n){return n.pattern.test(s)})).map((function(n){return n.class}))),src:c})}),(0,_.jsxs)("div",{className:"description",children:[(0,_.jsx)("h6",{className:z()("heading",d.filter((function(n){return n.pattern.test(s)})).map((function(n){return n.class}))),children:s}),l]})]})}));sn.defaultProps={};var cn={0:{known_shields:{Void:0,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:0,Unstoppable:0}},480864726:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:3,Overload:0,Unstoppable:1}},480864721:{known_shields:{Void:0,Solar:0,Arc:1},known_champions:{Barrier:5,Overload:0,Unstoppable:2}},145221019:{known_shields:{Void:5,Solar:0,Arc:7},known_champions:{Barrier:0,Overload:1,Unstoppable:2}},145221020:{known_shields:{Void:5,Solar:0,Arc:4},known_champions:{Barrier:0,Overload:4,Unstoppable:2}},3094493720:{known_shields:{Void:0,Solar:2,Arc:4},known_champions:{Barrier:3,Overload:0,Unstoppable:1}},3094493727:{known_shields:{Void:0,Solar:2,Arc:2},known_champions:{Barrier:3,Overload:0,Unstoppable:4}},2936791996:{known_shields:{Void:4,Solar:0,Arc:0},known_champions:{Barrier:2,Overload:2,Unstoppable:0}},2936791995:{known_shields:{Void:3,Solar:0,Arc:0},known_champions:{Barrier:5,Overload:4,Unstoppable:0}},1898610132:{known_shields:{Void:9,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:2,Unstoppable:2}},1898610131:{known_shields:{Void:10,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:4,Unstoppable:3}},660710127:{known_shields:{Void:1,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:2,Unstoppable:3}},660710120:{known_shields:{Void:1,Solar:0,Arc:0},known_champions:{Barrier:0,Overload:3,Unstoppable:4}},4206916275:{known_shields:{Void:17,Solar:2,Arc:0},known_champions:{Barrier:0,Overload:1,Unstoppable:3}},4206916276:{known_shields:{Void:29,Solar:2,Arc:1},known_champions:{Barrier:0,Overload:3,Unstoppable:5}},3911969233:{known_shields:{Void:0,Solar:0,Arc:4},known_champions:{Barrier:4,Overload:0,Unstoppable:3}},3911969238:{known_shields:{Void:0,Solar:0,Arc:1},known_champions:{Barrier:7,Overload:0,Unstoppable:3}},184186581:{known_shields:{Void:0,Solar:10,Arc:0},known_champions:{Barrier:3,Overload:2,Unstoppable:0}},184186578:{known_shields:{Void:0,Solar:10,Arc:0},known_champions:{Barrier:4,Overload:6,Unstoppable:0}},567131512:{known_shields:{Void:0,Solar:8,Arc:3},known_champions:{Barrier:3,Overload:2,Unstoppable:0}},567131519:{known_shields:{Void:0,Solar:8,Arc:3},known_champions:{Barrier:4,Overload:6,Unstoppable:0}},3678847129:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:0,Overload:3,Unstoppable:2}},3678847134:{known_shields:{Void:0,Solar:1,Arc:2},known_champions:{Barrier:0,Overload:3,Unstoppable:4}}};var ln=function(n){return cn[n]||{known_shields:void 0,known_champions:void 0}},dn=(0,j.forwardRef)((function(n,e){var r=n.data,i=(0,R.useQueries)(r.modifiers.map((function(n){return{queryKey:["DestinyActivityModifierDefinition",n.activityModifierHash]}})));if(!i.every((function(n){return n.isSuccess})))return i.some((function(n){return n.isLoading}))?(0,_.jsx)("section",{ref:e,className:"activity-modifiers",children:(0,_.jsx)(P.Z,{size:"section"})}):(i.filter((function(n){return n.error})).map((function(n){return console.error(n.error)})),null);var t=ln(null===r||void 0===r?void 0:r.hash),a=t.known_shields,o=t.known_champions,s=i.filter((function(n){return n.isSuccess})).map((function(n){return n.data})),c=s.filter((function(n){return/shielded foes/i.test(n.displayProperties.name)})),l=s.filter((function(n){return/champion foes/i.test(n.displayProperties.name)})),d=s.filter((function(n){return!/(shielded|champion) foes|champions: mob| modifiers$/i.test(n.displayProperties.name)}));return(0,_.jsxs)("section",{ref:e,className:"activity-modifiers",children:[c.length>0&&(0,_.jsx)(pn,{shields:c,known_shields:a}),l.length>0&&(0,_.jsx)($,{champions:l,known_champions:o}),d.length>0&&(0,_.jsxs)("section",{className:"other-modifiers",children:[(0,_.jsx)("h5",{className:"heading",children:"Modifiers"}),(0,_.jsx)("div",{className:"modifiers",children:d.map((function(n,e){return(0,_.jsx)(sn,{data:n},e)}))})]})]})}));dn.defaultProps={};var un=[{name:"Arc",pattern:/arc/i},{name:"Solar",pattern:/solar/i},{name:"Void",pattern:/void/i},{name:"Stasis",pattern:/stasis/i}],pn=(0,j.forwardRef)((function(n,e){var r=n.shields,i=n.known_shields;if(!r||r.length<1)return null;var t=new Set;return r.map((function(n){return un.map((function(e){var r;return e.pattern.test(null===n||void 0===n||null===(r=n.displayProperties)||void 0===r?void 0:r.description)&&t.add(e.name)}))})),(0,_.jsxs)("section",{ref:e,className:"activity-shields",children:[(0,_.jsx)("h5",{className:"heading",children:"Shields"}),(0,_.jsx)("div",{className:"shields",children:(0,Y.Z)(t).map((function(n,e){return(0,_.jsx)(G.Z,{contents:"".concat(n," Shields"),children:(0,_.jsxs)("div",{className:"shield",children:[(0,_.jsx)(A.Z,{icon:["elements",n],color:n}),i[n]>0&&(0,_.jsx)("span",{className:"shield-amount",children:i[n]})]},e)},e)}))})]})}));pn.defaultProps={shields:[],known_shields:{}};var mn=q;function hn(){var n,e,r=(0,R.useQuery)("Milestones"),i=(null===r||void 0===r||null===(n=r.data)||void 0===n||null===(e=n[1942283261])||void 0===e?void 0:e.activities)||[],t=(0,R.useQueries)(i.map((function(n){return{queryKey:["DestinyActivityDefinition",n.activityHash]}})),{enabled:!!i});return r.isSuccess&&t.every((function(n){return n.isSuccess}))?(0,_.jsx)(w.Z,{title:"Nightfall",icon:"https://www.bungie.net/common/destiny2_content/icons/48dda413d9f412ca2b10fd56a35a2665.png",customModal:!0,modalContent:(0,_.jsx)(mn,{dataArray:t}),children:t[0].data.displayProperties.description}):null}var fn=r(8014),vn="DestinyActivityDefinition";function yn(n){var e,r=n.name,i=(0,R.useQuery)(["Search",vn,r]),t=i.data,a=i.error,o=i.isLoading,s=(null===t||void 0===t||null===(e=t.results)||void 0===e?void 0:e.results)||[],c=(0,R.useQueries)(s.map((function(n){return{queryKey:[vn,n.hash]}})),{enabled:!!s});if(o||c.some((function(n){return n.isLoading})))return(0,_.jsx)("article",{className:"lost-sector",children:(0,_.jsx)(P.Z,{size:"page",fadeIn:"none"})});if(a||c.some((function(n){return n.error})))return a&&console.error(a),c.map((function(n){return n.error&&console.error(n.error)})),(0,_.jsx)("article",{className:"lost-sector",children:(0,_.jsx)("h2",{className:"error",children:"Can't find Lost Sector info..."})});var l=c.filter((function(n){return"Lost Sector"===an(n.data)}));return(0,_.jsx)(mn,{dataArray:l})}function xn(n,e){return e?xn(e,n%e):n}function jn(n,e){return n*e/xn(n,e)}function wn(n){var e=n.location;return(0,_.jsx)(C.Z,{triggerContent:(0,_.jsxs)("span",{className:"a-link",children:[e.name," - ",e.location]}),background:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_7d11acd7d5a3daebc0a0c906452932d6.png",children:(0,_.jsx)(yn,{name:e.name})})}function gn(){var n=(0,j.useMemo)((function(){var n=[{name:"K1 Crew Quarters",location:"Moon"},{name:"K1 Logistics",location:"Moon"},{name:"K1 Revelation",location:"Moon"},{name:"Metamorphosis",location:"Throne World"},{name:"Sepulcher",location:"Throne World"},{name:"Extraction",location:"Throne World"},{name:"Veles Labyrinth",location:"Cosmodrome"},{name:"Exodus Garden A2",location:"Cosmodrome"},{name:"Aphelion's Rest",location:"Dreaming City"},{name:"Bay of Drowned Wishes",location:"Dreaming City"},{name:"Chamber of Starlight",location:"Dreaming City"}],e=["Chest","Helmet","Legs","Arms"],r=[];do{r.push((0,_.jsxs)("div",{children:[(0,_.jsx)(wn,{location:n[r.length%n.length]})," (",e[r.length%e.length],")"]}))}while(r.length<jn(e.length,n.length));return r}),[]);return(0,_.jsx)(N,{name:"Legend & Master Lost Sector",items:n,start:16534116e5,period:u,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyActivityModeDefinition_7d11acd7d5a3daebc0a0c906452932d6.png"})}var kn=["EDZ","Cosmodrome","Moon"].map((function(n){return(0,_.jsx)("div",{children:n})}));function bn(){return(0,_.jsx)(N,{name:"PsiOps Battleground: Legend",items:kn,start:16521156e5,period:u,icon:"https://www.bungie.net/common/destiny2_content/icons/b5ca23093632aa939e8209a2ee558106.png"})}function Sn(n){return n.charAt(0).toUpperCase()+n.slice(1)}var _n=function(n){var e=n.timestamp,r=n.hasTime,i=n.prefix,a=n.conditions,o=(0,j.useState)(Date.now()),s=(0,t.Z)(o,2),c=s[0],l=s[1],d=(0,j.useState)(g(e-c)),p=(0,t.Z)(d,2),m=p[0],h=p[1];(0,j.useEffect)((function(){var n=setTimeout((function(){l((function(){return Date.now()})),h((function(){return g(e-c)}))}),b(3e4,0)-Date.now());return function(){return clearTimeout(n)}}),[c,e]),a=Array.isArray(a)?a:[a];var f,v;return e&&a.every((function(n){return!0===n||("past"===n?k(e):"future"===n?!k(e):"past"===(null===n||void 0===n?void 0:n.when)?k(n.timestamp):"future"===(null===n||void 0===n?void 0:n.when)?!k(n.timestamp):void 0)}))?(f=Math.abs(e-c)<u?"at "+y(e,r):"on "+x(e,r),(0,_.jsx)("p",{children:(v="".concat(i?"".concat(Array.isArray(i)?k(e)?i[1]:i[0]:i," "):"").concat(m?"".concat(m,", "):"").concat(f),v.split(". ").map(Sn).join(". "))})):null};_n.defaultProps={hasTime:!0,conditions:[!0]};var Dn=r(6031).ZP.p.withConfig({displayName:"TimerCardDescriptionStyle__StyledDescription",componentId:"sc-an8yzt-0"})(["margin-top:",";"],(function(n){return n.theme.lengths.gap})),Nn=function(n){return n===d?"Hourly":n===u?"Daily":n===p?"Weekly":n===m?"Monrthly":n===h?"Yearly":null},An=function(n){var e=n.start,r=n.end,i=n.period,t=n.description;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(_n,{prefix:e&&r&&["Starts","Started"],timestamp:e}),(0,_.jsx)(_n,{prefix:e&&r&&["Ends","Ended"],timestamp:r}),Nn(i)&&(0,_.jsxs)("p",{children:["Period: ",Nn(i)]}),t&&(0,_.jsx)(Dn,{children:t})]})},Zn=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;return(n-r+e)/l},Pn=["description","start","end","period","hasTime"],Cn=(0,j.forwardRef)((function(n,e){var r=n.description,a=n.start,o=n.end,s=n.period,c=(n.hasTime,(0,nn.Z)(n,Pn)),l=(0,j.useState)(b(s,S(o))),d=(0,t.Z)(l,2),p=d[0],m=d[1],f=(0,j.useState)(function(n,e,r){for(var i=b(r,S(n));r&&e&&i>=e;)i-=r;return i}(a,p,s)),v=(0,t.Z)(f,2),y=v[0],x=v[1];return(0,j.useEffect)((function(){var n=setTimeout((function(){m(b(s,S(p))),x((function(){for(var n=b(s,S(y));s&&p&&n>=p;)n-=s;return n}))}),Math.min(y,p)-Date.now+100);return function(){return clearTimeout(n)}}),[y,p,s]),k(p)||!p&&k(y+u)||!s&&(k(p)||!p&&k(y+u))?null:(0,_.jsxs)(w.Z,(0,i.Z)((0,i.Z)({ref:e,modalContent:(0,_.jsx)(An,{start:y,end:p,period:s,description:r}),style:{order:Zn(y,s?0:-10*h)},highlight:k(y)},c),{},{children:[(0,_.jsx)(_n,{prefix:y&&p&&"Starts",timestamp:y,conditions:"future"}),(0,_.jsx)(_n,{prefix:y&&p&&"Ends",timestamp:p,conditions:["future",{timestamp:y,when:"past"}]})]}))}));Cn.defaultProps={hasTime:!0};var Bn=Cn;function Mn(){var n,e,r=(0,R.useQuery)("Settings"),i=null===r||void 0===r||null===(n=r.data)||void 0===n||null===(e=n.destiny2CoreSettings)||void 0===e?void 0:e.currentSeasonHash,t=(0,R.useQuery)(["DestinySeasonDefinition",i],{enabled:!!i}),a=t.isLoading,o=t.error,s=t.data;return r.isLoading||a?null:r.error||o?(console.error(r.error),null):(0,_.jsx)(Bn,{title:"Season ".concat(s.seasonNumber,": ").concat(s.displayProperties.name),description:s.displayProperties.description,start:s.startDate,end:s.endDate,icon:"".concat("https://bungie.net").concat(s.displayProperties.icon)})}var Tn=[(0,_.jsx)(Q,{id:"2721157927",name:"Tarnation"}),(0,_.jsx)(Q,{id:"1399109800",name:"Fel Taradiddle"}),(0,_.jsx)(Q,{id:"3865728990",name:"Father's Sins"}),(0,_.jsx)(Q,{id:"927567426",name:"Come to Pass"})];function Un(){return(0,_.jsx)(N,{name:"Wellspring Weapon",items:Tn,start:1648746e6,period:u,icon:"https://www.bungie.net/common/destiny2_content/icons/DestinyMilestoneDefinition_feb5aecca544ab023ecf3b74ac8f509b.png"})}var On=function(){return[{title:"Daily Reset",start:(0,c.PR)().end,period:u,icon:(0,_.jsx)(fn.jFC,{})},{title:"Weekly Reset",start:(0,c.nQ)().end,period:p,icon:(0,_.jsx)(fn.jFC,{}),link:"https://kyber3000.com/reset"},{title:"Weekend Activities",start:(0,c.yb)()?(0,c.yb)().start:(0,c.l2)().start,end:(0,c.yb)()?(0,c.yb)().end:(0,c.l2)().end,period:p,icon:(0,_.jsx)(fn.jFC,{}),description:(0,_.jsxs)("ul",{children:[(0,_.jsx)("li",{children:(0,_.jsx)("a",{href:"https://kyber3000.com/Xur",target:"_blank",rel:"noreferrer",children:"Xur"})}),(0,_.jsx)("li",{children:(0,_.jsx)("a",{href:"https://kyber3000.com/Trials",target:"_blank",rel:"noreferrer",children:"Trials of Osiris"})})]})}]};function Ln(){return(Ln=(0,a.Z)(s().mark((function n(e){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e);case 2:return n.next=4,n.sent.json();case 4:return r=n.sent,n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var Vn=function(n){return Ln.apply(this,arguments)}("https://raw.githubusercontent.com/CostasAK/d2-timers/events/events.json"),Rn=[{name:"Destiny Server and Update Status",link:"https://help.bungie.net/hc/en-us/articles/360049199271-Destiny-Server-and-Update-Status"},{name:"Bungie Maintenance Notifications",link:"https://twitter.com/BungieHelp"},{name:"Patch Notes",link:"https://www.bungie.net/en/Explore/Category?category=Updates"}];function En(){var n=j.useState([]),e=(0,t.Z)(n,2),r=e[0],a=e[1];Vn.then((function(n){return a(n)}));var o=j.useState(On()),s=(0,t.Z)(o,2),c=s[0],l=s[1],u=j.useState(Date.now()),p=(0,t.Z)(u,2),m=p[0],h=p[1];return j.useEffect((function(){var n=setTimeout((function(){l(On()),h((function(){return Date.now()}))}),d-m%d);return function(){return clearTimeout(n)}}),[m]),(0,_.jsxs)("div",{className:"timers-wrapper",children:[(0,_.jsxs)("div",{className:"timers",children:[(0,_.jsx)(hn,{}),(0,_.jsx)(Un,{}),(0,_.jsx)(gn,{}),(0,_.jsx)(bn,{}),(0,_.jsx)(I,{}),(0,_.jsx)(Mn,{}),r.map((function(n,e){return(0,_.jsx)(Bn,(0,i.Z)({},n),e)})),c.map((function(n,e){return(0,_.jsx)(Bn,(0,i.Z)({},n),e)}))]}),(0,_.jsx)("div",{className:"links",children:Rn.map((function(n){return(0,_.jsx)(W.Z,{href:n.link,children:n.name},n.name)}))})]})}}}]);
//# sourceMappingURL=684.aeaa6aeb.chunk.js.map